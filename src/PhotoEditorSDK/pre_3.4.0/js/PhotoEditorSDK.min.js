(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t(require("canvas"),require("gl")):typeof define=="function"&&define.amd?define(["canvas","gl"],t):typeof exports=="object"?exports.PhotoEditorSDK=t(require("canvas"),require("gl")):n.PhotoEditorSDK=t(n.canvas,n.gl)})(this,function(n,t){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(t.s=108)}([function(n,t){"use strict";t.__esModule=!0;t.default=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}t.__esModule=!0;var f=i(181),u=r(f),e=i(180),o=r(e),s=i(27),h=r(s);t.default=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t=="undefined"?"undefined":h.default(t)));n.prototype=o.default(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(u.default?u.default(n,t):n.__proto__=t)}},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}t.__esModule=!0;var r=i(27),u=f(r);t.default=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&((typeof t=="undefined"?"undefined":u.default(t))==="object"||typeof t=="function")?t:n}},function(n,t,i){"use strict";function rt(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u,f;Object.defineProperty(t,"__esModule",{value:!0});t.GLUtils=t.Promise=t.Log=t.Constants=t.Color=t.Configurable=t.Utils=t.EventEmitter=t.Engine=t.cancelAnimationFrame=t.requestAnimationFrame=undefined;u=i(179);Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return u.requestAnimationFrame}});Object.defineProperty(t,"cancelAnimationFrame",{enumerable:!0,get:function(){return u.cancelAnimationFrame}});f=i(65);Object.keys(f).forEach(function(n){n!=="default"&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return f[n]}})});var e=i(12),o=r(e),s=i(9),h=rt(s),c=i(24),l=r(c),a=i(25),v=r(a),y=i(26),p=r(y),w=i(10),b=r(w),k=i(20),d=r(k),g=i(7),nt=r(g),tt=i(75),it=r(tt);t.Engine=o.default;t.EventEmitter=l.default;t.Utils=v.default;t.Configurable=p.default;t.Color=b.default;t.Constants=h;t.Log=d.default;t.Promise=nt.default;t.GLUtils=it.default},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var e,r;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=u(o),h=i(2),c=u(h),l=i(1),a=u(l),v=i(3),y=i(146),f=u(y),p=i(26),w=u(p);e=v.Constants.OptionType;r=function(n){function t(){var r=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],i;return s.default(this,t),i=c.default(this,n.call(this,r,{intensity:{type:e.NUMBER,"default":1,setter:function(n){return this._stack&&this._stack.setIntensity(n),n}}})),i._stack=new f.default(i._options.intensity),i}return a.default(t,n),t.prototype.render=function(n,t,i){return this._stack.render(n,t,i)},t.prototype.setDirtyForRenderer=function(n,t){this._stack.setDirtyForRenderer(n,t)},t.prototype.dispose=function(){this._stack.dispose()},t}(w.default);r.identifier=null;r.isIdentity=!1;r.displayName=null;r.PrimitivesStack=f.default;t.default=r},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s,h,c,l,a,v,y,p,w,b;Object.defineProperty(t,"__esModule",{value:!0});u=i(147);Object.defineProperty(t,"Brightness",{enumerable:!0,get:function(){return r(u).default}});f=i(149);Object.defineProperty(t,"Contrast",{enumerable:!0,get:function(){return r(f).default}});e=i(148);Object.defineProperty(t,"ColorMatrixPrimitive",{enumerable:!0,get:function(){return r(e).default}});o=i(150);Object.defineProperty(t,"Desaturation",{enumerable:!0,get:function(){return r(o).default}});s=i(151);Object.defineProperty(t,"Gamma",{enumerable:!0,get:function(){return r(s).default}});h=i(152);Object.defineProperty(t,"Glow",{enumerable:!0,get:function(){return r(h).default}});c=i(153);Object.defineProperty(t,"Gobblin",{enumerable:!0,get:function(){return r(c).default}});l=i(154);Object.defineProperty(t,"Grayscale",{enumerable:!0,get:function(){return r(l).default}});a=i(81);Object.defineProperty(t,"LookupTable",{enumerable:!0,get:function(){return r(a).default}});v=i(155);Object.defineProperty(t,"LookupTableImage",{enumerable:!0,get:function(){return r(v).default}});y=i(156);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return r(y).default}});p=i(157);Object.defineProperty(t,"SoftColorOverlay",{enumerable:!0,get:function(){return r(p).default}});w=i(158);Object.defineProperty(t,"ToneCurve",{enumerable:!0,get:function(){return r(w).default}});b=i(159);Object.defineProperty(t,"X400",{enumerable:!0,get:function(){return r(b).default}})},function(n,t,i){"use strict";function tt(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u=i(20),f=r(u),e=i(10),o=r(e),s=i(76),h=r(s),c=i(77),l=r(c),a=i(19),v=r(a),y=i(24),p=r(y),w=i(25),b=r(w),k=i(75),d=r(k),g=i(9),nt=tt(g);t.BATCH_SIZE=2e3;t.VERTEX_SIZE=5;t.VERTEX_BYTE_SIZE=t.VERTEX_SIZE*4;t.Color=o.default;t.Matrix=h.default;t.Vector2=v.default;t.Rectangle=l.default;t.EventEmitter=p.default;t.Log=f.default;t.Utils=b.default;t.Constants=nt;t.GLUtils=d.default},function(n,t,i){"use strict";(function(r,u){function s(n){return n&&n.__esModule?n:{"default":n}}var f,o,e;o=i(27);e=s(o);
/*!
	 * Native Promise Only
	 * v0.8.0-a (c) Kyle Simpson
	 * MIT License: http://getify.mit-license.org
	 * @license
	 */
(function(r,u,e){u[r]=u[r]||e();typeof n!="undefined"&&n.exports?n.exports=u[r]:!0&&!(f=function(){return u[r]}.call(t,i,t,n),f!==undefined&&(n.exports=f))})("Promise",typeof r!="undefined"?r:undefined,function(){function r(n,t){o.add(n,t);f||(f=p(o.drain))}function l(n){var t,i=typeof n=="undefined"?"undefined":e.default(n);return n!=null&&(i=="object"||i=="function")&&(t=n.then),typeof t=="function"?t:!1}function s(){for(var n=0;n<this.chain.length;n++)w(this,this.state===1?this.chain[n].success:this.chain[n].failure,this.chain[n]);this.chain.length=0}function w(n,t,i){var r,u;try{t===!1?i.reject(n.msg):(r=t===!0?n.msg:t.call(void 0,n.msg),r===i.promise?i.reject(TypeError("Promise-chain cycle")):(u=l(r))?u.call(r,i.resolve,i.reject):i.resolve(r))}catch(f){i.reject(f)}}function a(n){var u,t=this;if(!t.triggered){t.triggered=!0;t.def&&(t=t.def);try{(u=l(n))?r(function(){var r=new y(t);try{u.call(n,function(){a.apply(r,arguments)},function(){i.apply(r,arguments)})}catch(f){i.call(r,f)}}):(t.msg=n,t.state=1,t.chain.length>0&&r(s,t))}catch(f){i.call(new y(t),f)}}}function i(n){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=n,t.state=2,t.chain.length>0&&r(s,t))}function v(n,t,i,r){for(var u=0;u<t.length;u++)(function(u){n.resolve(t[u]).then(function(n){i(u,n)},r)})(u)}function y(n){this.def=n;this.triggered=!1}function b(n){this.promise=n;this.state=0;this.triggered=!1;this.chain=[];this.msg=void 0}function t(n){if(typeof n!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var t=new b(this);this.then=function(n,i){var u={success:typeof n=="function"?n:!0,failure:typeof i=="function"?i:!1};return u.promise=new this.constructor(function(n,t){if(typeof n!="function"||typeof t!="function")throw TypeError("Not a function");u.resolve=n;u.reject=t}),t.chain.push(u),t.state!==0&&r(s,t),u.promise};this["catch"]=function(n){return this.then(void 0,n)};try{n.call(void 0,function(n){a.call(t,n)},function(n){i.call(t,n)})}catch(u){i.call(t,u)}}var n,f,o,c=Object.prototype.toString,p=typeof u!="undefined"?function(n){return u(n)}:setTimeout,h;try{Object.defineProperty({},"x",{});n=function(n,t,i,r){return Object.defineProperty(n,t,{value:i,writable:!0,configurable:r!==!1})}}catch(k){n=function(n,t,i){return n[t]=i,n}}return o=function(){function r(n,t){this.fn=n;this.self=t;this.next=void 0}var i,t,n;return{add:function(u,f){n=new r(u,f);t?t.next=n:i=n;t=n;n=void 0},drain:function(){var n=i;for(i=t=f=void 0;n;)n.fn.call(n.self),n=n.next}}}(),h=n({},"constructor",t,!1),t.prototype=h,n(h,"__NPO__",0,!1),n(t,"resolve",function(n){var t=this;return n&&(typeof n=="undefined"?"undefined":e.default(n))=="object"&&n.__NPO__===1?n:new t(function(t,i){if(typeof t!="function"||typeof i!="function")throw TypeError("Not a function");t(n)})}),n(t,"reject",function(n){return new this(function(t,i){if(typeof t!="function"||typeof i!="function")throw TypeError("Not a function");i(n)})}),n(t,"all",function(n){var t=this;return c.call(n)!="[object Array]"?t.reject(TypeError("Not an array")):n.length===0?t.resolve([]):new t(function(i,r){if(typeof i!="function"||typeof r!="function")throw TypeError("Not a function");var u=n.length,f=Array(u),e=0;v(t,n,function(n,t){f[n]=t;++e===u&&i(f)},r)})}),n(t,"race",function(n){var t=this;return c.call(n)!="[object Array]"?t.reject(TypeError("Not an array")):new t(function(i,r){if(typeof i!="function"||typeof r!="function")throw TypeError("Not a function");v(t,n,function(n,t){i(t)},r)})}),t})}).call(t,i(95),i(64).setImmediate)},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(26),a=r(l);u=function(n){function t(){return e.default(this,t),s.default(this,n.apply(this,arguments))}return c.default(t,n),t.prototype.update=function(){},t.prototype.render=function(n,t,i,r){n.identifier==="webgl"?this.renderWebGL(n,t,i,r):this.renderCanvas(n)},t.prototype.renderWebGL=function(){throw new Error("Primitive#renderWebGL is abstract and not implemented in inherited class.");},t.prototype.renderCanvas=function(){throw new Error("Primitive#renderCanvas is abstract and not implemented in inherited class.");},t.prototype.getFilter=function(){return this._filter},t.prototype.dispose=function(){this._filter&&(this._filter.dispose(),this._filter=null)},t}(a.default);t.default=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.RenderType={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},r=t.ImageFormat={PNG:"image/png",JPEG:"image/jpeg"},u=t.Events={OPERATION_UPDATED:"operation:update"},f=t.OptionType={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image"},e=t.UniformType={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"}},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(50),s=r(o);u=function(){function n(t,i,r){var u=arguments.length<=3||arguments[3]===undefined?1:arguments[3];e.default(this,n);this.r=t;this.g=i;this.b=r;this.a=u}return n.prototype.dot=function(n){return this.r*n.r+this.g*n.g+this.b*n.b},n.prototype.toRGBA=function(){var n=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255),this.a];return"rgba("+n.join(",")+")"},n.prototype.toHex=function(){var n=[this._componentToHex(Math.round(this.r*255)),this._componentToHex(Math.round(this.g*255)),this._componentToHex(Math.round(this.b*255))];return"#"+n.join("")},n.prototype.toGLColor=function(){return[this.r,this.g,this.b,this.a]},n.prototype.toRGBGLColor=function(){return[this.r,this.g,this.b]},n.prototype.toHSV=function(){var t=Math.max(this.r,this.g,this.b),r=Math.min(this.r,this.g,this.b),n=void 0,u=void 0,f=t,i=t-r;if(u=t===0?0:i/t,t===r)n=0;else{switch(t){case this.r:n=(this.g-this.b)/i;this.g<this.b&&(n+=6);break;case this.g:n=(this.b-this.r)/i+2;break;case this.b:n=(this.r-this.g)/i+4}n/=6}return[n,u,f]},n.fromHSV=function(t,i,r){var y=arguments.length<=3||arguments[3]===undefined?1:arguments[3],h=[],u=h[0],f=h[1],e=h[2],a=Math.floor(t*6),v=t*6-a,o=r*(1-i),c=r*(1-v*i),l=r*(1-(1-v)*i),s;switch(a%6){case 0:u=r;f=l;e=o;break;case 1:u=c;f=r;e=o;break;case 2:u=o;f=r;e=l;break;case 3:u=o;f=c;e=r;break;case 4:u=l;f=o;e=r;break;case 5:u=r;f=o;e=c}return s=new n,s.r=u,s.g=f,s.b=e,s.a=y,s},n.prototype.clone=function(){return new n(this.r,this.g,this.b,this.a)},n.prototype.equals=function(n){return this.r===n.r&&this.g===n.g&&this.b===n.b&&this.a===n.a},n.prototype._componentToHex=function(n){var t=n.toString(16);return t.length===1?"0"+t:t},n.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},s.default(n,null,[{key:"TRANSPARENT",get:function(){return new n(0,0,0,0)}},{key:"WHITE",get:function(){return new n(1,1,1,1)}},{key:"BLACK",get:function(){return new n(0,0,0,1)}}]),n}();t.default=u},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),h=r(s),c=i(2),l=r(c),a=i(1),v=r(a),y=i(7),e=r(y),p=i(20),f=r(p),w=i(12),o=r(w),b=i(26),k=r(b),d=i(78),g=r(d),nt=i(110),tt=r(nt);u=function(n){function t(i){var u=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],r;return h.default(this,t),r=l.default(this,n.call(this,u,{enabled:{type:"boolean","default":!0}})),r._sdk=i,r._dirtiness={},r._sprite=new o.default.Sprite,r._container=new o.default.Container,r._container.addChild(r._sprite),r}return v.default(t,n),t.prototype._onOptionsChange=function(){this.setDirty(!0)},t.prototype.render=function(n){var r=this,o;if(!this.getEnabled())return f.default.info(this.constructor.name,"Disabled - skipping"),e.default.resolve(n);this._renderTexture||(this._renderTexture=this._sdk.createRenderTexture());var u=this._sdk.getRenderer(),t=void 0,i=void 0;return f.default.canLog("info")&&(i=new g.default(this.constructor.name,"Rendering")),this.isDirtyForRenderer(u)?(this._sprite.setTexture(n),o=this.getNewDimensions(n.getDimensions()),this._renderTexture.resizeTo(o),t=this._render(n).then(function(){return r.setDirtyForRenderer(!1,u),r._renderTexture})):(f.default.info(this.constructor.name,"Rendering from cache"),t=e.default.resolve(this._renderTexture)),t.then(function(n){return i&&i.stop(),n})},t.prototype._render=function(n){var t=void 0;return t=this._sdk.getRenderer().isOfType("webgl")?this._renderWebGL.bind(this):this._renderCanvas.bind(this),t(n)},t.prototype._renderWebGL=function(){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.");},t.prototype._renderCanvas=function(){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.");},t.prototype.getNewDimensions=function(n){return n.clone()},t.prototype.reset=function(){this._dirty=!0;this._glslPrograms={}},t.prototype.isDirtyForRenderer=function(n){return n.id in this._dirtiness||(this._dirtiness[n.id]=!0),this._dirtiness[n.id]},t.prototype.setDirtyForRenderer=function(n,t){this._dirtiness[t.id]=n},t.prototype.setDirty=function(n){for(var t in this._dirtiness)this.setDirtyForRenderer(n,{id:t})},t.prototype.disposeRenderTexture=function(){this._renderTexture=null},t.prototype.dispose=function(){this.disposeRenderTexture();this._sprite.dispose()},t}(k.default);u.identifier=null;u.extend=tt.default;t.default=u},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var o=i(99),f=r(o),s=i(101),u=r(s),h=i(44),c=r(h),l=i(45),a=r(l),v=i(43),y=r(v),p=i(69),w=r(p),b=i(48),k=r(b),d=i(72),g=r(d),nt=i(104),tt=r(nt),it=i(33),rt=r(it),ut=i(32),ft=r(ut),et=i(103),ot=r(et),st=i(102),ht=r(st),ct=i(46),lt=r(ct),at=i(98),vt=r(at),yt=i(74),pt=r(yt);e={WebGLRenderer:u.default,CanvasRenderer:f.default,WebGLFilterManager:a.default,CanvasFilterManager:c.default,DisplayObject:y.default,Container:w.default,BaseTexture:k.default,Texture:g.default,RenderTexture:tt.default,WebGLRenderTarget:rt.default,CanvasRenderTarget:ft.default,Sprite:ot.default,Shaders:ht.default,Shader:lt.default,Filter:vt.default,PixelArrayImage:pt.default,autoDetectRenderer:function(n,t){var i=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];return u.default.isSupported()?new u.default(n,t,i):new f.default(n,t,i)}};t.default=e},function(n){var t=n.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=t)},function(t){t.exports=n},function(n,t,i){n.exports=!i(36)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(n){var t={}.hasOwnProperty;n.exports=function(n,i){return t.call(n,i)}},function(n,t,i){var r=i(28),u=i(87),f=i(61),e=Object.defineProperty;t.f=i(15)?Object.defineProperty:function(n,t,i){if(r(n),t=f(t,!0),r(i),u)try{return e(n,t,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(n[t]=i.value),n}},function(n,t,i){var r=i(194),u=i(51);n.exports=function(n){return r(u(n))}},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=e(r);f=function(){function n(t,i){u.default(this,n);this.x=t;this.y=i;typeof this.x=="undefined"&&(this.x=0);typeof this.y=="undefined"&&(this.y=0)}return n.prototype.set=function(n,t){return this.x=n,this.y=t,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},n.prototype.clamp=function(t,i){var r=t!==null&&typeof t!="undefined",u=i!==null&&typeof i!="undefined";return t instanceof n||!r||(t=new n(t,t)),i instanceof n||!u||(i=new n(i,i)),r&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y)),u&&(this.x=Math.min(i.x,this.x),this.y=Math.min(i.y,this.y)),this},n.prototype.divide=function(t,i){return t instanceof n?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=typeof i=="undefined"?t:i),this},n.prototype.subtract=function(t,i){return t instanceof n?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=typeof i=="undefined"?t:i),this},n.prototype.multiply=function(t,i){return t instanceof n?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=typeof i=="undefined"?t:i),this},n.prototype.add=function(t,i){return t instanceof n?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=typeof i=="undefined"?t:i),this},n.prototype.equals=function(t,i){return t instanceof n?t.x===this.x&&t.y===this.y:t===this.x&&i===this.y},n.prototype.flip=function(){var n=this.x;return this.x=this.y,this.y=n,this},n.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},n.prototype.ceil=function(){return this.x=this.x|1,this.y=this.y|1,this},n.prototype.floor=function(){return this.x=this.x|0,this.y=this.y|0,this},n.prototype.abs=function(){return this.x=this.x|0,this.y=this.y|0,this},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.toString=function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"},n}();t.default=f},function(n,t,i){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var r="warn",u=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],f=u.map(function(n){return n.type}),i={};i.setLevel=function(n){r=n};i.canLog=function(n){if(r===null)return!1;var t=f.indexOf(n),i=f.indexOf(r);return t<i?!1:!0};i.hasColorfulOutput=function(){return(!n||n&&n.browser)&&typeof navigator!="undefined"&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)};i.printError=function(n){var t=n.stack.split("\n");t.forEach(function(n){i.error("Error",n)})};u.forEach(function(n){var t=n.type,r=n.background,u=n.color;i[t]=function(n){var o;if(i.canLog(t)){for(var e=arguments.length,s=Array(e>1?e-1:0),f=1;f<e;f++)s[f-1]=arguments[f];if(o=s.map(function(n){return typeof n=="string"?n:n.toString()}).join(" "),!i.hasColorfulOutput())return console.log("PhotoEditorSDK | "+n+" | "+o);console.log("%c  %c PhotoEditorSDK %c  %c "+n+" %c  "+o+"  %c  ","background: #43ADEB; padding: 5px 0","background: #2B2B2B; color: white; padding: 5px 0","background: #43ADEB; padding: 5px 0","background: "+r+"; color: "+u+"; padding: 5px 0; font-weight: bold","background: #2B2B2B; color: white; padding: 5px 0","background: #43ADEB; padding: 5px 0")}}});t.default=i}).call(t,i(40))},function(n){var t=n.exports={version:"2.4.0"};typeof __e=="number"&&(__e=t)},function(n,t,i){var r=i(17),u=i(38);n.exports=i(15)?function(n,t,i){return r.f(n,t,u(1,i))}:function(n,t,i){return n[t]=i,n}},function(n,t,i){var r=i(59)("wks"),e=i(39),u=i(13).Symbol,f=typeof u=="function",o=n.exports=function(n){return r[n]||(r[n]=f&&u[n]||(f?u:e)("Symbol."+n))};o.store=r},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(20),h=r(s);u=12;f=function(){function n(){o.default(this,n);this._maxListeners=u;this._events={};this._pipeDestinations=[]}return n.prototype.pipeEvents=function(n){this._pipeDestinations.push(n)},n.prototype.unpipeEvents=function(n){var t=this._pipeDestinations.indexOf(n);t!==-1&&this._pipeDestinations.splice(t,1)},n.prototype.on=function(n,t){if(typeof t!="function")throw new TypeError;var i=this._events[n]||(this._events[n]=[]);return i.indexOf(t)!==-1?this:(i.push(t),this._maxListeners&&i.length>this._maxListeners&&(h.default.warn("EventEmitter","Possible memory leak detected, added "+i.length+" `"+n+"` listeners (current limit is "+this._maxListeners+")"),console.trace()),this)},n.prototype.once=function(n,t){function i(){r.off(n,i);t.apply(null,arguments)}var r=this;return this.on(n,i)},n.prototype.off=function(n){var i,t,r;if(arguments.length-1==0)return this._events[n]=null,this;if(i=arguments.length<=1?undefined:arguments[1],typeof i!="function")throw new TypeError;return(t=this._events[n],!t||!t.length)?this:(r=t.indexOf(i),r===-1)?this:(t.splice(r,1),this)},n.prototype.emit=function(n){for(var i,r=arguments.length,u=Array(r>1?r-1:0),t=1;t<r;t++)u[t-1]=arguments[t];return(this._pipeDestinations.forEach(function(t){t.emit.apply(t,[n].concat(u))}),i=this._events[n],!i||!i.length)?!1:(i.forEach(function(n){return n.apply(null,u)}),!0)},n.prototype.setMaxListeners=function(n){if(parseInt(n,10)!==n)throw new TypeError;this._maxListeners=n},n}();t.default=f},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(27),r=u(e),o=i(0),s=u(o),h=i(41),c=u(h);f=function(){function n(){s.default(this,n)}return n.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"},n.values=function(n){var t=[];for(var i in n)t.push(n[i]);return t},n.isDOMElement=function(n){return(typeof HTMLElement=="undefined"?"undefined":r.default(HTMLElement))==="object"?n instanceof HTMLElement:n&&(typeof n=="undefined"?"undefined":r.default(n))==="object"&&n!==null&&n.nodeType===1&&typeof n.nodeName=="string"},n.isTouchEvent=function(n){return n.type.indexOf("touch")!==-1},n.resizeVectorToFit=function(n,t){var i=Math.min(t.x/n.x,t.y/n.y);return n.clone().multiply(i)},n.isExtendable=function(n){return typeof n!="undefined"&&n!==null&&((typeof n=="undefined"?"undefined":r.default(n))==="object"||typeof n=="function")},n.defaults=function(n){var t={},f,r,s,u;for(f in n)t[f]=n[f];for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];for(r=0;r<o.length;r++){s=o[r];for(u in s)typeof t[u]=="undefined"&&(t[u]=s[u])}return t},n.deepDefaults=function(t){var r={},o,e,u,i;for(o in t)r[o]=t[o];for(var s=arguments.length,h=Array(s>1?s-1:0),f=1;f<s;f++)h[f-1]=arguments[f];for(e=0;e<h.length;e++){u=h[e];for(i in u)n.isExtendable(r[i])&&n.isExtendable(u[i])?r[i]=n.deepDefaults(r[i],u[i]):typeof r[i]=="undefined"&&(r[i]=u[i])}return r},n.extend=function(n){var r={},u,i,o,s;for(u in n)r[u]=n[u];for(var f=arguments.length,e=Array(f>1?f-1:0),t=1;t<f;t++)e[t-1]=arguments[t];for(i=0;i<e.length;i++){o=e[i];for(s in o)r[s]=o[s]}return r},n.clone=function(n){return this.extend({},n)},n.createBlobURIFromDataURI=function(n){var t,u;if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array)return n;var i=c.default.decode(n.split(",")[1]),f=n.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(i.length),e=new Uint8Array(r);for(t=0;t<i.length;t++)e[t]=i[t];return u=new window.Blob([r],{type:f}),window.URL.createObjectURL(u)},n.requestAnimationFrame=function(n){var t=function(n){setTimeout(n,1e3/60)};return typeof window=="undefined"?t(n):(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||t)(n)},n.getUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})},n.flatten=function(t){return t.reduce(function(t,i){return t.concat(Array.isArray(i)?n.flatten(i):i)},[])},n.createCanvas=function(){if(typeof window=="undefined"){var n=i(14);return new n}return document.createElement("canvas")},n.isPowerOfTwo=function(n){return(n.x&n.x-1)==0&&(n.y&n.y-1)==0},n.nextLowestPOT=function(n){for(var t=1;t<32;t<<=1)n=n|n>>t;return n-(n>>1)},n.nextHighestPOT=function(n){n--;for(var t=1;t<32;t<<=1)n=n|n>>t;return n+1},n.moveArrayItem=function(n,t,i){if(i>=n.length)for(var r=i-n.length;r--+1;)n.push(undefined);n.splice(i,0,n.splice(t,1)[0])},n}();t.default=f},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var e,s;Object.defineProperty(t,"__esModule",{value:!0});var h=i(27),f=u(h),c=i(83),o=u(c),l=i(0),a=u(l),v=i(2),y=u(v),p=i(1),w=u(p),b=i(7),k=u(b),d=i(20),g=u(d),nt=i(24),tt=u(nt),it=i(19),rt=u(it),ut=i(10),ft=u(ut),et=i(25),ot=u(et),st=i(34),ht=u(st),r=i(9);e=typeof window!="undefined"&&window.Image||i(14).Image;s=function(n){function t(){var r=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],u=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],i;return a.default(this,t),i=y.default(this,n.call(this)),i.availableOptions=i.availableOptions||{},i.availableOptions=ot.default.extend(i.availableOptions,u),i._onConfigurableUpdate=i._onConfigurableUpdate.bind(i),i._initOptions(r),i}return w.default(t,n),t.prototype._buildConfigError=function(n){var t="";return this.constructor.name&&(t=this.constructor.name+": "),t+=n,new Error(t)},t.prototype._onOptionsChange=function(){},t.prototype.validateSettings=function(){var n=this;return new k.default(function(t,i){var r,u;for(r in n.availableOptions)if(u=n.availableOptions[r],u.required&&typeof n._options[r]=="undefined")return i(n._buildConfigError("Option `"+r+"` is required."));t()})},t.prototype._initOptions=function(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],n,i,u,f,s,o;this._options={};f=this;for(n in this.availableOptions){if(u=n.charAt(0).toUpperCase()+n.slice(1),i=this.availableOptions[n],[r.OptionType.STRING,r.OptionType.NUMBER,r.OptionType.BOOLEAN,r.OptionType.OBJECT,r.OptionType.VECTOR2,r.OptionType.COLOR,r.OptionType.CONFIGURABLE,r.OptionType.COLOR_MATRIX,r.OptionType.ARRAY,r.OptionType.IMAGE].indexOf(i.type)===-1)throw this._buildConfigError("Unknown option type: `"+i.type+"`");if(s=function(n){f["set"+u]=function(t,i,r){f.setOption(n,t,i,r)};f["get"+u]=function(){return f.getOption(n)}},s(n,i),i.type===r.OptionType.CONFIGURABLE){this._options[n]=new t(undefined,i.structure||{});this._options[n].on("update",this._onConfigurableUpdate)}typeof i.default=="undefined"||n in e||(o=i.default,typeof i.default=="function"&&(o=i.default()),this["set"+u](o,!1,!0))}for(n in e){if(typeof this.availableOptions[n]=="undefined")throw new Error("Invalid option: "+n);typeof e[n]!="undefined"&&(u=n.charAt(0).toUpperCase()+n.slice(1),this["set"+u](e[n],!1,!0))}},t.prototype.set=function(n){var i=arguments.length<=1||arguments[1]===undefined?!0:arguments[1],t;i&&this.emit("update",this,n);for(t in n)this.setOption(t,n[t],!1);this._onOptionsChange()},t.prototype.getOption=function(n){return this._options[n]},t.prototype.getOptionDefault=function(n){var t=this.availableOptions[n];return t?t.default:undefined},t.prototype.getOptions=function(){return this._options},t.prototype.getDefaultOptions=function(){var i={},n,t;for(n in this._options)(t=this.availableOptions[n].default,typeof t!="undefined")&&(i[n]=t);return i},t.prototype.optionsEqual=function(n){var t,i;for(t in n)if(i=n[t],!this._optionEquals(t,i))return!1;return!0},t.prototype._optionEquals=function(n,t){var u=this.availableOptions[n].type,i=this._options[n];switch(u){case r.OptionType.STRING:case r.OptionType.NUMBER:case r.OptionType.BOOLEAN:case r.OptionType.OBJECT:case"*":return i===t;case r.OptionType.VECTOR2:case r.OptionType.COLOR:case r.OptionType.COLOR_MATRIX:return t.equals(i);case r.OptionType.CONFIGURABLE:return i.optionsEqual(t);case r.OptionType.ARRAY:return this._arrayOptionEquals(n,t);case r.OptionType.IMAGE:return i.src===t.src}},t.prototype._arrayOptionEquals=function(n,i){for(var u,f,o=this._options[n],e=!0,r=0;r<o.length;r++)if(u=o[r],f=i[r],u instanceof t){if(typeof f=="undefined"||!u.optionsEqual(f)){e=!1;break}}else if(f!==u){e=!1;break}return e},t.prototype.serializeOptions=function(){var n={};for(var t in this._options)n[t]=this._serializeOption(t);return n},t.prototype._serializeOption=function(n){var i=this.availableOptions[n].type,t=this._options[n];switch(i){case r.OptionType.STRING:case r.OptionType.NUMBER:case r.OptionType.BOOLEAN:case r.OptionType.OBJECT:case"*":return t;case r.OptionType.VECTOR2:case r.OptionType.COLOR:case r.OptionType.COLOR_MATRIX:return t.clone();case r.OptionType.CONFIGURABLE:return t.serializeOptions();case r.OptionType.ARRAY:return t.slice(0);case r.OptionType.IMAGE:return i.src}},t.prototype.setOption=function(n,t){var h=arguments.length<=2||arguments[2]===undefined?!0:arguments[2],c=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],i,u,s;if(h&&this.emit("update",this,o.default({},n,t)),i=this.availableOptions[n],!i){g.default.error(this.constructor.name,"Unknown option `"+n+"`.");return}typeof i.setter!="undefined"&&(t=i.setter.call(this,t,c));typeof i.validation!="undefined"&&i.validation(t);switch(i.type){case r.OptionType.STRING:if((typeof t=="undefined"?"undefined":f.default(t))!==r.OptionType.STRING)throw this._buildConfigError("Option `"+n+"` has to be a string.");if(u=i.available,typeof u!="undefined"&&u.indexOf(t)===-1)throw this._buildConfigError("Invalid value for `"+n+"` (valid values are: "+i.available.join(", ")+")");this._options[n]=t;break;case r.OptionType.NUMBER:if((typeof t=="undefined"?"undefined":f.default(t))!==r.OptionType.NUMBER)throw this._buildConfigError("Option `"+n+"` has to be a number.");this._options[n]=t;break;case r.OptionType.BOOLEAN:if((typeof t=="undefined"?"undefined":f.default(t))!==r.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+n+"` has to be a boolean.");this._options[n]=t;break;case r.OptionType.VECTOR2:if(!(t instanceof rt.default))throw this._buildConfigError("Option `"+n+"` has to be an instance of Vector2.");this._options[n]=t.clone();break;case r.OptionType.COLOR:if(!(t instanceof ft.default))throw this._buildConfigError("Option `"+n+"` has to be an instance of Color.");this._options[n]=t;break;case r.OptionType.COLOR_MATRIX:if(!(t instanceof ht.default))throw this._buildConfigError("Option `"+n+"` has to be an instance of ColorMatrix.");this._options[n]=t.clone();break;case r.OptionType.OBJECT:case"*":this._options[n]=t;break;case r.OptionType.IMAGE:if(typeof t=="string")s=new e,s.src=t,this._options[n]=s;else if(t instanceof e||t instanceof HTMLImageElement)this._options[n]=t;else throw this._buildConfigError("Option `"+n+"` has to be an Image or String.");break;case r.OptionType.CONFIGURABLE:this._options[n].set(t);break;case r.OptionType.ARRAY:if(!(t instanceof Array))throw this._buildConfigError("Option `"+n+"` has to be an Array.");this._options[n]=t.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+i.type+"`");}h&&(this._onOptionsChange(),this.emit("update",this,o.default({},n,t)))},t.prototype._onConfigurableUpdate=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];this.emit.apply(this,["update"].concat(i))},t}(tt.default);t.default=s},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}t.__esModule=!0;var o=i(183),f=e(o),s=i(182),r=e(s),u=typeof r.default=="function"&&typeof f.default=="symbol"?function(n){return typeof n}:function(n){return n&&typeof r.default=="function"&&n.constructor===r.default?"symbol":typeof n};t.default=typeof r.default=="function"&&u(f.default)==="symbol"?function(n){return typeof n=="undefined"?"undefined":u(n)}:function(n){return n&&typeof r.default=="function"&&n.constructor===r.default?"symbol":typeof n=="undefined"?"undefined":u(n)}},function(n,t,i){var r=i(30);n.exports=function(n){if(!r(n))throw TypeError(n+" is not an object!");return n}},function(n,t,i){var u=i(13),e=i(21),o=i(85),s=i(22),f="prototype",r=function(n,t,i){var b=n&r.F,v=n&r.G,k=n&r.S,w=n&r.P,d=n&r.B,g=n&r.W,l=v?e:e[t]||(e[t]={}),p=l[f],a=v?u:k?u[t]:(u[t]||{})[f],h,y,c;v&&(i=t);for(h in i)(y=!b&&a&&a[h]!==undefined,y&&h in l)||(c=y?a[h]:i[h],l[h]=v&&typeof a[h]!="function"?i[h]:d&&y?o(c,u):g&&a[h]==c?function(n){var t=function(t,i,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,i)}return new n(t,i,r)}return n.apply(this,arguments)};return t[f]=n[f],t}(c):w&&typeof c=="function"?o(Function.call,c):c,w&&((l.virtual||(l.virtual={}))[h]=c,n&r.R&&p&&!p[h]&&s(p,h,c)))};r.F=1;r.G=2;r.S=4;r.P=8;r.B=16;r.W=32;r.U=64;r.R=128;n.exports=r},function(n){n.exports=function(n){return typeof n=="object"?n!==null:typeof n=="function"}},function(n){n.exports=t},function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=o(f),r=i(6);u=function(){function n(t,i,r,u,f){e.default(this,n);this._width=t;this._height=i;this._pixelRatio=r;this._canvas=u||this._createCanvas();this._context=f||this._canvas.getContext("2d");this._canvas.width=this._width*this._pixelRatio;this._canvas.height=this._height*this._pixelRatio;this._filterStack=[{renderTarget:this,filter:[]}]}return n.prototype._createCanvas=function(){return r.Utils.createCanvas()},n.prototype.clear=function(){var n=this._context;n.setTransform(1,0,0,1,0,0);n.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)},n.prototype.resizeTo=function(n){this._width!==n.x&&(this._width=n.x,this._canvas.width=this._width*this._pixelRatio);this._height!==n.y&&(this._height=n.y,this._canvas.height=this._height*this._pixelRatio)},n.prototype.getCanvas=function(){return this._canvas},n.prototype.getContext=function(){return this._context},n.prototype.getFilterStack=function(){return this._filterStack},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.getPixelRatio=function(){return this._pixelRatio},n.prototype.setPixelRatio=function(n){this._pixelRatio=n},n.prototype.getDimensions=function(){return new r.Vector2(this._width,this._height)},n.prototype.dispose=function(){this._canvas=null;this._context=null},n}();t.default=u},function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=o(f),r=i(6);u=function(){function n(t,i,u,f){var o=arguments.length<=4||arguments[4]===undefined?!1:arguments[4];e.default(this,n);this._renderer=t;this._gl=t.getContext();this._width=i;this._height=u;this._frame=null;this._pixelRatio=f;this._projectionMatrix=new r.Matrix;this._mipMapping=!1;this._framebuffer=null;this._isRoot=o;this._filterStack=[{renderTarget:this,filter:[]}];o||this._initFrameBuffer()}return n.prototype.resizeTo=function(n){this._width=n.x|0;this._height=n.y|0;this._isRoot||this._resizeTexture();this._calculateProjectionMatrix()},n.prototype._setTexParameters=function(){var n=this._gl;n.bindTexture(n.TEXTURE_2D,this._texture);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var t=n.LINEAR,i=n.NEAREST,u=new r.Vector2(this._width,this._height);r.Utils.isPowerOfTwo(u)&&(r.Log.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0,this.updateMipMap(),t=n.LINEAR_MIPMAP_NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i)},n.prototype.updateMipMap=function(){if(!this._mipMapping)return!1;var n=this._gl;n.bindTexture(n.TEXTURE_2D,this._texture);n.generateMipmap(n.TEXTURE_2D)},n.prototype._resizeTexture=function(){var n=this._gl,t,i;n.bindTexture(n.TEXTURE_2D,this._texture);t=this._width*this._pixelRatio;i=this._height*this._pixelRatio;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,i,0,n.RGBA,n.UNSIGNED_BYTE,null);this._setTexParameters()},n.prototype.activate=function(){var n=this._gl;n.bindFramebuffer(n.FRAMEBUFFER,this._framebuffer);this._calculateProjectionMatrix();n.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio);n.disable(n.STENCIL_TEST)},n.prototype.clear=function(){var t=arguments.length<=0||arguments[0]===undefined?r.Color.TRANSPARENT:arguments[0],n=this._gl;n.bindFramebuffer(n.FRAMEBUFFER,this._framebuffer);r.GLUtils.checkFramebufferStatus("WebGLRenderTarget#clear",n);n.clearColor.apply(n,t.toGLColor());n.clear(n.COLOR_BUFFER_BIT)},n.prototype._calculateProjectionMatrix=function(){var n=this._projectionMatrix;n.reset();var t=this._frame||new r.Rectangle(0,0,this._width,this._height),i=t.x,u=t.y;this._isRoot?(n.a=2/this._width,n.d=-2/this._height,n.tx=-1-i*n.a,n.ty=1-u*n.d):(n.a=2/this._width,n.d=2/this._height,n.tx=-1-i*n.a,n.ty=-1-u*n.d)},n.prototype._initFrameBuffer=function(){var n=this._gl;this._framebuffer=n.createFramebuffer();this._texture=n.createTexture();n.bindTexture(n.TEXTURE_2D,this._texture);this._setTexParameters();n.bindFramebuffer(n.FRAMEBUFFER,this._framebuffer);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this._texture,0);this.resizeTo(new r.Vector2(this._width,this._height));r.GLUtils.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",n)},n.prototype.getProjectionMatrix=function(){return this._projectionMatrix},n.prototype.getTexture=function(){return this._texture},n.prototype.getFrame=function(){return this._frame},n.prototype.setFrame=function(n){this._frame=n},n.prototype.getFilterStack=function(){return this._filterStack},n.prototype.getPixelRatio=function(){return this._pixelRatio},n.prototype.setPixelRatio=function(n){this._pixelRatio=n;this._isRoot||this._resizeTexture()},n.prototype.dispose=function(){var n=this._gl;n.deleteTexture(this._texture);n.deleteFramebuffer(this._framebuffer)},n}();t.default=u},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(50),s=r(o),h=i(10),c=r(h);u=function(){function n(){var t=arguments.length<=0||arguments[0]===undefined?1:arguments[0],i=arguments.length<=1||arguments[1]===undefined?0:arguments[1],r=arguments.length<=2||arguments[2]===undefined?0:arguments[2],u=arguments.length<=3||arguments[3]===undefined?0:arguments[3],f=arguments.length<=4||arguments[4]===undefined?0:arguments[4],o=arguments.length<=5||arguments[5]===undefined?0:arguments[5],s=arguments.length<=6||arguments[6]===undefined?1:arguments[6],h=arguments.length<=7||arguments[7]===undefined?0:arguments[7],c=arguments.length<=8||arguments[8]===undefined?0:arguments[8],l=arguments.length<=9||arguments[9]===undefined?0:arguments[9],a=arguments.length<=10||arguments[10]===undefined?0:arguments[10],v=arguments.length<=11||arguments[11]===undefined?0:arguments[11],y=arguments.length<=12||arguments[12]===undefined?1:arguments[12],p=arguments.length<=13||arguments[13]===undefined?0:arguments[13],w=arguments.length<=14||arguments[14]===undefined?0:arguments[14],b=arguments.length<=15||arguments[15]===undefined?0:arguments[15],k=arguments.length<=16||arguments[16]===undefined?0:arguments[16],d=arguments.length<=17||arguments[17]===undefined?0:arguments[17],g=arguments.length<=18||arguments[18]===undefined?1:arguments[18],nt=arguments.length<=19||arguments[19]===undefined?0:arguments[19];e.default(this,n);this.set(t,i,r,u,f,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt)}return n.prototype.set=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){this.a=n;this.b=t;this.c=i;this.d=r;this.e=u;this.f=f;this.g=e;this.h=o;this.i=s;this.j=h;this.k=c;this.l=l;this.m=a;this.n=v;this.o=y;this.p=p;this.q=w;this.r=b;this.s=k;this.t=d},n.prototype.reset=function(){this.a=1;this.b=0;this.c=0;this.d=0;this.e=0;this.f=0;this.g=1;this.h=0;this.i=0;this.j=0;this.k=0;this.l=0;this.m=1;this.n=0;this.o=0;this.p=0;this.q=0;this.r=0;this.s=1;this.t=0},n.prototype.apply=function(n){var t=this.a*n.r+this.b*n.g+this.c*n.b+this.d*n.a+this.e*255,i=this.f*n.r+this.g*n.g+this.h*n.b+this.i*n.a+this.j*255,r=this.k*n.r+this.l*n.g+this.m*n.b+this.n*n.a+this.o*255,u=this.p*n.r+this.q*n.g+this.r*n.b+this.s*n.a+this.t*255;return new c.default(t,i,r,u)},n.prototype.multiply=function(n){var r=void 0,u=void 0,f=void 0,e=void 0,o=void 0,s=void 0,h=void 0,c=void 0,l=void 0,a=void 0,v=void 0,y=void 0,p=void 0,w=void 0,b=void 0,k=void 0,d=void 0,g=void 0,nt=void 0,tt=void 0,t=n,i=this;return r=t.a*i.a+t.b*i.f+t.c*i.k+t.d*i.p,u=t.a*i.b+t.b*i.g+t.c*i.l+t.d*i.q,f=t.a*i.c+t.b*i.h+t.c*i.m+t.d*i.r,e=t.a*i.d+t.b*i.i+t.c*i.n+t.d*i.s,s=t.f*i.a+t.g*i.f+t.h*i.k+t.i*i.p,h=t.f*i.b+t.g*i.g+t.h*i.l+t.i*i.q,c=t.f*i.c+t.g*i.h+t.h*i.m+t.i*i.r,l=t.f*i.d+t.g*i.i+t.h*i.n+t.i*i.s,v=t.k*i.a+t.l*i.f+t.m*i.k+t.n*i.p,y=t.k*i.b+t.l*i.g+t.m*i.l+t.n*i.q,p=t.k*i.c+t.l*i.h+t.m*i.m+t.n*i.r,w=t.k*i.d+t.l*i.i+t.m*i.n+t.n*i.s,k=t.p*i.a+t.q*i.f+t.r*i.k+t.s*i.p,d=t.p*i.b+t.q*i.g+t.r*i.l+t.s*i.q,g=t.p*i.c+t.q*i.h+t.r*i.m+t.s*i.r,nt=t.p*i.d+t.q*i.i+t.r*i.n+t.s*i.s,o=t.a*i.e+t.b*i.j+t.c*i.o+t.d*i.t+t.e,a=t.f*i.e+t.g*i.j+t.h*i.o+t.i*i.t+t.j,b=t.k*i.e+t.l*i.j+t.m*i.o+t.n*i.t+t.o,tt=t.p*i.e+t.q*i.j+t.r*i.o+t.s*i.t+t.t,this.a=r,this.b=u,this.c=f,this.d=e,this.e=o,this.f=s,this.g=h,this.h=c,this.i=l,this.j=a,this.k=v,this.l=y,this.m=p,this.n=w,this.o=b,this.p=k,this.q=d,this.r=g,this.s=nt,this.t=tt,this},n.prototype.clone=function(){var t=new n;return t.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),t},n.prototype.equals=function(n){return this.a===n.a&&this.b===n.b&&this.c===n.c&&this.d===n.d&&this.e===n.e&&this.f===n.f&&this.g===n.g&&this.h===n.h&&this.i===n.i&&this.j===n.j&&this.k===n.k&&this.l===n.l&&this.m===n.m&&this.n===n.n&&this.o===n.o&&this.p===n.p&&this.q===n.q&&this.r===n.r&&this.s===n.s&&this.t===n.t},n.prototype.toString=function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"},n.createBrightnessMatrix=function(t){var i=new n;return i.e=t,i.j=t,i.o=t,i},n.createContrastMatrix=function(t){var i=new n,r=(1-t)/2;return i.a=i.g=i.m=t,i.e=i.j=i.o=r,i},n.createSaturationMatrix=function(){var i=arguments.length<=0||arguments[0]===undefined?1:arguments[0],t=new n,r=1-i,u=.213*r,f=.715*r,e=.072*r;return t.a=u+i,t.b=f,t.c=e,t.f=u,t.g=f+i,t.h=e,t.k=u,t.l=f,t.m=e+i,t},n.createLinearMatrix=function(){var i=arguments.length<=0||arguments[0]===undefined?1:arguments[0],r=arguments.length<=1||arguments[1]===undefined?0:arguments[1],t=new n;return t.a=t.g=t.m=i,t.e=t.j=t.o=r,t},s.default(n,null,[{key:"IDENTITY",get:function(){return new n}}]),n}();t.default=u},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),r=i(3);f=function(n){function t(i,u){o.default(this,t);var f=h.default(this,n.call(this,u));if(f._operation=i,f._dirtiness={},f.id=r.Utils.getUUID(),f._renderTextures={},f._identitySprite=new r.Engine.Sprite,f._sprite=new r.Engine.Sprite,f._options.adjustments){f._onOptionsChange=f._onOptionsChange.bind(f);f._options.adjustments.on("updated",f._onOptionsChange)}return f}return l.default(t,n),t.prototype._onOptionsChange=function(){var n=this._dirtiness;for(var t in n)n[t]=!0},t.prototype.getDisplayObject=function(){return this._sprite},t.prototype._getTexture=function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.");},t.prototype._prepareRenderTexture=function(n){if(!this._renderTexture){var t=this._getTexture();this._renderTextureContainer=new r.Engine.Container;this._renderTextureSprite=new r.Engine.Sprite(t);this._renderTextureContainer.addChild(this._renderTextureSprite);this._renderTexture=this._getRenderTexture(n.getRenderer(),t.getDimensions())}},t.prototype._rendersToRenderTexture=function(n){return n.getOptions().smoothDownscaling},t.prototype.update=function(n){return this._rendersToRenderTexture(n)&&this._prepareRenderTexture(n),this._updateSprite(),this._rendersToRenderTexture(n)&&this._renderToRenderTexture(n),r.Promise.resolve()},t.prototype._updateSprite=function(){this._sprite.setAnchor(this._options.anchor);this._sprite.setPosition(this._options.position.clone());this._options.scale&&this._sprite.setScale(this._options.scale.clone());this._sprite.updateTransform();var n=this._sprite.getTexture().getFrame(),t=new r.Vector2(n.width,n.height);this._sprite.setPivot(this._options.pivot.clone().multiply(t));this._sprite.setRotation(this._options.rotation)},t.prototype._renderToRenderTexture=function(n){var u=this._getTexture().getDimensions(),o=this._getRenderTexture(n.getRenderer(),u),i=u.clone(),f,e,t;n.getOptions().smoothDownscaling&&(i.x=r.Utils.nextHighestPOT(i.x),i.y=r.Utils.nextHighestPOT(i.y));this._renderTexture.resizeTo(i);this._renderTexture.render(this._renderTextureContainer);n.getOptions().smoothDownscaling&&(f=new r.Vector2(1,1),this._options.scale&&f.copy(this._options.scale),this._sprite.setWidth(u.x*f.x),this._sprite.setHeight(u.y*f.y),e=i.clone().subtract(u.x,u.y).divide(i),t=o.getUVs().getUVs(),t[0].x=t[3].x=0,t[1].x=t[2].x=1-e.x,t[0].y=t[1].y=0,t[2].y=t[3].y=1-e.y);this._sprite.setTexture(o)},t.prototype.applyFlip=function(n,t){var r=n.getFinalDimensions(),i={position:this._options.position};switch(t){case"horizontal":i.position.x=r.x-i.position.x;typeof this._options.flipHorizontally!="undefined"&&(i.flipHorizontally=!this._options.flipHorizontally);this.set(i);break;case"vertical":i.position.y=r.y-i.position.y;typeof this._options.flipVertically!="undefined"&&(i.flipVertically=!this._options.flipVertically);this.set(i)}},t.prototype.isDirtyForRenderer=function(n){return n.id in this._dirtiness||(this._dirtiness[n.id]=!0),this._dirtiness[n.id]},t.prototype.setDirtyForRenderer=function(n,t){this._dirtiness[t.id]=n},t.prototype.setDirty=function(n){for(var t in this._dirtiness)this._dirtiness[t]=n},t.prototype._getRenderTexture=function(n){var t=arguments.length<=1||arguments[1]===undefined?new r.Vector2(100,100):arguments[1];return this._renderTextures[n.id]||(this._renderTextures[n.id]=new r.Engine.RenderTexture(n,t.x,t.y,1)),this._renderTextures[n.id]},t.prototype.dispose=function(){this._options.adjustments&&this._options.adjustments.off("updated",this._onOptionsChange)},t}(r.Configurable);t.default=f},function(n){n.exports=function(n){try{return!!n()}catch(t){return!0}}},function(n,t,i){var r=i(92),u=i(52);n.exports=Object.keys||function(n){return r(n,u)}},function(n){n.exports=function(n,t){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:t}}},function(n){var t=0,i=Math.random();n.exports=function(n){return"Symbol(".concat(n===undefined?"":n,")_",(++t+i).toString(36))}},function(n){function h(){f&&r&&(f=!1,r.length?i=r.concat(i):e=-1,i.length&&o())}function o(){var t,n;if(!f){for(t=setTimeout(h),f=!0,n=i.length;n;){for(r=i,i=[];++e<n;)r&&r[e].run();e=-1;n=i.length}r=null;f=!1;clearTimeout(t)}}function s(n,t){this.fun=n;this.array=t}function u(){}var t=n.exports={},i=[],f=!1,r,e=-1;t.nextTick=function(n){var r=new Array(arguments.length-1),t;if(arguments.length>1)for(t=1;t<arguments.length;t++)r[t-1]=arguments[t];i.push(new s(n,r));i.length!==1||f||setTimeout(o,0)};s.prototype.run=function(){this.fun.apply(null,this.array)};t.title="browser";t.browser=!0;t.env={};t.argv=[];t.version="";t.versions={};t.on=u;t.addListener=u;t.once=u;t.off=u;t.removeListener=u;t.removeAllListeners=u;t.emit=u;t.binding=function(){throw new Error("process.binding is not supported");};t.cwd=function(){return"/"};t.chdir=function(){throw new Error("process.chdir is not supported");};t.umask=function(){return 0}},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});
/*!
	 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
	 * https://github.com/hMatoba/MinifyJpeg
	 */
var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r={encode:function(n){var s="",f=void 0,t=void 0,r=void 0,h=void 0,c=void 0,e=void 0,u=void 0,o=0;do f=n[o++],t=n[o++],r=n[o++],h=f>>2,c=(f&3)<<4|t>>4,e=(t&15)<<2|r>>6,u=r&63,isNaN(t)?e=u=64:isNaN(r)&&(u=64),s=s+i.charAt(h)+i.charAt(c)+i.charAt(e)+i.charAt(u),f=t=r="",h=c=e=u="";while(o<n.length);return s},decode:function(n){var o=void 0,s=void 0,h=void 0,c=void 0,u=void 0,t=void 0,f=void 0,r=0,e=[];if(/[^A-Za-z0-9\+\/\=]/g.exec(n))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c=i.indexOf(n.charAt(r++)),u=i.indexOf(n.charAt(r++)),t=i.indexOf(n.charAt(r++)),f=i.indexOf(n.charAt(r++)),o=c<<2|u>>4,s=(u&15)<<4|t>>2,h=(t&3)<<6|f,e.push(o),t!==64&&e.push(s),f!==64&&e.push(h),o=s=h="",c=u=t=f="";while(r<n.length);return e}};t.default=r},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var o;Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),h=e(s),c=i(41),u=e(c),l=i(109),f=e(l);o={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};
/*!
	    * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
	    * Licensed under MIT
	    */
var r="data:image/jpeg;base64,",a=new RegExp("^"+r,"i"),v=function(){function n(t){h.default(this,n);this._buf=t;this._stream=new f.default(this._buf);this._stream.setHead(0);this._segments=this._sliceIntoSegments(this._buf);this._exifBuffer=this._getExifBuffer();this._exifStream=new f.default(this._exifBuffer);this._parseExif()}return n.prototype.restoreExifTags=function(n){var e=n.replace(r,""),t=u.default.decode(e),o=this._sliceIntoSegments(t),f=o[1][0],s=t.slice(0,f),h=t.slice(f),i=s.concat(this._exifBuffer);return i=i.concat(h),r+u.default.encode(i)},n.prototype.setOrientation=function(n){if(this._tagData.Orientation){var t=this._tagData.Orientation.entryOffset;this._exifStream.setHead(t+8);this._exifStream.writeInt16(n)}},n.isJPEG=function(n){return a.test(n)},n.fromBase64String=function(t){var i=t.replace(r,""),f=u.default.decode(i);return new n(f)},n.prototype._parseExif=function(){var r,t,e,i;if(this._exifStream.setHead(0),this._exifStream.readInt16(),this._exifStream.readInt16(),r=this._exifStream.readString(4),r==="Exif"){this._exifStream.readInt16();var u=this._exifStream.getHead(),n=!1,f=this._exifStream.readInt16();if(f===18761)n=!1;else if(f===19789)n=!0;else throw new Error("Invalid TIFF data: No endian type found");if(this._exifStream.readInt16(!n)!==42)throw new Error("Invalid TIFF data: No 0x002A");if(t=this._exifStream.readInt32(!n),t<8)throw new Error("Invalid TIFF data: First IFD offset < 8");e=u+t;i=this._readTags(this._exifStream,u,e,n);this._tags=i.tags;this._tagData=i.tagData}},n.prototype._readTags=function(n,t,i,r){var c,e,u,a,v,y,k,d,p;n.setHead(i);var g=n.readInt16(!r),w={},b=[];for(c=0;c<g;c++){e=i+c*12+2;n.setHead(e);var h=n.readInt16(!r),l=void 0,f=void 0,s=void 0;if(o[h]){h=o[h];l=n.readInt16(!r);f=n.readInt32(!r);s=n.readInt32(!r)+t;u=null;switch(l){case 1:case 7:if(f===1)u=n.readInt8(!r);else for(u=[],a=0;a<f;a++)u.push(n.readInt8(!r));break;case 2:n.setHead(f>4?s:e+8);u=n.readString(f);break;case 3:if(n.setHead(f>2?s:e+8),f===1)u=n.readInt16(!r);else for(u=[],v=0;v<f;v++)u.push(n.readInt16(!r));break;case 4:case 9:if(n.setHead(f>1?s:e+8),f===1)u=n.readInt32(!r);else for(u=[],y=0;y<f;y++)u.push(n.readInt32(!r));break;case 5:case 10:if(n.setHead(s),f===1)k=n.readInt32(!r),d=n.readInt32(!r),u=k/d;else for(u=[],p=0;p<f;p++){var nt=n.readInt32(!r),tt=n.readInt32(!r),it=nt/tt;u.push(it)}}w[h]=u;b[h]={value:u,numValues:f,entryOffset:e,valueOffset:s,type:l}}}return{tags:w,tagData:b}},n.prototype._getExifBuffer=function(){for(var i,r,u,t=this._segments,n=0;n<t.length;n++)if(i=t[n][0],r=t[n][1],this._stream.setHead(i),u=this._stream.peekInt16(),u===65505)return this._buf.slice(i,r);return!1},n.prototype._sliceIntoSegments=function(n){for(var t=new f.default(n),u=[],i,e,r;t.getHead()<n.length;)if(i=t.readInt16(),i!==65496){if(i===65498)break;if(i>=65280&&i<=65535)e=t.readInt16(),r=t.getHead()+e-2,u.push([t.getHead()-4,r]),t.setHead(r);else throw new Error("Invalid marker: 0x"+i.toString(16));}return this._stream.setHead(0),u},n.prototype.getTags=function(){return this._tags},n.prototype.getTagData=function(){return this._tagData},n.prototype.dispose=function(){this._buf=[];this._exifBuffer=[];this._segments=[]},n}();t.default=v},function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=o(f),r=i(6);u=function(){function n(){e.default(this,n);this._position=new r.Vector2(0,0);this._scale=new r.Vector2(1,1);this._pivot=new r.Vector2(0,0);this._rotation=0;this._lastRotation=null;this._alpha=1;this._visible=!0;this._worldTransform=new r.Matrix;this._parent=null;this._shaders=[];this._boundsNeedUpdate=!0;this._bounds=new r.Rectangle(0,0,1,1);this._localBoundsNeedUpdate=!0;this._localBounds=new r.Rectangle(0,0,1,1);this._tint=16777215;this._filterRectangle=new r.Rectangle(0,0,0,0)}return n.prototype.renderWebGL=function(){r.Log.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")},n.prototype.renderCanvas=function(){r.Log.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")},n.prototype.updateTransform=function(){var t=this._parent?this._parent.getWorldTransform():r.Matrix.IDENTITY,n=this._worldTransform,i=this._rotation!==this._lastRotation;i&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation);n.a=this._cosRotation*this._scale.x;n.b=this._sinRotation*this._scale.x;n.c=-this._sinRotation*this._scale.y;n.d=this._cosRotation*this._scale.y;n.tx=this._position.x;n.ty=this._position.y;(this._pivot.x||this._pivot.y)&&(n.tx-=this._pivot.x*n.a+this._pivot.y*n.c,n.ty-=this._pivot.x*n.b+this._pivot.y*n.d);n.multiply(t);this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},n.prototype.addShader=function(n){this._shaders.push(n)},n.prototype.removeShader=function(n){var t=this._shaders.indexOf(n);return t!==-1?(this._shaders.splice(t,1),!0):!1},n.prototype.removeShaderAt=function(n){return this._shaders[n]?(this._shaders.splice(n,1),!0):!1},n.prototype.getBounds=function(){return this._bounds.clone()},n.prototype.getPosition=function(){return this._position},n.prototype.setPosition=function(n,t){n instanceof r.Vector2?this._position.copy(n):this._position.set(n,t);this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},n.prototype.getScale=function(){return this._scale},n.prototype.setScale=function(n,t){n instanceof r.Vector2?this._scale.copy(n):this._scale.set(n,t);this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},n.prototype.getPivot=function(){return this._pivot},n.prototype.setPivot=function(n,t){n instanceof r.Vector2?this._pivot.copy(n):this._pivot.set(n,t);this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},n.prototype.getRotation=function(){return this._rotation},n.prototype.setRotation=function(n){this._rotation=n;this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},n.prototype.getAlpha=function(){return this._alpha},n.prototype.setAlpha=function(n){this._alpha=n},n.prototype.getWorldAlpha=function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha},n.prototype.getWorldTransform=function(){return this._worldTransform},n.prototype.getParent=function(){return this._parent},n.prototype.setParent=function(n){this._parent=n},n.prototype.getFilterRectangle=function(){return this._filterRectangle},n.prototype.setFilterRectangle=function(n){this._filterRectangle.copy(n)},n.prototype.getTint=function(){return this._tint},n.prototype.setTint=function(n){this._tint=n},n.prototype.isVisible=function(){return this._visible},n.prototype.setVisible=function(n){this._visible=n},n}();t.default=u},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(6),s=i(32),h=r(s);u=function(){function n(t){e.default(this,n);this._renderer=t;this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}];this._currentFrame=null;this._textures=[];this._textureFrame=new o.Rectangle(0,0,t.getWidth(),t.getHeight())}return n.prototype.resizeTo=function(n){this._textureFrame.width=n.x;this._textureFrame.height=n.y;this._textures.forEach(function(t){return t.resizeTo(n)})},n.prototype.pushFilters=function(n,t){var r=n.getBounds(),i;this._currentFrame=r;i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i);this._filterStack.push({renderTarget:i,filters:t})},n.prototype.popFilters=function(){var i=this._filterStack.pop(),n=i.filters,u=i.renderTarget,f=this._filterStack[this._filterStack.length-1],t=u,r=f.renderTarget;return n.length===1?(n[0].apply(this._renderer,t,r),this._textures.push(t)):this._applyFilters(n,t,r),n},n.prototype._applyFilters=function(n,t,i){var f=this,r=t,u=this._getOrCreateRenderTarget(!0),e=n[n.length-1];n.forEach(function(n){var o=n===e,t;o?n.apply(f._renderer,r,i):(n.apply(f._renderer,r,u),t=r,r=u,u=t)});this._textures.push(r);this._textures.push(u)},n.prototype._getOrCreateRenderTarget=function(n){var t=this._textures.pop();return t||(t=new h.default(this._textureFrame.width,this._textureFrame.height,1)),n&&t.clear(),t},n.prototype.setFilterStack=function(n){this._filterStack=n},n.prototype.dispose=function(){},n}();t.default=u},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(6),s=i(33),h=r(s),c=i(105),l=r(c);u=function(){function n(t){e.default(this,n);this._renderer=t;this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}];this._currentFrame=null;this._textures=[];this._textureFrame=new o.Rectangle(0,0,t.getWidth(),t.getHeight());this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange);this._onContextChange()}return n.prototype.resizeTo=function(n){this._textureFrame.width=n.x;this._textureFrame.height=n.y;this._textures.forEach(function(t){return t.resizeTo(n)})},n.prototype.getFilterStack=function(){return this._filterStack},n.prototype.setFilterStack=function(n){this._filterStack=n},n.prototype._getOrCreateRenderTarget=function(n){var t=this._textures.pop();return t||(t=new h.default(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),t.setFrame(this._currentFrame),n&&t.clear(),t},n.prototype.pushFilters=function(n,t){var u=n.getBounds(),i,r;this._currentFrame=u;i=n.getFilterRectangle();i.width>0&&i.height>0&&(this._currentFrame=i);r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r);r.clear();this._filterStack.push({renderTarget:r,filters:t})},n.prototype.popFilters=function(){var u=this._filterStack.pop(),t=u.filters,e=u.renderTarget,o=this._filterStack[this._filterStack.length-1],i=e,f=o.renderTarget,r;this._quad.map(this._textureFrame,i.getFrame());var s=t[0].getShaderForRenderer(this._renderer),h=this._quad.getVertexBuffer(),c=this._quad.getIndexBuffer(),n=this._renderer.getContext();return n.bindBuffer(n.ARRAY_BUFFER,h),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,c),r=s.getAttributeLocations(),n.vertexAttribPointer(r.a_position,2,n.FLOAT,!1,0,0),n.vertexAttribPointer(r.a_texCoord,2,n.FLOAT,!1,0,32),n.vertexAttribPointer(r.a_color,4,n.FLOAT,!1,0,64),t.length===1?(t[0].apply(this._renderer,i,f),this._textures.push(i)):this._applyFilters(t,i,f),t},n.prototype._applyFilters=function(n,t,i){var f=this,r=t,u=this._getOrCreateRenderTarget(!0),e=n[n.length-1];n.forEach(function(n){var o=n===e,t;o?n.apply(f._renderer,r,i):(n.apply(f._renderer,r,u),t=r,r=u,u=t)});this._textures.push(r);this._textures.push(u)},n.prototype._onContextChange=function(){this._textures.length=0;this._renderer.isOfType("webgl")&&(this._quad=new l.default(this._renderer))},n.prototype.dispose=function(){this._renderer.off("context",this._onContextChange);this._quad&&this._quad.dispose()},n}();t.default=u},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var f,o;Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),h=e(s),c=i(6),u=e(c),r=i(9);f=u.default.Log;o=function(){function n(t,i,r,u,f){h.default(this,n);this._renderer=t;this._vertexSource=i;this._fragmentSource=r;this._uniforms=u||{};this._uniformLocations={};this._attributes=f||[];this._attributeLocations={};this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange);this._init()}return n.prototype._init=function(){this._compile();var n=this._renderer.getContext();n.useProgram(this._program);this._cacheUniformLocations();this._cacheAttributeLocations()},n.prototype._onContextChange=function(){this._init()},n.prototype.setupBuffers=function(n,t){var i=this._renderer.getContext();i.bindBuffer(i.ARRAY_BUFFER,n);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t);i.vertexAttribPointer(this._attributeLocations.a_position,2,i.FLOAT,!1,u.default.VERTEX_BYTE_SIZE,0);i.vertexAttribPointer(this._attributeLocations.a_texCoord,2,i.FLOAT,!1,u.default.VERTEX_BYTE_SIZE,8);i.vertexAttribPointer(this._attributeLocations.a_color,4,i.UNSIGNED_BYTE,!0,u.default.VERTEX_BYTE_SIZE,16)},n.prototype.syncUniforms=function(){var n=this;Object.keys(this._uniforms).forEach(function(t){n.syncUniform(t)})},n.prototype.syncUniform=function(n){var i=this._renderer.getContext(),t=this._uniforms[n],u=this._uniformLocations[n];switch(t.type){case r.UniformType.SAMPLER2D:case r.UniformType.INT:case r.UniformType.INT1:i.uniform1i(u,t.value);break;case r.UniformType.FLOAT:case r.UniformType.FLOAT1:i.uniform1f(u,t.value);break;case r.UniformType.FLOAT2:i.uniform2f(u,t.value[0],t.value[1]);break;case r.UniformType.FLOAT3:i.uniform3f(u,t.value[0],t.value[1],t.value[2]);break;case r.UniformType.FLOAT4:i.uniform4f(u,t.value[0],t.value[1],t.value[2],t.value[3]);break;case r.UniformType.FLOAT_VECTOR2:i.uniform2fv(u,t.value);break;case r.UniformType.MAT3:case r.UniformType.MAT3FV:i.uniformMatrix3fv(u,!1,t.value);break;case r.UniformType.MAT4:i.uniformMatrix4fv(u,!1,t.value);break;default:f.warn(this.constructor.name,"Unknown uniform type: "+t.type)}},n.prototype._cacheAttributeLocations=function(){var n=this,t=this._renderer.getContext();this._attributes.forEach(function(i){n._attributeLocations[i]=t.getAttribLocation(n._program,i)})},n.prototype._cacheUniformLocations=function(){var n=this,t=this._renderer.getContext(),i=Object.keys(this._uniforms);i.forEach(function(i){n._uniformLocations[i]=t.getUniformLocation(n._program,i)})},n.prototype._compile=function(){var n=this._renderer.getContext(),u=this._compileShader(n.VERTEX_SHADER,this._vertexSource),e=this._compileShader(n.FRAGMENT_SHADER,this._fragmentSource),t=n.createProgram(),r,i;n.attachShader(t,u);n.attachShader(t,e);n.linkProgram(t);r=n.getProgramParameter(t,n.LINK_STATUS);r||(i=n.getProgramInfoLog(t),n.isContextLost()&&(i="WebGL context lost"),n.deleteProgram(t),f.error(this.constructor.name,"WebGL program linking error: "+i));this._program=t},n.prototype._compileShader=function(n,t){var i=this._renderer.getContext(),r=i.createShader(n),e,u;return i.shaderSource(r,t),i.compileShader(r),e=i.getShaderParameter(r,i.COMPILE_STATUS),e||(u=i.getShaderInfoLog(r),i.isContextLost()&&(u="WebGL context lost"),i.deleteShader(r),f.error(this.constructor.name,"WebGL shader compilation error: "+u)),r},n.prototype.setUniform=function(n,t){var i=arguments.length<=2||arguments[2]===undefined?!1:arguments[2];this._uniforms[n].value=t;i&&this.syncUniform(n)},n.prototype.setUniforms=function(n){var i=arguments.length<=1||arguments[1]===undefined?!1:arguments[1];for(var t in n)this._uniforms[t].value=n[t],i&&this.syncUniform(t)},n.prototype.getUniforms=function(){return this._uniforms},n.prototype.getAttributes=function(){return this._attributes},n.prototype.getAttributeLocations=function(){return this._attributeLocations},n.prototype.getProgram=function(){return this._program},n.prototype.dispose=function(){var n=this._renderer.getContext();n.deleteProgram(this._program);this._uniforms=null;this._uniformLocations=null;this._attributes=null;this._attributeLocations=null;this._renderer.off("context",this._onContextChange)},n}();t.default=o},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var r,f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),a=i(6),v=i(46),y=u(v);r=function(n){function t(i,r,u){return o.default(this,t),r=r||t.defaultVertexSource,u=u||t.defaultFragmentSource,h.default(this,n.call(this,i,r,u,t.defaultUniforms,t.defaultAttributes))}return l.default(t,n),t}(y.default);r.defaultVertexSource=i(219);r.defaultFragmentSource=i(218);f=new a.Matrix;r.defaultUniforms={u_image:{type:"sampler2d",value:0},u_projMatrix:{type:"mat3",value:f.toArray()}};r.defaultAttributes=["a_position","a_texCoord","a_color"];t.default=r},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=f(e),s=i(2),h=f(s),c=i(1),l=f(c),r=i(6);u=function(n){function t(i){o.default(this,t);var u=h.default(this,n.call(this));return u._onSourceLoaded=u._onSourceLoaded.bind(u),u._glTextures={},u._source=i,u._glUnit=0,u._mipMapping=!1,u._magFilter=t.NearestFilter,u._minFilter=t.LinearFilter,u._pixelRatio=1,u._loaded=!1,u._frame=new r.Rectangle(0,0,100,100),i&&u._loadSource(),u}return l.default(t,n),t.prototype.resizeTo=function(n){this._frame.width=n.x;this._frame.height=n.y},t.prototype._loadSource=function(){var n=this._source,t=n.complete,i=n.constructor.name==="Canvas"||n.tagName&&n.tagName.toUpperCase()==="CANVAS";if(t||i)return this._onSourceLoaded();n.addEventListener("load",this._onSourceLoaded)},t.prototype._onSourceLoaded=function(){this._loaded=!0;this._updateGLFilters();this.emit("loaded");this.update()},t.prototype._updateGLFilters=function(){var n=new r.Vector2(this._source.width,this._source.height);r.Utils.isPowerOfTwo(n)&&(r.Log.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=t.BilinearFilter,this._mipMapping=!0)},t.prototype.update=function(){this._frame=new r.Rectangle(0,0,this._source.width,this._source.height);this.emit("update")},t.prototype.getGLFilter=function(n,i){var r=function(i){switch(i){case t.LinearFilter:return n.LINEAR;case t.NearestFilter:return n.NEAREST;case t.BilinearFilter:return n.LINEAR_MIPMAP_NEAREST;case t.TrilinearFilter:return n.LINEAR_MIPMAP_LINEAR}};switch(i){case"min":return r(this._minFilter);case"mag":return r(this._magFilter)}},t.prototype.isLoaded=function(){return this._loaded},t.prototype.setLoaded=function(n){this._loaded=n},t.prototype.getSource=function(){return this._source},t.prototype.setSource=function(n){this._source=n},t.prototype.getGLTextureForId=function(n){return this._glTextures[n]},t.prototype.setGLTextureForId=function(n,t){this._glTextures[t]=n},t.prototype.getFrame=function(){return this._frame},t.prototype.setFrame=function(n){this._frame=n},t.prototype.getDimensions=function(){return new r.Vector2(this._frame.width,this._frame.height)},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(n){this._pixelRatio=n},t.prototype.getGLUnit=function(){return this._glUnit},t.prototype.setGLUnit=function(n){this._glUnit=n},t.prototype.setMinFilter=function(n){this._minFilter=n},t.prototype.getMinFilter=function(){return this._minFilter},t.prototype.setMagFilter=function(n){this._magFilter=n},t.prototype.getMagFilter=function(){return this._magFilter},t.prototype.disposeGLTextures=function(n){if(n.isOfType("webgl")){var t=n.getContext();t.deleteTexture(this._glTextures[t.id]);delete this._glTextures[t.id]}},t.prototype.isMipMappingEnabled=function(){return this._mipMapping},t.prototype.dispose=function(n){this.disposeGLTextures(n)},t}(r.EventEmitter);u.NearestFilter=0;u.LinearFilter=1;u.BilinearFilter=2;u.TrilinearFilter=3;t.default=u},function(n){"use strict";
/*!
	StackBlur - a fast almost Gaussian Blur For Canvas
	Version:  0.5
	Author:   Mario Klingemann
	Contact:  mario@quasimondo.com
	Website:  http://www.quasimondo.com/StackBlurForCanvas
	Twitter:  @quasimondo
	In case you find this class useful - especially in commercial projects -
	I am not totally unhappy for a small donation to my PayPal account
	mario@quasimondo.de
	Or support me on flattr:
	https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript
	Copyright (c) 2010 Mario Klingemann
	Permission is hereby granted, free of charge, to any person
	obtaining a copy of this software and associated documentation
	files (the "Software"), to deal in the Software without
	restriction, including without limitation the rights to use,
	copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following
	conditions:
	The above copyright notice and this permission notice shall be
	included in all copies or substantial portions of the Software.
	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
	EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
	OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
	NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
	HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
	WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
	FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
	OTHER DEALINGS IN THE SOFTWARE.
	*/
function u(n,u,f,e,o,s){var y,b,ht,ct;if(!isNaN(s)&&!(s<1)){s|=0;for(var h=n.data,ut,bt,a,gt,v,ni,nt,tt,it,rt,lt,at,vt,yt,ft,et,ot,st,k,d,g,l,pt,ri=s+s+1,dt=e-1,ti=o-1,w=s+1,wt=w*(w+1)/2,kt=new t,ii,c=kt,p=1;p<ri;p++)c=c.next=new t,p==w&&(ii=c);for(c.next=kt,y=null,b=null,ni=v=0,ht=i[s],ct=r[s],bt=0;bt<o;bt++){for(ft=et=ot=st=nt=tt=it=rt=0,lt=w*(k=h[v]),at=w*(d=h[v+1]),vt=w*(g=h[v+2]),yt=w*(l=h[v+3]),nt+=wt*k,tt+=wt*d,it+=wt*g,rt+=wt*l,c=kt,p=0;p<w;p++)c.r=k,c.g=d,c.b=g,c.a=l,c=c.next;for(p=1;p<w;p++)a=v+((dt<p?dt:p)<<2),nt+=(c.r=k=h[a])*(pt=w-p),tt+=(c.g=d=h[a+1])*pt,it+=(c.b=g=h[a+2])*pt,rt+=(c.a=l=h[a+3])*pt,ft+=k,et+=d,ot+=g,st+=l,c=c.next;for(y=kt,b=ii,ut=0;ut<e;ut++)h[v+3]=l=rt*ht>>ct,l!==0?(l=255/l,h[v]=(nt*ht>>ct)*l,h[v+1]=(tt*ht>>ct)*l,h[v+2]=(it*ht>>ct)*l):h[v]=h[v+1]=h[v+2]=0,nt-=lt,tt-=at,it-=vt,rt-=yt,lt-=y.r,at-=y.g,vt-=y.b,yt-=y.a,a=ni+((a=ut+s+1)<dt?a:dt)<<2,ft+=y.r=h[a],et+=y.g=h[a+1],ot+=y.b=h[a+2],st+=y.a=h[a+3],nt+=ft,tt+=et,it+=ot,rt+=st,y=y.next,lt+=k=b.r,at+=d=b.g,vt+=g=b.b,yt+=l=b.a,ft-=k,et-=d,ot-=g,st-=l,b=b.next,v+=4;ni+=e}for(ut=0;ut<e;ut++){for(et=ot=st=ft=tt=it=rt=nt=0,v=ut<<2,lt=w*(k=h[v]),at=w*(d=h[v+1]),vt=w*(g=h[v+2]),yt=w*(l=h[v+3]),nt+=wt*k,tt+=wt*d,it+=wt*g,rt+=wt*l,c=kt,p=0;p<w;p++)c.r=k,c.g=d,c.b=g,c.a=l,c=c.next;for(gt=e,p=1;p<=s;p++)v=gt+ut<<2,nt+=(c.r=k=h[v])*(pt=w-p),tt+=(c.g=d=h[v+1])*pt,it+=(c.b=g=h[v+2])*pt,rt+=(c.a=l=h[v+3])*pt,ft+=k,et+=d,ot+=g,st+=l,c=c.next,p<ti&&(gt+=e);for(v=ut,y=kt,b=ii,bt=0;bt<o;bt++)a=v<<2,h[a+3]=l=rt*ht>>ct,l>0?(l=255/l,h[a]=(nt*ht>>ct)*l,h[a+1]=(tt*ht>>ct)*l,h[a+2]=(it*ht>>ct)*l):h[a]=h[a+1]=h[a+2]=0,nt-=lt,tt-=at,it-=vt,rt-=yt,lt-=y.r,at-=y.g,vt-=y.b,yt-=y.a,a=ut+((a=bt+w)<ti?a:ti)*e<<2,nt+=ft+=y.r=h[a],tt+=et+=y.g=h[a+1],it+=ot+=y.b=h[a+2],rt+=st+=y.a=h[a+3],y=y.next,lt+=k=b.r,at+=d=b.g,vt+=g=b.b,yt+=l=b.a,ft-=k,et-=d,ot-=g,st-=l,b=b.next,v+=e}}}function t(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];n.exports={stackBlurCanvasRGBA:u}},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}t.__esModule=!0;var r=i(82),u=f(r);t.default=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u.default(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}()},function(n){n.exports=function(n){if(n==undefined)throw TypeError("Can't call method on  "+n);return n}},function(n){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(n){n.exports={}},function(n){n.exports=!0},function(n,t,i){var o=i(28),s=i(200),e=i(52),h=i(58)("IE_PROTO"),u=function(){},f="prototype",r=function(){var t=i(86)("iframe"),u=e.length,n;for(t.style.display="none",i(193).appendChild(t),t.src="javascript:",n=t.contentWindow.document,n.open(),n.write("<script>document.F=Object<\/script>"),n.close(),r=n.F;u--;)delete r[f][e[u]];return r()};n.exports=Object.create||function(n,t){var i;return n!==null?(u[f]=o(n),i=new u,u[f]=null,i[h]=n):i=r(),t===undefined?i:s(i,t)}},function(n,t){t.f={}.propertyIsEnumerable},function(n,t,i){var u=i(17).f,f=i(16),r=i(23)("toStringTag");n.exports=function(n,t,i){n&&!f(n=i?n:n.prototype,r)&&u(n,r,{configurable:!0,value:t})}},function(n,t,i){var r=i(59)("keys"),u=i(39);n.exports=function(n){return r[n]||(r[n]=u(n))}},function(n,t,i){var r=i(13),u="__core-js_shared__",f=r[u]||(r[u]={});n.exports=function(n){return f[n]||(f[n]={})}},function(n){var t=Math.ceil,i=Math.floor;n.exports=function(n){return isNaN(n=+n)?0:(n>0?i:t)(n)}},function(n,t,i){var r=i(30);n.exports=function(n,t){if(!r(n))return n;var i,u;if(t&&typeof(i=n.toString)=="function"&&!r(u=i.call(n))||typeof(i=n.valueOf)=="function"&&!r(u=i.call(n))||!t&&typeof(i=n.toString)=="function"&&!r(u=i.call(n)))return u;throw TypeError("Can't convert object to primitive value");}},function(n,t,i){var u=i(13),r=i(21),f=i(54),e=i(63),o=i(17).f;n.exports=function(n){var t=r.Symbol||(r.Symbol=f?{}:u.Symbol||{});n.charAt(0)=="_"||n in t||o(t,n,{value:e.f(n)})}},function(n,t,i){t.f=i(23)},function(n,t,i){(function(n,r){function u(n,t){this._id=n;this._clearFn=t}var o=i(40).nextTick,e=Function.prototype.apply,s=Array.prototype.slice,f={},h=0;t.setTimeout=function(){return new u(e.call(setTimeout,window,arguments),clearTimeout)};t.setInterval=function(){return new u(e.call(setInterval,window,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(n){n.close()};u.prototype.unref=u.prototype.ref=function(){};u.prototype.close=function(){this._clearFn.call(window,this._id)};t.enroll=function(n,t){clearTimeout(n._idleTimeoutId);n._idleTimeout=t};t.unenroll=function(n){clearTimeout(n._idleTimeoutId);n._idleTimeout=-1};t._unrefActive=t.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;t>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},t))};t.setImmediate=typeof n=="function"?n:function(n){var i=h++,r=arguments.length<2?!1:s.call(arguments,1);return f[i]=!0,o(function(){f[i]&&(r?n.apply(null,r):n.call(null),t.clearImmediate(i))}),i};t.clearImmediate=typeof r=="function"?r:function(n){delete f[n]}}).call(t,i(64).setImmediate,i(64).clearImmediate)},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});t.ColorMatrix=t.Matrix=t.Rectangle=t.Vector2=undefined;var u=i(19),f=r(u),e=i(77),o=r(e),s=i(76),h=r(s),c=i(34),l=r(c);t.Vector2=f.default;t.Rectangle=o.default;t.Matrix=h.default;t.ColorMatrix=l.default},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=r(o),h=i(2),c=r(h),l=i(1),a=r(l),u=i(3),v=i(7),f=r(v),y=i(24),p=r(y);e=function(n){function t(){var r=arguments.length<=0||arguments[0]===undefined?[]:arguments[0],i;return s.default(this,t),i=c.default(this,n.call(this)),i._onOperationUpdate=i._onOperationUpdate.bind(i),i._stack=r,i._stack.forEach(function(n){n.on("update",i._onOperationUpdate)}),i}return a.default(t,n),t.prototype.clear=function(){var n=this;this.forEach(function(t){return n.remove(t)});this._stack=[]},t.prototype._onOperationUpdate=function(n,t){this.emit(u.Constants.Events.OPERATION_UPDATED,n,t)},t.prototype.forEach=function(n){return this._stack.filter(function(n){return!!n}).forEach(n)},t.prototype.render=function(n,t){var a=t,i=this._stack.filter(function(n){return!!n}),c,h,r,e,o,l,s;for(i.reverse(),c=i.filter(function(t){return!t.isDirtyForRenderer(n.getRenderer())})[0],h=i.indexOf(c),i.reverse(),r=0,h!==-1&&(r=i.length-h-1),e=0;e<r;e++)u.Log.info(this.constructor.name,"Skipping "+i[e].constructor.name);for(o=f.default.resolve(a),l=function(n){var t=i[n];o=o.then(function(n){return t.render(n)})},s=r;s<i.length;s++)l(s);return o},t.prototype.validateSettings=function(){return f.default.all(this._stack.filter(function(n){return!!n}).map(function(n){return n.validateSettings()}))},t.prototype.setAllToDirty=function(){this.forEach(function(n){return n.setDirty(!0)})},t.prototype.updateDirtinessForRenderer=function(n){for(var t,r=!1,i=0;i<this._stack.length;i++)(t=this._stack[i],t)&&(t.isDirtyForRenderer(n)&&(r=!0),r&&t.setDirtyForRenderer(!0,n))},t.prototype.push=function(n){this._stack.push(n);n.on("update",this._onOperationUpdate)},t.prototype.clone=function(){return new t(this._stack.slice(0))},t.prototype.get=function(n){return this._stack[n]},t.prototype.set=function(n,t){this._stack[n]&&(this._stack[n].off("update",this._onOperationUpdate),this._stack[n].dispose());this._stack[n]=t;t.on("update",this._onOperationUpdate)},t.prototype.remove=function(n){var t=this._stack.indexOf(n);t!==-1&&(this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1))},t.prototype.removeAt=function(n){this._stack[n]&&(this._stack[n].off("update",this._onOperationUpdate),this._stack[n].dispose());this._stack[n]=undefined},t.prototype.getStack=function(){return this._stack},t}(p.default);t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s,h,c,l,a,v;Object.defineProperty(t,"__esModule",{value:!0});u=i(120);Object.defineProperty(t,"FilterOperation",{enumerable:!0,get:function(){return r(u).default}});f=i(118);Object.defineProperty(t,"CropOperation",{enumerable:!0,get:function(){return r(f).default}});e=i(168);Object.defineProperty(t,"OrientationOperation",{enumerable:!0,get:function(){return r(e).default}});o=i(115);Object.defineProperty(t,"AdjustmentsOperation",{enumerable:!0,get:function(){return r(o).default}});s=i(167);Object.defineProperty(t,"LinearFocusOperation",{enumerable:!0,get:function(){return r(s).default}});h=i(169);Object.defineProperty(t,"RadialFocusOperation",{enumerable:!0,get:function(){return r(h).default}});c=i(117);Object.defineProperty(t,"BorderOperation",{enumerable:!0,get:function(){return r(c).default}});l=i(170);Object.defineProperty(t,"SpriteOperation",{enumerable:!0,get:function(){return r(l).default}});a=i(178);Object.defineProperty(t,"WatermarkOperation",{enumerable:!0,get:function(){return r(a).default}});v=i(119);Object.defineProperty(t,"ExifOrientationOperation",{enumerable:!0,get:function(){return r(v).default}})},function(n){n.exports={name:"photoeditorsdk",version:"3.4.0-rc",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/imgly-sdk-html5",author:"Photo Editor SDK <contact@photoeditorsdk.com>",license:"SEE LICENSE IN LICENSE.md",scripts:{release:"node scripts/release","render-filter-previews":"babel-node scripts/render-filter-previews","release:dry":"ENV=production UPLOAD=false node_modules/.bin/gulp release",test:"node_modules/.bin/mocha test/sdk test/ui","test:client":"ENV=test REMOTE=true gulp test:client:remote","test:client:local":"ENV=test gulp test:client:local","test:webgl":"node_modules/.bin/mocha test-webgl",coveralls:"npm run coverage && cat ./coverage/lcov.info | node_modules/.bin/coveralls && rm -rf ./coverage",coverage:"NODE_ENV=test node_modules/.bin/istanbul cover node_modules/.bin/_mocha -x **/ui/**"},devDependencies:{"babel-core":"^6.6.4","babel-loader":"^6.2.4","babel-plugin-external-helpers-2":"^6.3.13","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-runtime":"^6.6.0","babel-preset-es2015":"^6.6.0","babel-preset-react":"^6.5.0","babel-register":"^6.6.0","babel-runtime":"^6.6.1","blink-diff":"^1.0.12",canvas:"^1.3.12",chai:"^3.4.0","chai-as-promised":"^5.1.0",classnames:"^2.1.3","compass-mixins":"^0.12.8",coveralls:"^2.11.2",del:"^2.0.0",gl:"^3.0.3",gulp:"^3.8.10","gulp-9e-sass-lint":"0.0.8","gulp-changed":"^1.3.0","gulp-github-release":"^1.1.2","gulp-jsdoc3":"^0.2.0","gulp-notify":"^1.3.1","gulp-rename":"~1.2.0","gulp-sass":"^2.0.4","gulp-sequence":"^0.4.1","gulp-sourcemaps":"^1.5.2","gulp-standard":"^6.0.5","gulp-uglify":"^1.4.2","gulp-util":"~2.2.16","gulp-watch":"^4.3.5","gulp-webserver":"^0.9.1","gulp-yuicompressor":"0.0.3","gulp-zip":"^3.2.0",istanbul:"^1.0.0-alpha.2","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"git://github.com/jsdoc3/jsdoc.git#master","json-loader":"^0.5.2",mocha:"^2.3.3","mocha-lcov-reporter":"0.0.1",nightwatch:"git://github.com/saschagehlich/nightwatch.git#bugfix/exception-swallow","performance-now":"^0.2.0",prompt:"^1.0.0","raw-loader":"^0.5.1",react:"^15.1.0","react-dom":"^15.1.0","require-dir":"^0.3.0","run-sequence":"~0.3.6",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.8.0","transform-loader":"^0.2.2","vinyl-source-stream":"0.1.1",webpack:"^2.1.0-beta.6","webpack-notifier":"^1.2.1","webpack-stream":"git://github.com/saschagehlich/webpack-stream.git#webpack-beta"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"]}}},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(6),a=i(43),v=r(a);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._children=[],r._filters=[],r}return c.default(t,n),t.prototype.addFilter=function(n){this._filters.push(n)},t.prototype.removeFilter=function(n){var t=this._filters.indexOf(n);return t!==-1?(this._filters.splice(t,1),!0):!1},t.prototype.setFilters=function(n){this._filters=n},t.prototype.addChild=function(n){var t=n.getParent();t!==null&&t.removeChild(n);n.setParent(this);this._children.push(n)},t.prototype.prependChild=function(n){var t=n.getParent();t!==null&&t.removeChild(n);n.setParent(this);this._children.unshift(n)},t.prototype.hasChild=function(n){var t=this._children.indexOf(n);return t!==-1},t.prototype.removeChild=function(n){var t=this._children.indexOf(n);t!==-1?(this._children.splice(t,1),n.setParent(null)):l.Log.info(this.constructor.name,"Tried to remove a child that does not exist")},t.prototype.clearChildren=function(){this._children=[]},t.prototype.renderWebGL=function(n){if(this._visible){var t=n.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters);n.getCurrentObjectRenderer().start();this._renderWebGL(n);this._children.forEach(function(t){t.renderWebGL(n)});n.getCurrentObjectRenderer().flush();this._filters&&this._filters.length&&t.popFilters();n.getCurrentObjectRenderer().start()}},t.prototype._renderWebGL=function(){},t.prototype.renderCanvas=function(n){if(this._visible){var t=n.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters);this._renderCanvas(n);this._children.forEach(function(t){t.renderCanvas(n)});this._filters&&this._filters.length&&t.popFilters()}},t.prototype._renderCanvas=function(){},t.prototype.updateTransform=function(){n.prototype.updateTransform.call(this);this._children.forEach(function(n){n.updateTransform()})},t.prototype.getLocalBounds=function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()},t.prototype.getBounds=function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()},t.prototype.getChildren=function(){return this._children},t.prototype.getFilters=function(){return this._filters},t.prototype.dispose=function(){},t}(v.default);t.default=u},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),r=i(6),a=i(107),v=u(a);f=function(n){function t(i,u){var e=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],f;return o.default(this,t),f=h.default(this,n.call(this)),f._options=v.default.defaults(e,{pixelRatio:1,transparent:!1,clearColor:r.Color.BLACK,debug:!1}),f.setMaxListeners(0),f._width=i||800,f._height=u||600,f._dimensions=new r.Vector2(f._width,f._height),f._maxTextureSize=null,f._pixelRatio=f._options.pixelRatio,f._clearColor=f._options.transparent?r.Color.TRANSPARENT:f._options.clearColor||r.Color.BLACK,f}return l.default(t,n),t.prototype.setCanvas=function(n){this._canvas=n;this._createContext();this._onBeforeContext();this._setupContext();this.resizeTo(new r.Vector2(this._width,this._height))},t.prototype.getCanvas=function(){return this._canvas},t.prototype._onBeforeContext=function(){},t.prototype.resizeTo=function(n){this._width=n.x*this._pixelRatio;this._height=n.y*this._pixelRatio;this._canvas.width=this._width;this._canvas.height=this._height;this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px");this._dimensions=n.clone()},t.prototype._createContext=function(){r.Log.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")},t.prototype._setupContext=function(){r.Log.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")},t.prototype.render=function(){r.Log.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")},t.prototype.getMaxDimensions=function(){return null},t.prototype.getContext=function(){return this._context},t.prototype.getWidth=function(){return this._dimensions.x},t.prototype.getHeight=function(){return this._dimensions.y},t.prototype.getDimensions=function(){return this._dimensions},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(n){this._pixelRatio=n;this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(n)},t.prototype.getMaxTextureSize=function(){return this._maxTextureSize},t.prototype.getFilterManager=function(){return this._filterManager},t.prototype.setFilterManager=function(n){this._filterManager=n},t.isSupported=function(){return!0},t.prototype.isOfType=function(n){return this._type===n},t.prototype.dispose=function(){r.Log.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")},t}(r.EventEmitter);t.default=f},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=e(r);f=function(){function n(t){u.default(this,n);this._renderer=t;this._onContextChange=this._onContextChange.bind(this);this._renderer.on("context",this._onContextChange)}return n.prototype._onContextChange=function(){},n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.flush=function(){},n.prototype.dispose=function(){this._renderer.off("context",this._onContextChange);this._renderer=null},n}();t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=r(o),h=i(2),c=r(h),l=i(1),a=r(l),u=i(6),v=i(48),f=r(v),y=i(106),p=r(y);e=function(n){function t(i,r){var e;if(s.default(this,t),e=c.default(this,n.call(this)),!(i instanceof f.default))throw new Error("`baseTexture` should be an instance of BaseTexture");if(e._baseTexture=i,e._uvs=new p.default,e._frame=r?r.clone():null,e._frameLocked=!!r,e._onBaseTextureLoaded=e._onBaseTextureLoaded.bind(e),e._onBaseTextureUpdated=e._onBaseTextureUpdated.bind(e),e._frame||(e._frame=new u.Rectangle(0,0,1,1)),e._baseTexture.isLoaded()){var o=i.getFrame(),h=o.width,l=o.height;e._frameLocked||(e._frame=new u.Rectangle(0,0,h,l));e._onBaseTextureLoaded()}else e._baseTexture.once("loaded",e._onBaseTextureLoaded);return e}return a.default(t,n),t.fromImage=function(n){var i=new f.default(n);return new t(i)},t.fromCanvas=function(n){var i=new f.default(n);return new t(i)},t.prototype._onBaseTextureLoaded=function(){if(!this._frameLocked){var n=this._baseTexture.getFrame().clone();this.setFrame(n)}this._baseTexture.on("update",this._onBaseTextureUpdated)},t.prototype._onBaseTextureUpdated=function(){var n=this._baseTexture.getFrame(),t=n.width,i=n.height;this._frame.width=t;this._frame.height=i;this.emit("update")},t.prototype._updateUVs=function(){this._uvs.update(this._frame,this._baseTexture.getFrame())},t.prototype.getBaseTexture=function(){return this._baseTexture},t.prototype.setBaseTexture=function(n){this._baseTexture=n},t.prototype.getFrame=function(){return this._frame},t.prototype.setFrame=function(n){this._frame=n;this._updateUVs()},t.prototype.getWidth=function(){return this._frame.width},t.prototype.getHeight=function(){return this._frame.height},t.prototype.getUVs=function(){return this._uvs},t.prototype.getDimensions=function(){return new u.Vector2(this._frame.width,this._frame.height)},t}(u.EventEmitter);t.default=e},function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}var u,f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=s(e),r=i(6);u=typeof window!="undefined"&&window.performance?window.performance.now.bind(window.performance):i(94);f=function(){function n(t){var e=this,i,r,f;o.default(this,n);this._context=t;this._tracking=!1;i=this;r=function(n){var r=t[n];typeof r=="function"&&(r=function(){for(var e,o=arguments.length,r=Array(o),f=0;f<o;f++)r[f]=arguments[f];if(e=t[n],!i._tracking)return e.apply(t,r);var s=u(),h=e.apply(t,r),c=u()-s,l={functionName:n,arguments:r,duration:c};return i._trackedCalls.push(l),h});e[n]=r};for(f in t)r(f)}return n.prototype.startFrame=function(){this._tracking=!0;this._trackedCalls=[]},n.prototype.endFrame=function(){var u="Rendering",n,t,f,i;r.Log.log(u,"Frame rendering results:");r.Log.log(u,"Context calls: "+this._trackedCalls.length);n={};this._trackedCalls.forEach(function(t){var i=t.functionName,r=t.duration;n[i]=n[i]||{totalDuration:0,calls:0};n[i].totalDuration+=r;n[i].calls++});t=[];for(f in n)i=n[f],i.averageDuration=i.totalDuration/i.calls,t.push({functionName:f,data:i});t.sort(function(n,t){return t.data.totalDuration-n.data.totalDuration});t=t.slice(0,3);t.forEach(function(n){r.Log.log(u,n.functionName+": "+n.data.calls+" calls, "+n.data.totalDuration.toFixed(2)+"ms")})},n}();t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(14),s=r(o);u=function(){function n(t,i,r){e.default(this,n);this.width=t;this.height=i;this.data=r}return n.fromNodeCanvasImage=function(t){var u=new s.default(t.width,t.height),i=u.getContext("2d"),r;return i.drawImage(t,0,0),r=i.getImageData(0,0,t.width,t.height),new n(t.width,t.height,r.data)},n}();t.default=u},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var f=i(83),r=u(f),e=i(20),o=u(e);t.default={checkFramebufferStatus:function(n,t){var i,u=t.checkFramebufferStatus(t.FRAMEBUFFER),f=(i={},r.default(i,t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),r.default(i,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),r.default(i,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),r.default(i,t.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),i);u!==t.FRAMEBUFFER_COMPLETE&&o.default.warn(n,"Framebuffer incomplete: "+f[u])}}},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(50),h=u(s),c=i(19),r=u(c);f=function(){function n(){o.default(this,n);this.reset()}return n.prototype.multiply=function(n){var t=void 0,i=void 0,r=void 0,u=void 0,f=void 0,e=void 0;return t=this.a*n.a+this.b*n.c,i=this.a*n.b+this.b*n.d,r=this.c*n.a+this.d*n.c,u=this.c*n.b+this.d*n.d,f=this.tx*n.a+this.ty*n.c+n.tx,e=this.tx*n.b+this.ty*n.d+n.ty,this.a=t,this.b=i,this.c=r,this.d=u,this.tx=f,this.ty=e,this},n.prototype.applyToVector=function(n){var t=n,i=t.x,r=t.y;return n=n.clone(),n.x=this.a*i+this.c*r+this.tx,n.y=this.b*i+this.d*r+this.tx,n},n.prototype.applyInverseToVector=function(n){var t=1/(this.a*this.d+this.c*-this.b),i=n,r=i.x,u=i.y;return n=n.clone(),n.x=this.d*t*r+-this.c*t*u+(this.ty*this.c-this.tx*this.d)*t,n.y=this.a*t*u+-this.b*t*r+(-this.ty*this.a+this.tx*this.b)*t,n},n.prototype.rectangleToCoordinates=function(n){var i=arguments.length<=1||arguments[1]===undefined?new r.default(0,0):arguments[1],u=n.width*(1-i.x),f=n.width*-i.x,e=n.height*(1-i.y),o=n.height*-i.y,t=[];return t.push(new r.default(this.a*f+this.c*o+this.tx,this.d*o+this.b*f+this.ty)),t.push(new r.default(this.a*u+this.c*o+this.tx,this.d*o+this.b*u+this.ty)),t.push(new r.default(this.a*u+this.c*e+this.tx,this.d*e+this.b*u+this.ty)),t.push(new r.default(this.a*f+this.c*e+this.tx,this.d*e+this.b*f+this.ty)),t},n.prototype.reset=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0},n.prototype.toArray=function(){var n=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return typeof Float32Array=="undefined"?n:new Float32Array(n)},h.default(n,null,[{key:"IDENTITY",get:function(){return new n}}]),n}();t.default=f},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=e(r);f=function(){function n(){var t=arguments.length<=0||arguments[0]===undefined?0:arguments[0],i=arguments.length<=1||arguments[1]===undefined?0:arguments[1],r=arguments.length<=2||arguments[2]===undefined?0:arguments[2],f=arguments.length<=3||arguments[3]===undefined?0:arguments[3];u.default(this,n);this.x=t;this.y=i;this.width=r;this.height=f}return n.prototype.set=function(n,t,i,r){return this.x=n,this.y=t,this.width=i,this.height=r,this},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this.width=n.width,this.height=n.height,this},n.prototype.equals=function(t,i,r,u){if(t instanceof n)return t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height;var f=t;return f===this.x&&i===this.y&&r===this.width&&u===this.height},n.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this},n.prototype.toString=function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"},n}();t.default=f},function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}var r,u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=s(f),o=i(3);r=typeof window!="undefined"&&window.performance?window.performance.now.bind(window.performance):i(94);u=function(){function n(t,i){e.default(this,n);this._tag=t;this._name=i;this._start=r()}return n.prototype.stop=function(){var t=r(),n=t-this._start,i=Math.round(1e3/n);o.Log.info(this._tag,this._name+" took "+n.toFixed(2)+"ms ("+i+" FPS)")},n}();t.default=u},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(3);u=function(n){function t(){e.default(this,t);var r=s.default(this,n.call(this));return r._fragmentSource=i(222),r}return c.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var ht=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],y=t.getCanvas(),ut=t.getContext(),ft=i.getContext(),o=ut.getImageData(0,0,y.width,y.height),h=this._options,c=h.brightness,s=h.saturation,p=h.contrast,rt=h.exposure,d=h.shadows,g=h.highlights,et=c!==0,ot=s!==1,st=p!==1,nt=rt!==0,tt=d!==0||g!==1,it=Math.pow(2,rt),e,a,v,b,k,c=c*255,w=0;w<y.width*y.height;w++){var l=w*4,r=o.data[l],u=o.data[l+1],f=o.data[l+2];(nt||tt)&&(r/=255,u/=255,f/=255);nt&&(r*=it,u*=it,f*=it);tt&&(e=r*.2125+u*.7154+f*.0721,a=Math.pow(e,1/(d+1))+-.76*Math.pow(e,2/(d+1))-e,a=Math.max(a,0),a=Math.min(a,1),v=1-(Math.pow(1-e,1/(2-g))+-.8*Math.pow(1-e,2/(2-g)))-e,v=Math.max(v,-1),v=Math.min(v,0),b=e+a+v,r=b*r/e,u=b*u/e,f=b*f/e);(nt||tt)&&(r*=255,u*=255,f*=255);et&&(r=r+c,u=u+c,f=f+c);ot&&(k=r*.2125+u*.7154+f*.0721,r=k*(1-s)+r*s,u=k*(1-s)+u*s,f=k*(1-s)+f*s);st&&(r=(r-127)*p+127,u=(u-127)*p+127,f=(f-127)*p+127);o.data[l]=r;o.data[l+1]=u;o.data[l+2]=f}ft.putImageData(o,0,0)},t}(l.Engine.Filter);u.prototype.availableOptions={brightness:{type:"number","default":0,uniformType:"f"},saturation:{type:"number","default":1,uniformType:"f"},contrast:{type:"number","default":1,uniformType:"f"},exposure:{type:"number","default":0,uniformType:"f"},shadows:{type:"number","default":0,uniformType:"f"},highlights:{type:"number","default":1,uniformType:"f"}};t.default=u},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var r;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=u(f),o=i(2),s=u(o),h=i(1),c=u(h),l=i(3),a=i(4),v=u(a);r=function(n){function t(){return e.default(this,t),s.default(this,n.apply(this,arguments))}return c.default(t,n),t.prototype.render=function(){return l.Promise.resolve()},t}(v.default);r.isIdentity=!0;r.displayName="Original";r.identifier="identity";t.default=r},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e,o,l;Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=r(a),v=i(2),h=r(v),y=i(1),c=r(y),p=i(12),u=r(p),w=i(8),b=r(w),f=i(9);e=3;o=function(n){function t(){s.default(this,t);var r=h.default(this,n.call(this));return r._fragmentSource=i(235),r}return c.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var u,s,h,c,v=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=t.getCanvas(),l=t.getContext(),a=i.getContext(),r=l.getImageData(0,0,f.width,f.height),e=this._options.lookupTableData,o=0;o<f.width*f.height;o++)u=o*4,s=r.data[u],r.data[u]=e[s*4],h=r.data[u+1],r.data[u+1]=e[1+h*4],c=r.data[u+2],r.data[u+2]=e[2+c*4];a.putImageData(r,0,0)},t}(u.default.Filter);o.prototype.availableOptions={lookupTable:{type:f.OptionType.NUMBER,"default":e,uniformType:f.UniformType.INT},lookupTableData:{type:f.OptionType.ARRAY,"default":[]}};l=function(n){function t(){var r;s.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(f))),r._filter=new o,r._textures=[],r}return c.default(t,n),t.prototype.update=function(n){var t=n.getRenderer();t.isOfType("webgl")?this._updateWebGLTexture(n):t.isOfType("canvas")&&this._filter.setLookupTableData(this._options.data)},t.prototype._updateWebGLTexture=function(n){var t,f;if(typeof this._options.data=="undefined")throw new Error("LookupTable: No data specified.");var o=new Uint8Array(this._options.data),i=n.getRenderer(),r=i.id;this._textures[r]||(this._textures[r]=new u.default.BaseTexture);t=this._textures[r];f=new u.default.PixelArrayImage(256,1,o);t.setSource(f);t.setGLUnit(e);i.isOfType("webgl")&&i.updateTexture(t)},t.prototype.dispose=function(){n.prototype.dispose.call(this);for(var t in this._textures)delete this._textures[t];delete this._options.data},t}(b.default);t.default=l},function(n,t,i){n.exports={"default":i(185),__esModule:!0}},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}t.__esModule=!0;var r=i(82),u=f(r);t.default=function(n,t,i){return t in n?u.default(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}},function(n){var t={}.toString;n.exports=function(n){return t.call(n).slice(8,-1)}},function(n,t,i){var r=i(189);n.exports=function(n,t,i){if(r(n),t===undefined)return n;switch(i){case 1:return function(i){return n.call(t,i)};case 2:return function(i,r){return n.call(t,i,r)};case 3:return function(i,r,u){return n.call(t,i,r,u)}}return function(){return n.apply(t,arguments)}}},function(n,t,i){var u=i(30),r=i(13).document,f=u(r)&&u(r.createElement);n.exports=function(n){return f?r.createElement(n):{}}},function(n,t,i){n.exports=!i(15)&&!i(36)(function(){return Object.defineProperty(i(86)("div"),"a",{get:function(){return 7}}).a!=7})},function(n,t,i){"use strict";var o=i(54),f=i(29),a=i(93),s=i(22),v=i(16),h=i(53),y=i(196),p=i(57),w=i(202),r=i(23)("iterator"),e=!([].keys&&"next"in[].keys()),b="@@iterator",c="keys",u="values",l=function(){return this};n.exports=function(n,t,i,k,d,g,nt){y(i,t,k);var et=function(n){if(!e&&n in tt)return tt[n];switch(n){case c:return function(){return new i(this,n)};case u:return function(){return new i(this,n)}}return function(){return new i(this,n)}},ct=t+" Iterator",st=d==u,ht=!1,tt=n.prototype,it=tt[r]||tt[b]||d&&tt[d],rt=it||et(d),at=d?st?et("entries"):rt:undefined,lt=t=="Array"?tt.entries||it:it,ut,ot,ft;if(lt&&(ft=w(lt.call(new n)),ft!==Object.prototype&&(p(ft,ct,!0),o||v(ft,r)||s(ft,r,l))),st&&it&&it.name!==u&&(ht=!0,rt=function(){return it.call(this)}),(!o||nt)&&(e||ht||!tt[r])&&s(tt,r,rt),h[t]=rt,h[ct]=l,d)if(ut={values:st?rt:et(u),keys:g?rt:et(c),entries:at},nt)for(ot in ut)ot in tt||a(tt,ot,ut[ot]);else f(f.P+f.F*(e||ht),t,ut);return ut}},function(n,t,i){var u=i(56),f=i(38),e=i(18),o=i(61),s=i(16),h=i(87),r=Object.getOwnPropertyDescriptor;t.f=i(15)?r:function(n,t){if(n=e(n),t=o(t,!0),h)try{return r(n,t)}catch(i){}if(s(n,t))return f(!u.f.call(n,t),n[t])}},function(n,t,i){var r=i(92),u=i(52).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(n){return r(n,u)}},function(n,t){t.f=Object.getOwnPropertySymbols},function(n,t,i){var r=i(16),u=i(18),f=i(191)(!1),e=i(58)("IE_PROTO");n.exports=function(n,t){var s=u(n),h=0,o=[];for(var i in s)i!=e&&r(s,i)&&o.push(i);while(t.length>h)r(s,i=t[h++])&&(~f(o,i)||o.push(i));return o}},function(n,t,i){n.exports=i(22)},function(n,t,i){(function(t){(function(){var r,u,i;typeof performance!="undefined"&&performance!==null&&performance.now?n.exports=function(){return performance.now()}:typeof t!="undefined"&&t!==null&&t.hrtime?(n.exports=function(){return(r()-i)/1e6},u=t.hrtime,r=function(){var n;return n=u(),n[0]*1e9+n[1]},i=r()):Date.now?(n.exports=function(){return Date.now()-i},i=Date.now()):(n.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(t,i(40))},function(n){var t=function(){return this}();try{t=t||Function("return this")()||eval("this")}catch(i){typeof window=="object"&&(t=window)}n.exports=t},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt;Object.defineProperty(t,"__esModule",{value:!0});u=i(80);Object.defineProperty(t,"IdentityFilter",{enumerable:!0,get:function(){return r(u).default}});f=i(121);Object.defineProperty(t,"A15Filter",{enumerable:!0,get:function(){return r(f).default}});e=i(122);Object.defineProperty(t,"BreezeFilter",{enumerable:!0,get:function(){return r(e).default}});o=i(123);Object.defineProperty(t,"BWFilter",{enumerable:!0,get:function(){return r(o).default}});s=i(124);Object.defineProperty(t,"BWHardFilter",{enumerable:!0,get:function(){return r(s).default}});h=i(125);Object.defineProperty(t,"CelsiusFilter",{enumerable:!0,get:function(){return r(h).default}});c=i(126);Object.defineProperty(t,"ChestFilter",{enumerable:!0,get:function(){return r(c).default}});l=i(127);Object.defineProperty(t,"FixieFilter",{enumerable:!0,get:function(){return r(l).default}});a=i(128);Object.defineProperty(t,"FoodFilter",{enumerable:!0,get:function(){return r(a).default}});v=i(129);Object.defineProperty(t,"FridgeFilter",{enumerable:!0,get:function(){return r(v).default}});y=i(130);Object.defineProperty(t,"FrontFilter",{enumerable:!0,get:function(){return r(y).default}});p=i(131);Object.defineProperty(t,"GlamFilter",{enumerable:!0,get:function(){return r(p).default}});w=i(132);Object.defineProperty(t,"GobblinFilter",{enumerable:!0,get:function(){return r(w).default}});b=i(133);Object.defineProperty(t,"K1Filter",{enumerable:!0,get:function(){return r(b).default}});k=i(134);Object.defineProperty(t,"K2Filter",{enumerable:!0,get:function(){return r(k).default}});d=i(135);Object.defineProperty(t,"K6Filter",{enumerable:!0,get:function(){return r(d).default}});g=i(136);Object.defineProperty(t,"KDynamicFilter",{enumerable:!0,get:function(){return r(g).default}});nt=i(137);Object.defineProperty(t,"LeninFilter",{enumerable:!0,get:function(){return r(nt).default}});tt=i(138);Object.defineProperty(t,"LomoFilter",{enumerable:!0,get:function(){return r(tt).default}});it=i(140);Object.defineProperty(t,"MellowFilter",{enumerable:!0,get:function(){return r(it).default}});rt=i(141);Object.defineProperty(t,"MetalFilter",{enumerable:!0,get:function(){return r(rt).default}});ut=i(142);Object.defineProperty(t,"MorningFilter",{enumerable:!0,get:function(){return r(ut).default}});ft=i(143);Object.defineProperty(t,"OrchidFilter",{enumerable:!0,get:function(){return r(ft).default}});et=i(144);Object.defineProperty(t,"PolaFilter",{enumerable:!0,get:function(){return r(et).default}});ot=i(145);Object.defineProperty(t,"Pola669Filter",{enumerable:!0,get:function(){return r(ot).default}});st=i(160);Object.defineProperty(t,"QuoziFilter",{enumerable:!0,get:function(){return r(st).default}});ht=i(161);Object.defineProperty(t,"SemiredFilter",{enumerable:!0,get:function(){return r(ht).default}});ct=i(162);Object.defineProperty(t,"SunnyFilter",{enumerable:!0,get:function(){return r(ct).default}});lt=i(163);Object.defineProperty(t,"TexasFilter",{enumerable:!0,get:function(){return r(lt).default}});at=i(164);Object.defineProperty(t,"X400Filter",{enumerable:!0,get:function(){return r(at).default}});vt=i(139);Object.defineProperty(t,"LUTFilter",{enumerable:!0,get:function(){return r(vt).default}})},function(n,t,i){"use strict";function rt(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function u(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var h=i(0),c=u(h),l=i(2),a=u(l),v=i(1),y=u(v),r=i(3),p=i(67),e=rt(p),w=i(66),b=u(w),k=i(114),d=u(k),g=i(42),o=u(g),nt=i(111),s=u(nt),tt=i(78),it=u(tt);var ut=r.Constants.RenderType,ft=r.Constants.ImageFormat,f=r.Constants.Events,et=function(n){function t(u){var h=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],f,e,o,s;return c.default(this,t),f=a.default(this,n.call(this)),f._onOperationUpdate=f._onOperationUpdate.bind(f),f._onContextRestored=f._onContextRestored.bind(f),e=i(68),o=e.version,f.version=o,f._preferredRenderer=u,f._options=r.Utils.defaults(h,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,zoom:1,spriteScale:1,smoothDownscaling:!1,logLevel:"warn",pixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1}),f._options.extensions=r.Utils.defaults(f._options.extensions,{operations:[],controls:[],languages:[]}),r.Log.setLevel(f._options.logLevel),f._defaultRenderMode=f._options.renderMode,f._renderMode=f._options.renderMode,f._offset=new r.Vector2,f._zoom=f._options.zoom,f._spriteScale=f._options.spriteScale,f._operations={},f._operationsStack=null,f.setOperationsStack(new b.default),f._container=new r.Engine.Container,f._sprite=new r.Engine.Sprite,f._container.addChild(f._sprite),f.setSmoothDownscaling(f._options.smoothDownscaling),f._inputBaseTexture=null,f._inputTexture=null,f._currentTexture=null,f._checkForUpdates(),f._registerOperations(),f._initRenderer(),s=f._renderer.constructor.type,f._options.displayWelcomeMessage&&r.Log.log("Yo!","Version: "+f.version+" ("+s+") - https://www.photoeditorsdk.com"),f._options.image&&f.setImage(f._options.image),f}return y.default(t,n),t.prototype._onOperationUpdate=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];this.emit.apply(this,[f.OPERATION_UPDATED].concat(i))},t.prototype._onContextRestored=function(){r.Log.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored.");this.setAllOperationsToDirty();this._operationsStack.forEach(function(n){n.disposeRenderTexture()});this.render()},t.prototype.export=function(){var t=arguments.length<=0||arguments[0]===undefined?ut.DATAURL:arguments[0],n=this,i=arguments.length<=1||arguments[1]===undefined?ft.PNG:arguments[1],u=arguments.length<=2||arguments[2]===undefined?.8:arguments[2],r;return this._renderMode="export",r=this._renderer.getDimensions(),this._renderer.setPixelRatio(1),this._renderer.resizeTo(this.getFinalDimensions()),s.default.validateSettings(t,i).then(function(){return n.render()}).then(function(){return s.default.export(n,n._image,n._renderer.getCanvas(),t,i,u)}).then(function(t){return n._renderer.setPixelRatio(n._options.pixelRatio),n._renderer.resizeTo(r),n._renderMode=n._defaultRenderMode,n.setAllOperationsToDirty(),n.render(),t})},t.prototype.render=function(){var n=this,t,i,u;if(!this._image)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");return t=this._renderer.getContext(),t.startFrame&&t.startFrame(),i=void 0,r.Log.canLog("info")&&(i=new it.default("","Frame rendering")),r.Log.info("","Rendering starts"),u=this._operationsStack,u.updateDirtinessForRenderer(this._renderer),this._currentTexture=this._inputTexture,this._sprite.setTexture(this._currentTexture),this._container.updateTransform(),u.validateSettings().then(function(){return u.render(n,n._currentTexture)}).then(function(t){n._currentTexture=t;n._sprite.setTexture(n._currentTexture);switch(n._renderMode){case"dynamic":var i=n._renderer.getDimensions().clone().divide(2).add(n._offset);n._container.setScale(n._zoom,n._zoom);n._container.setPosition(i);n._sprite.setAnchor(.5,.5);n._sprite.setScale(n._spriteScale,n._spriteScale);break;case"export":n._container.setScale(1,1);n._container.setPosition(0,0);n._sprite.setAnchor(0,0);n._sprite.setPosition(0,0);n._sprite.setScale(n._spriteScale,n._spriteScale);n._sprite.setRotation(0)}n._renderer.render(n._container)}).then(function(){i&&i.stop();t.endFrame&&t.endFrame()})},t.prototype._registerOperations=function(){var t,n;this._operations={};for(t in e)n=e[t],this._operations[n.identifier]=n;this._operations=r.Utils.extend(this._operations,this._options.extensions.operations)},t.prototype.setAllOperationsToDirty=function(){this._operationsStack.setAllToDirty()},t.prototype.createOperation=function(n){var r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],u=arguments.length<=2||arguments[2]===undefined?!0:arguments[2],i=this._operations[n],t;if(!i)throw new Error("No operation with identifier `"+n+"` found.");return t=new i(this,r),u&&this.addOperation(t),t},t.prototype.addOperation=function(n){this._operationsStack.push(n)},t.prototype.removeOperation=function(n){this._operationsStack.remove(n)},t.prototype.getInputDimensions=function(){var n=this._inputTexture.getFrame();return new r.Vector2(n.width,n.height)},t.prototype.getFinalDimensions=function(){var n=this.getInputDimensions(),t=this._operationsStack;return t.forEach(function(t){n=t.getNewDimensions(n)}),n.multiply(this._spriteScale),n.round()},t.prototype.getOutputDimensions=function(){return this.getFinalDimensions().clone().multiply(this._zoom)},t.prototype._checkForUpdates=function(){this._options.versionCheck&&(this._versionChecker=new d.default(this.version))},t.prototype.createRenderTexture=function(){var n=this._sprite.getTexture().getFrame();return new r.Engine.RenderTexture(this._renderer,n.width,n.height)},t.prototype._initRenderer=function(){var i={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},n=void 0,t=void 0,u,f;this._renderMode==="dynamic"&&this._options.canvas?(u=this._options.canvas,n=u.width,t=u.height):this._image&&(f=this.getFinalDimensions(),n=f.x,t=f.y);switch(this._preferredRenderer){case"webgl":this._renderer=r.Engine.autoDetectRenderer(n,t,i);this._renderer.on("context-restored",this._onContextRestored);break;case"canvas":this._renderer=new r.Engine.CanvasRenderer(n,t,i);this._renderer.on("context-restored",this._onContextRestored);break;default:r.Log.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer.");this._renderer=r.Engine.autoDetectRenderer(n,t,i)}},t.prototype.resizeTo=function(n){this._renderer.resizeTo(n)},t.prototype.reset=function(){this._operationsStack.clear()},t.prototype.parseExif=function(n){var t,u,r;if(n&&(t=n.src,typeof window=="undefined"&&(u=i(14),n instanceof u.Image&&n.rawSource&&(t=n.rawSource)),o.default.isJPEG(t))){r=null;try{r=o.default.fromBase64String(t)}catch(f){}return r?r:void 0}},t.prototype._handleExifOrientation=function(){var n=this._exif.getTags(),t,i;n&&n.Orientation&&(t=n.Orientation!==1&&n.Orientation!==2,i=[2,4,5,7].indexOf(n.Orientation)!==-1,(t||i)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(n),this._exif.setOrientation(1)))},t.prototype.hasImage=function(){return this._image!==null&&typeof this._image!="undefined"},t.prototype.getImage=function(){return this._image},t.prototype.setImage=function(n){var f=arguments.length<=1||arguments[1]===undefined?null:arguments[1],i=arguments.length<=2||arguments[2]===undefined?null:arguments[2],u,t;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null);this._options.image=n;this._image=n;this._exif=f||this.parseExif(n);this._exif&&this._handleExifOrientation();u=new r.Engine.BaseTexture(this._image);t=new r.Rectangle(0,0,this._image.width,this._image.height);i&&(t.width=i.x,t.height=i.y);this._inputTexture=new r.Engine.Texture(u,t);this._currentTexture=this._inputTexture;this._sprite.setTexture(this._inputTexture);this.setAllOperationsToDirty()},t.prototype.getCanvas=function(){return this._renderer.getCanvas()},t.prototype.setCanvas=function(n){this._renderer.setCanvas(n)},t.prototype.getSprite=function(){return this._sprite},t.prototype.getContainer=function(){return this._container},t.prototype.getOperationsStack=function(){return this._operationsStack},t.prototype.setOperationsStack=function(n){this._operationsStack&&this._operationsStack.off(f.OPERATION_UPDATED,this._onOperationUpdate);this._operationsStack=n;this._operationsStack.on(f.OPERATION_UPDATED,this._onOperationUpdate)},t.prototype.getOperations=function(){return this._operations},t.prototype.getRenderer=function(){return this._renderer},t.prototype.getOffset=function(){return this._offset},t.prototype.setOffset=function(n,t){n instanceof r.Vector2?this._offset.copy(n):this._offset.set(n,t)},t.prototype.getZoom=function(){return this._zoom},t.prototype.setZoom=function(n){this._zoom=n;this._container.setScale(this._zoom,this._zoom);this._container.updateTransform()},t.prototype.getSpriteScale=function(){return this._spriteScale},t.prototype.setSpriteScale=function(n){this._spriteScale=n;this._sprite.setScale(n);this._sprite.updateTransform()},t.prototype.getPixelRatio=function(){return this._options.pixelRatio},t.prototype.getExif=function(){return this._exif},t.prototype.getOptions=function(){return this._options},t.prototype.getInputTexture=function(){return this._inputTexture},t.prototype.setSmoothDownscaling=function(n){this._options.smoothDownscaling=n;this._sprite.setSmoothDownscaling(n)},t.prototype.dispose=function(){this._renderer.dispose();this._exif&&this._exif.dispose()},t}(r.EventEmitter);t.default=et},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),h=r(s),c=i(2),l=r(c),a=i(1),v=r(a),u=i(6),y=i(26),p=r(y),w=i(46),b=r(w),k=i(47),f=r(k);var e=u.Constants.OptionType,o=u.Constants.UniformType,d=function(n){function t(){return h.default(this,t),l.default(this,n.apply(this,arguments))}return v.default(t,n),t.prototype._initOptions=function(){this._shaders=[];this._availableUniforms=f.default.defaultUniforms;this._attributes=f.default.defaultAttributes;this._vertexSource=f.default.defaultVertexSource;this._fragmentSource=f.default.defaultFragmentSource;this._initUniforms();n.prototype._initOptions.call(this)},t.prototype._initUniforms=function(){var i,r,n,t;this._uniforms={};for(i in this._availableUniforms)r=this._availableUniforms[i],this._uniforms[i]={type:r.type,value:r.default||null};for(n in this.availableOptions)t=this.availableOptions[n],t.uniformType?this._uniforms["u_"+n]={type:t.uniformType,value:t.default||null}:u.Log.trace(this.constructor.name,"Option `"+n+"` is missing a `uniformType`!")},t.prototype.setOption=function(t,i){var h=arguments.length<=2||arguments[2]===undefined?!0:arguments[2],r,u,f,s;if(n.prototype.setOption.call(this,t,i,h),r=i,u=this.availableOptions[t],u.uniformType){f="u_"+t;switch(u.type){case e.COLOR:u.uniformType===o.FLOAT4?r=i.toGLColor():u.uniformType===o.FLOAT3&&(r=i.toRGBGLColor());break;case e.VECTOR2:r=[i.x,i.y];break;case e.COLOR_MATRIX:r=[i.a,i.b,i.c,i.d,i.f,i.g,i.h,i.i,i.k,i.l,i.m,i.n,i.p,i.q,i.r,i.s];s=[i.e,i.j,i.o,i.t];this._uniforms[f+"_vec"]={value:s,type:o.FLOAT4}}this.setUniform(f,r)}},t.prototype.setUniform=function(n,t){var i=arguments.length<=2||arguments[2]===undefined?!1:arguments[2];this._uniforms[n].value=t},t.prototype.setUniforms=function(n){var i=arguments.length<=1||arguments[1]===undefined?!1:arguments[1];for(var t in n)this._uniforms[t].value=n[t],i&&this.syncUniform(t)},t.prototype.syncUniform=function(n){this._shaders.forEach(function(t){t.syncUniform(n)})},t.prototype.syncUniforms=function(){this._shaders.forEach(function(n){n.syncUniforms()})},t.prototype.getShaderForRenderer=function(n){var i=n.getContext(),t=this._shaders[i.id];return t||(t=new b.default(n,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[i.id]=t),t},t.prototype.apply=function(n,t,i){var r=arguments.length<=3||arguments[3]===undefined?!1:arguments[3];n.isOfType("webgl")?this._applyWebGL(n,t,i,r):n.isOfType("canvas")&&this._applyCanvas(n,t,i,r)},t.prototype._applyWebGL=function(n,t,i){var e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],r=n.getContext(),u=this.getShaderForRenderer(n),f;n.setRenderTarget(i);e&&i.clear();n.setShader(u);f=n.getCurrentRenderTarget().getProjectionMatrix().toArray();u.setUniform("u_projMatrix",f);u.syncUniforms();r.activeTexture(r.TEXTURE0);r.bindTexture(r.TEXTURE_2D,t.getTexture());r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)},t.prototype._applyCanvas=function(n,t,i){var s=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],r=t.getCanvas(),e=t.getContext(),o=i.getContext(),f;u.Log.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`.");f=e.getImageData(0,0,r.width,r.height);o.putImageData(f,0,0)},t.prototype.dispose=function(){this._shaders.forEach(function(n){return n.dispose()});this._shaders=[]},t}(p.default);t.default=d},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(6),a=i(73),v=r(a),y=i(70),p=r(y),w=i(32),b=r(w),k=i(44),d=r(k);u=function(n){function t(){var i;e.default(this,t);for(var u=arguments.length,f=Array(u),r=0;r<u;r++)f[r]=arguments[r];return i=s.default(this,n.call.apply(n,[this].concat(f))),i._type="canvas",i.setCanvas(i._options.canvas||i._createCanvas()),i}return c.default(t,n),t.prototype._createCanvas=function(){return l.Utils.createCanvas()},t.prototype._createContext=function(){var i=this._canvas,n=i.getContext("2d");return this._options.debug&&(n=new v.default(n)),this.id=n.id=t.contextId++,this._context=n,n.renderer=this,this.emit("context",n),n},t.prototype._setupContext=function(){var n=this._context;"imageSmoothingEnabled"in n?n.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(t){n[t]&&(n[t]=!0)});this._defaultRenderTarget=new b.default(this._width,this._height,this._pixelRatio,this._canvas,this._context);this.setRenderTarget(this._defaultRenderTarget);this._filterManager=new d.default(this)},t.prototype.render=function(n){var t=this._renderTarget.getContext(),f=n.getParent();n.setParent(this._fakeObject);n.updateTransform();n.setParent(f);t.setTransform(1,0,0,1,0,0);t.globalAlpha=1;var i=this._canvas,r=i.width,u=i.height;t.clearRect(0,0,r,u);this._clearColor.a!==0&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,r,u),t.restore());this.renderDisplayObject(n,this._renderTarget)},t.prototype.renderDisplayObject=function(n,t){var i=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack());this.setRenderTarget(t);n.renderCanvas(this);this.setRenderTarget(i)},t.prototype.getCurrentRenderTarget=function(){return this._renderTarget},t.prototype.setRenderTarget=function(n){this._renderTarget=n},t.prototype.getContext=function(){return this._renderTarget.getContext()},t.prototype.dispose=function(){this._filterManager.dispose()},t}(p.default);u.contextId=0;u.type="Canvas2D";t.default=u},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),a=i(6),r=u(a),v=i(71),y=u(v);f=function(n){function t(){var i,u,f;o.default(this,t);for(var s=arguments.length,c=Array(s),e=0;e<s;e++)c[e]=arguments[e];for(i=h.default(this,n.call.apply(n,[this].concat(c))),i._maxBatchSize=r.default.BATCH_SIZE,i._vertices=new ArrayBuffer(r.default.BATCH_SIZE*4*r.default.VERTEX_BYTE_SIZE),i._positions=new Float32Array(i._vertices),i._colors=new Uint32Array(i._vertices),i._indices=new Uint16Array(r.default.BATCH_SIZE*6),u=0,f=0;u<r.default.BATCH_SIZE*6;u+=6,f+=4)i._indices[u+0]=f+0,i._indices[u+1]=f+1,i._indices[u+2]=f+2,i._indices[u+3]=f+0,i._indices[u+4]=f+2,i._indices[u+5]=f+3;return i._shaders=[],i._sprites=[],i._currentBatchSize=0,i._currentBaseTexture=null,i._onContextChange(),i}return l.default(t,n),t.prototype.render=function(n){var i=n.getTexture(),f=i.getFrame(),e=i.getBaseTexture(),u,t;(this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=e),u=i.getUVs(),u)&&(t=this._currentBatchSize*r.default.VERTEX_BYTE_SIZE,this._addVertexCoordinates(n,t,f),this._addTextureUVs(n,t,u),this._addColors(n,t),this._sprites[this._currentBatchSize]=n,this._currentBatchSize++)},t.prototype._addColors=function(n,t){var i=this._colors,r=n.getTint(),u=(r>>16)+(r&65280)+((r&255)<<16)+(n.getWorldAlpha()*255<<24);i[t+4]=i[t+9]=i[t+14]=i[t+19]=u},t.prototype._addTextureUVs=function(n,t,i){var u=this._positions,r=i.getUVsAt(0);u[t+2]=r.x;u[t+3]=r.y;r=i.getUVsAt(1);u[t+7]=r.x;u[t+8]=r.y;r=i.getUVsAt(2);u[t+12]=r.x;u[t+13]=r.y;r=i.getUVsAt(3);u[t+17]=r.x;u[t+18]=r.y},t.prototype._addVertexCoordinates=function(n,t,i){for(var u=this._positions,o=n.getWorldTransform(),s=n.getAnchor(),f=o.rectangleToCoordinates(i,s),e=5,r=0;r<4;r++)u[t+r*e]=f[r].x,u[t+r*e+1]=f[r].y},t.prototype._onContextChange=function(){var n=this._renderer.getContext();this._shader=this._renderer.shaders.default;this._vertexBuffer=n.createBuffer();this._indexBuffer=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer);n.bufferData(n.ELEMENT_ARRAY_BUFFER,this._indices,n.STATIC_DRAW);n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer);n.bufferData(n.ARRAY_BUFFER,this._vertices,n.DYNAMIC_DRAW)},t.prototype.start=function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)},t.prototype.flush=function(){var e=this._renderer,n=e.getContext(),a,i,y,p,w;if(this._currentBatchSize!==0){this._currentBatchSize>r.default.BATCH_SIZE*.5?n.bufferSubData(n.ARRAY_BUFFER,0,this._vertices):(a=this._positions.subarray(0,this._currentBatchSize*r.default.VERTEX_BYTE_SIZE),n.bufferSubData(n.ARRAY_BUFFER,0,a));var u=0,f=null,o=null,t=null,s=null,h=!1,v=!1,c=null,l=0;for(i=0,y=this._currentBatchSize;i<y;i++)c=this._sprites[i],o=c.getTexture().getBaseTexture(),s=c.getShader()||this._shader,h=t!==s,v=f!==o,(v||h)&&(this._renderBatch(f,u,l),l=i,u=0,f=o,h&&(t=s,e.setShader(t),p=e.getCurrentRenderTarget(),w=p.getProjectionMatrix().toArray(),t.setUniform("u_projMatrix",w),t.syncUniforms(),n.activeTexture(n.TEXTURE0))),u++;this._renderBatch(f,u,l);this._currentBatchSize=0;this._sprites=[]}},t.prototype._renderBatch=function(n,t,i){var e,o;if(t!==0){var u=this._renderer,r=u.getContext(),f=n.getGLTextureForId(r.id);f||(f=u.getOrCreateGLTexture(n),u.updateTexture(n));r.activeTexture(r.TEXTURE0+n.getGLUnit());r.bindTexture(r.TEXTURE_2D,f);e=t*6;o=i*12;r.drawElements(r.TRIANGLES,e,r.UNSIGNED_SHORT,o)}},t.prototype.dispose=function(){var i=this._renderer,t=i.getContext();t.deleteBuffer(this._vertexBuffer);t.deleteBuffer(this._indexBuffer);this._vertices=null;this._positions=null;this._colors=null;this._indices=null;n.prototype.dispose.call(this)},t}(y.default);t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e,f;Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),h=r(s),c=i(2),l=r(c),a=i(1),v=r(a),u=i(6),y=i(70),p=r(y),w=i(33),b=r(w),k=i(71),d=r(k),g=i(100),nt=r(g),tt=i(47),it=r(tt),rt=i(43),ut=r(rt),ft=i(45),et=r(ft),ot=i(73),st=r(ot),ht=i(74),ct=r(ht),lt=i(14),o=r(lt);e=typeof o.default!="undefined"?o.default.Image:undefined;f=function(n){function t(){var i;h.default(this,t);for(var f=arguments.length,e=Array(f),r=0;r<f;r++)e[r]=arguments[r];return i=l.default(this,n.call.apply(n,[this].concat(e))),i._type="webgl",i._textures=[],i._fakeObject=new ut.default,i._onContextLost=i._onContextLost.bind(i),i._onContextRestored=i._onContextRestored.bind(i),i.setCanvas(i._options.canvas||u.Utils.createCanvas()),i.shaders=i._initShaders(),i.renderers=i._initRenderers(),i}return v.default(t,n),t.prototype._onContextLost=function(n){n.preventDefault();u.Log.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")},t.prototype._onContextCreationError=function(n){n.preventDefault();u.Log.warn(this.constructor.name,"Failed to create WebGL context: "+(n.statusMessage||"Unknown error"))},t.prototype._onContextRestored=function(){var n=this;u.Log.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures.");this._textures.forEach(function(t){t.disposeGLTextures(n)});this._createContext();this._setupContext();this.emit("context-restored")},t.prototype._onBeforeContext=function(){this._filterManager=new et.default(this);this._currentObjectRenderer=new d.default(this)},t.prototype.setShader=function(n){this._currentShader=n;this._context.useProgram(n.getProgram());this._setAttributesForShader(n)},t.prototype.setCanvas=function(t){this._canvas&&(this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError));t.addEventListener&&(t.addEventListener("webglcontextlost",this._onContextLost),t.addEventListener("webglcontextrestored",this._onContextRestored),t.addEventListener("webglcontextcreationerror",this._onContextCreationError));n.prototype.setCanvas.call(this,t)},t.prototype._setAttributesForShader=function(n){var t=this._context,i=n.getAttributes(),r=n.getAttributeLocations();i.forEach(function(n){var i=r[n];t.enableVertexAttribArray(i)})},t.prototype._initShaders=function(){return{"default":new it.default(this)}},t.prototype._initRenderers=function(){return{sprite:new nt.default(this)}},t.prototype._createContext=function(){var r=this._canvas,n=null,f=i(31),u={preserveDrawingBuffer:!0},e;return n=f?f(r.width,r.height,u):r.getContext("webgl",u)||r.getContext("experimental-webgl",u),typeof window!="undefined"&&window.WebGLDebugUtils&&this._options.debug&&(e=function(n,t){console.error("gl."+n+"("+window.WebGLDebugUtils.glFunctionArgsToString(n,t)+")")},n=window.WebGLDebugUtils.makeDebugContext(n,null,e)),this._options.debug&&(n=new st.default(n)),this.id=n.id=t.contextId++,this._context=n,n.renderer=this,this._maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.emit("context",n),n},t.prototype._setupContext=function(){var n=this._context;n.disable(n.DEPTH_TEST);n.disable(n.CULL_FACE);n.enable(n.BLEND);n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA);this._defaultRenderTarget=new b.default(this,this._width,this._height,this._pixelRatio,!0);this.setRenderTarget(this._defaultRenderTarget)},t.prototype.resizeTo=function(t){n.prototype.resizeTo.call(this,t);this._currentRenderTarget&&this._currentRenderTarget.resizeTo(t);i(31)&&this._context.resize(t.x,t.y)},t.prototype.setRenderTarget=function(n){this._currentRenderTarget=n;this._currentRenderTarget.activate()},t.prototype.setObjectRenderer=function(n){this._currentObjectRenderer.stop();this._currentObjectRenderer=n;this._currentObjectRenderer.start()},t.prototype.render=function(n){this.setRenderTarget(this._defaultRenderTarget);this._defaultRenderTarget.clear(this._clearColor);var t=n.getParent();n.setParent(this._fakeObject);n.updateTransform();n.setParent(t);this.renderDisplayObject(n,this._defaultRenderTarget)},t.prototype.renderDisplayObject=function(n,t){this.setRenderTarget(t);this._filterManager.setFilterStack(t.getFilterStack());n.renderWebGL(this);this._currentObjectRenderer.flush()},t.prototype.clear=function(){var n=this._context;n.clearColor.apply(n,this._clearColor.toGLColor());n.clear(n.COLOR_BUFFER_BIT)},t.prototype.save=function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}},t.prototype.restore=function(n){this.setRenderTarget(n.renderTarget);this._filterManager.setFilterStack(n.filterStack);this._currentObjectRenderer=n.objectRenderer},t.prototype.getOrCreateGLTexture=function(n){var i=this._context,t=n.getGLTextureForId(i.id);return t||(t=i.createTexture(),n.setGLTextureForId(t,i.id),this._textures.push(n)),t},t.prototype.updateTexture=function(n){var u=arguments.length<=1||arguments[1]===undefined?!0:arguments[1],r=n.getSource(),f=!!r,t=this._context,o=n.getGLUnit(),s=this.getOrCreateGLTexture(n);t.activeTexture(t.TEXTURE0+o);t.bindTexture(t.TEXTURE_2D,s);t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);i(31)&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0);u&&f&&(typeof Image!="undefined"&&r instanceof Image||typeof HTMLImageElement!="undefined"&&r instanceof HTMLImageElement||r.constructor.name==="Canvas"||r.tagName&&r.tagName.toUpperCase()==="CANVAS"||r.tagName&&r.tagName.toUpperCase()==="IMG"?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r):(typeof e!="undefined"&&r instanceof e&&(r=ct.default.fromNodeCanvasImage(r)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)));n.isMipMappingEnabled()?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n.getGLFilter(t,"min"));t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n.getGLFilter(t,"mag"));t.activeTexture(t.TEXTURE0)},t.prototype.getMaxDimensions=function(){var f=i(31),t,r,n;return f?(t=f(1,1),t.getParameter(t.MAX_TEXTURE_SIZE)):(r=u.Utils.createCanvas(),n=r.getContext("webgl")||r.getContext("experimental-webgl"),n?n.getParameter(n.MAX_TEXTURE_SIZE):null)},t.prototype.getCurrentRenderTarget=function(){return this._currentRenderTarget},t.prototype.getCurrentObjectRenderer=function(){return this._currentObjectRenderer},t.isSupported=function(){var n,t;return i(31)?!0:typeof window=="undefined"?!1:(n=u.Utils.createCanvas(),n.addEventListener("webglcontextcreationerror",this._onContextCreationError),t=n.getContext("webgl")||n.getContext("experimental-webgl"),n.removeEventListener("webglcontextcreationerror",this._onContextCreationError),!!t)},t.prototype.dispose=function(){var n=this;this._filterManager.dispose();this._currentObjectRenderer.dispose();this._defaultRenderTarget.dispose();this._textures.forEach(function(t){t.disposeGLTextures(n)})},t}(p.default);f.contextId=0;f.type="WebGL";t.default=f},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(47),u=f(r);t.default={TextureShader:u.default}},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),u=i(6),a=i(69),v=r(a),y=i(113),p=r(y);f=function(n){function t(i){o.default(this,t);var r=h.default(this,n.call(this));return r._onTextureUpdate=r._onTextureUpdate.bind(r),r._texture=i,r._shader=null,r._width=0,r._height=0,r._anchor=new u.Vector2(0,0),r.setTexture(i),r}return l.default(t,n),t.prototype._onTextureUpdate=function(){this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},t.prototype._renderWebGL=function(n){var t=n.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new p.default),this._potRenderer.render(n,this,this._texture));n.restore(t);n.setObjectRenderer(n.renderers.sprite);n.renderers.sprite.render(this)},t.prototype._renderCanvas=function(n){var t=this._worldTransform,e=this._texture.getFrame(),r=e.width,u=e.height,i=n.getCurrentRenderTarget().getPixelRatio(),c=this._anchor.x*-r,l=this._anchor.y*-u,f=n.getContext();f.setTransform(t.a,t.b,t.c,t.d,t.tx*i,t.ty*i);f.globalAlpha=this.getWorldAlpha();var o=this._texture.getBaseTexture(),s=o.getPixelRatio(),h=o.getSource();f.drawImage(this._texture.getBaseTexture().getSource(),0,0,(h.naturalWidth||r)*s,(h.naturalHeight||u)*s,c*i,l*i,r*i,u*i)},t.prototype.isAtPosition=function(n){var t=this._worldTransform.applyInverseToVector(n),f=this._texture.getFrame(),e=f.width,o=f.height,i=new u.Vector2(-e,-o),r;return(i.multiply(this._anchor),r=i.clone().add(e,o),t.x<i.x||t.x>r.x||t.y<i.y||t.y>r.y)?!1:!0},t.prototype.getLocalBounds=function(){if(this._localBoundsNeedUpdate){var n=this._localBounds,t=this._texture.getFrame();n.x=-t.width*this._anchor.x;n.y=-t.height*this._anchor.y;n.width=t.width;n.height=t.height;this._localBoundsNeedUpdate=!1}return this._localBounds.clone()},t.prototype.getBounds=function(){var n=this;return this._boundsNeedUpdate&&function(){var r=n._bounds,o=n._texture.getFrame(),s=n._worldTransform,h=n._anchor,u=s.rectangleToCoordinates(o,h),t=u[0].x,i=u[0].y,f=t,e=i;u.forEach(function(n){var r=n.x,u=n.y;t=Math.min(t,r);i=Math.min(i,u);f=Math.max(f,r);e=Math.max(e,u)});r.x=t;r.width=Math.abs(f-t);r.y=i;r.height=Math.abs(e-i);n._boundsNeedUpdate=!1}(),this._bounds.clone()},t.prototype.getTexture=function(){return this._texture},t.prototype.setTexture=function(n){if(n){this._texture&&this._texture.off("update",this._onTextureUpdate);this._texture=n;n.getBaseTexture().isLoaded()&&this._onTextureUpdate();n.on("update",this._onTextureUpdate)}},t.prototype.getShader=function(){return this._shader},t.prototype.setShader=function(n){this._shader=n},t.prototype.getWidth=function(){return this._width},t.prototype.setWidth=function(n){this._scale.x=n/this._texture.getFrame().width;this._width=n;this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},t.prototype.getHeight=function(){return this._height},t.prototype.setHeight=function(n){this._scale.y=n/this._texture.getFrame().height;this._height=n;this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},t.prototype.getAnchor=function(){return this._anchor},t.prototype.setAnchor=function(n,t){n instanceof u.Vector2?this._anchor.copy(n):this._anchor.set(n,t);this._boundsNeedUpdate=!0;this._localBoundsNeedUpdate=!0},t.prototype.isSmoothDownscaling=function(){return this._smoothDownscaling},t.prototype.setSmoothDownscaling=function(n){this._smoothDownscaling=n},t.prototype.dispose=function(){this._texture&&this._texture.off("update",this._onTextureUpdate)},t}(v.default);t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),u=i(6),a=i(72),v=r(a),y=i(48),p=r(y),w=i(33),b=r(w),k=i(32),d=r(k),g=i(45),nt=r(g),tt=i(44),it=r(tt);f=function(n){function t(i){var e=arguments.length<=1||arguments[1]===undefined?100:arguments[1],s=arguments.length<=2||arguments[2]===undefined?100:arguments[2],l=arguments.length<=3||arguments[3]===undefined?1:arguments[3],f,c,r;return o.default(this,t),f=new p.default,c=f.getFrame(),c.width=e,c.height=s,f.setPixelRatio(l),f.setLoaded(!0),r=h.default(this,n.call(this,f,new u.Rectangle(0,0,e,s))),r._loaded=!0,r._width=e,r._height=s,r._pixelRatio=l,r._renderer=i,r._setupFilterManager(),r._setupBuffer(),r._updateUVs(),r}return l.default(t,n),t.prototype._setupFilterManager=function(){this._renderer.isOfType("webgl")?this._filterManager=new nt.default(this._renderer):this._renderer.isOfType("canvas")&&(this._filterManager=new it.default(this._renderer));this._filterManager.resizeTo(new u.Vector2(this._width,this._height))},t.prototype._setupBuffer=function(){this._renderer.isOfType("webgl")?this._setupWebGLBuffer():this._renderer.isOfType("canvas")&&this._setupCanvasRenderTarget()},t.prototype._setupWebGLBuffer=function(){this._renderTarget=new b.default(this._renderer,this._width,this._height,this._pixelRatio);this._baseTexture.setGLTextureForId(this._renderTarget.getTexture(),this._renderer.getContext().id)},t.prototype._setupCanvasRenderTarget=function(){this._renderTarget=new d.default(this._width,this._height,this._pixelRatio);this._baseTexture.setSource(this._renderTarget.getCanvas())},t.prototype.clear=function(n){this._renderTarget.clear(n)},t.prototype.resizeTo=function(n){(this._width!==n.x||this._height!==n.y)&&(this._width=n.x,this._height=n.y,this._frame.width=n.x,this._frame.height=n.y,this._baseTexture.resizeTo(n),this._renderTarget.resizeTo(n),this._filterManager.resizeTo(n))},t.prototype.render=function(n){if(this._renderer.isOfType("webgl"))this._renderWebGL(n);else if(this._renderer.isOfType("canvas"))this._renderCanvas(n);else throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);},t.prototype._renderWebGL=function(n){this._renderTarget.activate();n.getWorldTransform().reset();n.getChildren().forEach(function(n){n.updateTransform()});var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager);this._renderer.renderDisplayObject(n,this._renderTarget);this._renderTarget.updateMipMap();this._renderer.setFilterManager(t)},t.prototype._renderCanvas=function(n){n.getWorldTransform().reset();n.getChildren().forEach(function(n){n.updateTransform()});var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager);this._renderer.renderDisplayObject(n,this._renderTarget);this._renderer.setFilterManager(t)},t.prototype.getRenderTarget=function(){return this._renderTarget},t.prototype.dispose=function(){this._baseTexture.dispose(this._renderer);this._renderTarget.dispose();this._filterManager.dispose()},t}(v.default);t.default=f},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=e(r);f=function(){function n(t){u.default(this,n);this._renderer=t;this._vertices=new Float32Array([0,0,100,0,100,100,0,100]);this._uvs=new Float32Array([0,0,1,0,1,1,0,1]);this._indices=new Uint16Array([0,1,2,0,3,2]);this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this._initBuffers();this._uploadBuffers()}return n.prototype.map=function(n,t){var i=t.x,r=t.y;this._uvs[2]=t.width/n.width;this._uvs[4]=this._uvs[2];this._uvs[5]=t.height/n.height;this._uvs[7]=this._uvs[5];this._vertices[0]=i;this._vertices[1]=r;this._vertices[2]=i+t.width;this._vertices[3]=r;this._vertices[4]=this._vertices[2];this._vertices[5]=r+t.height;this._vertices[6]=i;this._vertices[7]=this._vertices[5];this._uploadBuffers()},n.prototype._initBuffers=function(){var n=this._renderer.getContext();this._vertexBuffer=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer);n.bufferData(n.ARRAY_BUFFER,128,n.DYNAMIC_DRAW);this._indexBuffer=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer);n.bufferData(n.ELEMENT_ARRAY_BUFFER,this._indices,n.STATIC_DRAW)},n.prototype._uploadBuffers=function(){var n=this._renderer.getContext();n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer);n.bufferSubData(n.ARRAY_BUFFER,0,this._vertices);n.bufferSubData(n.ARRAY_BUFFER,32,this._uvs);n.bufferSubData(n.ARRAY_BUFFER,64,this._colors)},n.prototype.getVertexBuffer=function(){return this._vertexBuffer},n.prototype.getIndexBuffer=function(){return this._indexBuffer},n.prototype.dispose=function(){var n=this._renderer.getContext();n.deleteBuffer(this._vertexBuffer);n.deleteBuffer(this._indexBuffer)},n}();t.default=f},function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=o(f),r=i(6);u=function(){function n(){e.default(this,n);this._uvs=[new r.Vector2(0,0),new r.Vector2(1,0),new r.Vector2(1,1),new r.Vector2(0,1)]}return n.prototype.update=function(n,t){var i=this._uvs[0];i.x=n.x/t.width;i.y=n.y/t.height;i=this._uvs[1];i.x=(n.x+n.width)/t.width;i.y=n.y/t.height;i=this._uvs[2];i.x=(n.x+n.width)/t.width;i.y=(n.y+n.height)/t.height;i=this._uvs[3];i.x=n.x/t.width;i.y=(n.y+n.height)/t.height},n.prototype.getUVsAt=function(n){return this._uvs[n]},n.prototype.getUVs=function(){return this._uvs},n}();t.default=u},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={defaults:function(n){for(var t,o,r,s,u,f=arguments.length,e=Array(f>1?f-1:0),i=1;i<f;i++)e[i-1]=arguments[i];t={};for(o in n)t[o]=n[o];for(r=0;r<e.length;r++){s=e[r];for(u in s)typeof t[u]=="undefined"&&(t[u]=s[u])}return t},extend:function(n){for(var i,e,r,o,s,u=arguments.length,f=Array(u>1?u-1:0),t=1;t<u;t++)f[t-1]=arguments[t];i={};for(e in n)i[e]=n[e];for(r=0;r<f.length;r++){o=f[r];for(s in o)i[s]=o[s]}return i}};t.default=i},function(n,t,i){"use strict";function f(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function u(n){return n&&n.__esModule?n:{"default":n}}var o=i(97),r=u(o),s=i(65),h=f(s),c=i(67),l=f(c),a=i(96),v=f(a),y=i(5),p=f(y),w=i(12),b=u(w),k=i(10),d=u(k),g=i(4),nt=u(g),tt=i(11),it=u(tt),rt=i(24),ut=u(rt),ft=i(25),et=u(ft),ot=i(66),st=u(ot),ht=i(42),ct=u(ht),lt=i(7),at=u(lt),e=i(9),vt=i(41),yt=u(vt);r.default.version=i(68).version;
/*!
	 * This file is part of PhotoEditorSDK.
	 *
	 * Copyright (C) 2016 9elements GmbH <contact@9elements.com>
	 * All rights reserved.
	 *
	 * Redistribution and use in source and binary forms, without
	 * modification, are permitted provided that the following license agreement
	 * is approved and a legal/financial contract was signed by the user.
	 * The license agreement can be found under following link:
	 *
	 * https://www.photoeditorsdk.com/LICENSE.txt
	 */
r.default.Math=h;r.default.Operations=l;r.default.Filters=v;r.default.FilterPrimitives=p;r.default.Engine=b.default;r.default.Color=d.default;r.default.Filter=nt.default;r.default.Operation=it.default;r.default.EventEmitter=ut.default;r.default.Utils=et.default;r.default.OperationsStack=st.default;r.default.EXIF=ct.default;r.default.Promise=at.default;r.default.RenderType=e.RenderType;r.default.ImageFormat=e.ImageFormat;r.default.Base64=yt.default;n.exports=r.default},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=e(r);f=function(){function n(t){u.default(this,n);this._head=0;this._buf=t}return n.prototype.peekInt8=function(){return this._buf[this._head]},n.prototype.peekInt16=function(){var i=arguments.length<=0||arguments[0]===undefined?!1:arguments[0],n=this._buf[this._head],t=this._buf[this._head+1];return i?(t<<8)+n:(n<<8)+t},n.prototype.peekInt24=function(){var r=arguments.length<=0||arguments[0]===undefined?!1:arguments[0],n=this._buf[this._head],t=this._buf[this._head+1],i=this._buf[this._head+2];return r?(i<<16)+(t<<8)+n:(n<<16)+(t<<8)+i},n.prototype.peekInt32=function(){var u=arguments.length<=0||arguments[0]===undefined?!1:arguments[0],n=this._buf[this._head],t=this._buf[this._head+1],i=this._buf[this._head+2],r=this._buf[this._head+3];return u?(r<<32)+(i<<16)+(t<<8)+n:(n<<32)+(t<<16)+(i<<8)+r},n.prototype.writeInt16=function(n){this._buf[this._head]=n>>8;this._buf[this._head+1]=n&255},n.prototype.readInt8=function(){var n=this.peekInt8();return this._head+=1,n},n.prototype.readInt16=function(){var n=arguments.length<=0||arguments[0]===undefined?!1:arguments[0],t=this.peekInt16(n);return this._head+=2,t},n.prototype.readInt24=function(){var n=arguments.length<=0||arguments[0]===undefined?!1:arguments[0],t=this.peekInt24(n);return this._head+=3,t},n.prototype.readInt32=function(){var n=arguments.length<=0||arguments[0]===undefined?!1:arguments[0],t=this.peekInt32(n);return this._head+=4,t},n.prototype.readString=function(n){for(var r,t="",i=0;i<n;i++)r=this.readInt8(),t+=String.fromCharCode(r);return t},n.prototype.getHead=function(){return this._head},n.prototype.setHead=function(n){this._head=n},n}();t.default=f},function(n){"use strict";n.exports=function(n,t){var u=this,r,i,f;r=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return u.apply(this,arguments)};for(i in u)r[i]=u[i];if(typeof t!="undefined")for(i in t)r[i]=t[i];if(f=function(){this.constructor=r},f.prototype=u.prototype,r.prototype=new f,n)for(i in n)r.prototype[i]=n[i];return r.__super__=u.prototype,r}},function(n,t,i){"use strict";(function(n){function u(n){return n&&n.__esModule?n:{"default":n}}var h;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),l=u(c),r=i(9),a=i(25),f=u(a),v=i(7),e=u(v),y=i(42),o=u(y),p=i(112),w=u(p),b=i(14),s=u(b);h=function(){function t(){l.default(this,t)}return t.validateSettings=function(t,i){return new e.default(function(u){var e={renderType:t,imageFormat:i};if(typeof e.renderType!="undefined"&&e.renderType!==null&&f.default.values(r.RenderType).indexOf(e.renderType)===-1)throw new Error("Invalid render type: "+e.renderType);else typeof t=="undefined"&&(e.renderType=r.RenderType.DATAURL);if(typeof e.imageFormat!="undefined"&&e.imageFormat!==null&&f.default.values(r.ImageFormat).indexOf(e.imageFormat)===-1)throw new Error("Invalid image format: "+e.imageFormat);else typeof i=="undefined"&&(e.imageFormat=r.ImageFormat.PNG);if(e.renderType===r.RenderType.BUFFER&&typeof n=="undefined")throw new Error("Render type 'buffer' is only available when using node.js");u(e)})},t.export=function(n,t,u,f,h){var c=arguments.length<=5||arguments[5]===undefined?.8:arguments[5];return new e.default(function(e){var l=void 0,v,y,a,p;(f===r.RenderType.IMAGE||f===r.RenderType.DATAURL)&&(l=typeof window=="undefined"?u.toDataURL(h):u.toDataURL(h,c),o.default.isJPEG(t.src)&&o.default.isJPEG(l)&&(v=n.getExif(),v&&(l=v.restoreExifTags(l))));y=n.getRenderer();y.isOfType("webgl")&&typeof s.default!="undefined"&&u instanceof s.default&&w.default.renderContextToCanvas(y.getContext(),u);f===r.RenderType.IMAGE?(a=void 0,typeof Image=="undefined"?(p=i(14).Image,a=new p):a=new Image,a.src=l,e(a)):f===r.RenderType.DATAURL?e(l):f===r.RenderType.BUFFER?e(u.toBuffer()):f===r.RenderType.MSBLOB?e(u.msToBlob()):f===r.RenderType.BLOB&&u.toBlob(function(n){e(n)},h,c)})},t}();t.default=h}).call(t,i(40))},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(14),s=r(o);u=function(){function n(){e.default(this,n)}return n.renderContextToCanvas=function(n,t){var i=t.width,r=t.height,u=new Uint8Array(i*r*4);n.readPixels(0,0,i,r,n.RGBA,n.UNSIGNED_BYTE,u);var o=t.getContext("2d"),e=new s.default.ImageData(i,r),f=0;u.forEach(function(){e.data[f]=u[f];f++});o.putImageData(e,0,0)},n}();t.default=u},function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=o(f),r=i(3);u=function(){function n(){e.default(this,n);this._container=new r.Engine.Container;this._sprite=new r.Engine.Sprite;this._container.addChild(this._sprite)}return n.prototype.render=function(n,t,i){var u,f;this._renderTexture||(this._renderTexture=new r.Engine.RenderTexture(n));u=i.getDimensions();this._resizeRenderTexture(u);f=this._renderTexture.getDimensions();this._sprite.setTexture(i);this._sprite.updateTransform();this._renderTexture.render(this._container);this._updateSprite(n,t,u,f)},n.prototype._updateSprite=function(n,t,i){t.setTexture(this._renderTexture);this._renderTexture.setFrame(new r.Rectangle(0,0,i.x,i.y))},n.prototype._resizeRenderTexture=function(n){this._renderTexture.resizeTo(new r.Vector2(r.Utils.nextHighestPOT(n.x),r.Utils.nextHighestPOT(n.y)))},n}();t.default=u},function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=o(f),r=i(3);var u="imglySDKVersionCallback",s="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback="+u,h=function(){function n(t){e.default(this,n);this._version=t;this._check()}return n.prototype._check=function(){var i=this,t,n;if(typeof document=="undefined")return r.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");t=this;window[u]=function(n){n.outdated&&r.Log.warn(i.constructor.name,"Your Version "+t._version+" is outdated. Current version is "+n.version+".")};n=document.createElement("script");n.src=s+"&version="+this._version;n.async=!0;document.getElementsByTagName("head")[0].appendChild(n)},n}();t.default=h},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),a=i(7),v=u(a),y=i(11),p=u(y),w=i(79),b=u(w),k=i(116),d=u(k),r=i(9);f=function(n){function t(){var i;o.default(this,t);for(var u=arguments.length,f=Array(u),r=0;r<u;r++)f[r]=arguments[r];return i=h.default(this,n.call.apply(n,[this].concat(f))),i._clarityFilter=new d.default,i._filter=new b.default,i._sprite.setFilters([i._clarityFilter,i._filter]),i}return l.default(t,n),t.prototype._render=function(n){var t=n.getDimensions();return t.x=1/t.x,t.y=1/t.y,this._clarityFilter.set({clarity:this._options.clarity,texSize:t}),this._filter.set({brightness:this._options.brightness,saturation:this._options.saturation,contrast:this._options.contrast,exposure:this._options.exposure,shadows:this._options.shadows,highlights:this._options.highlights}),this._options.clarity!==0?this._sprite.setFilters([this._clarityFilter,this._filter]):this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),v.default.resolve()},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._filter.dispose();this._clarityFilter.dispose()},t}(p.default);f.identifier="adjustments";f.prototype.availableOptions={brightness:{type:r.OptionType.NUMBER,"default":0},saturation:{type:r.OptionType.NUMBER,"default":1},contrast:{type:r.OptionType.NUMBER,"default":1},exposure:{type:r.OptionType.NUMBER,"default":0},shadows:{type:r.OptionType.NUMBER,"default":0},highlights:{type:r.OptionType.NUMBER,"default":1},clarity:{type:r.OptionType.NUMBER,"default":0}};t.default=f},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),r=i(3),a=i(49),v=u(a);f=function(n){function t(){o.default(this,t);var u=h.default(this,n.call(this));return u._fragmentSource=i(224),u._lastClarity=null,u._blurredRenderTarget=new r.Engine.CanvasRenderTarget(100,100,1),u}return l.default(t,n),t.prototype._applyCanvas=function(n,t,i){var e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],u=t.getDimensions(),f=!this._blurredRenderTarget.getDimensions().equals(u);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio());this._blurredRenderTarget.resizeTo(t.getDimensions());this._outputRenderTexture||(this._outputRenderTexture=new r.Engine.RenderTexture(n,t.getWidth(),t.getHeight(),t.getPixelRatio()));f&&this._blurImage(t);this._applyClarity(t,i)},t.prototype._blurImage=function(n){var t=n.getCanvas(),u=n.getContext(),i=u.getImageData(0,0,t.width,t.height),r;v.default.stackBlurCanvasRGBA(i,0,0,t.width,t.height,1);r=this._blurredRenderTarget.getContext();r.putImageData(i,0,0)},t.prototype._applyClarity=function(n,t){for(var w=t.getContext(),r=n.getCanvas(),b=n.getContext(),k=this._blurredRenderTarget.getContext(),c=this._options.clarity,l=b.getImageData(0,0,r.width,r.height),u=l.data,f=k.getImageData(0,0,r.width,r.height).data,a=Math.max(.2*this._options.clarity,0),e=1-a,o=1+c,s=1-(1+c),i=0;i<r.width*r.height*4;i+=4){var v=f[i]*s+u[i]*o,y=f[i+1]*s+u[i+1]*o,p=f[i+2]*s+u[i+2]*o,d=v*.2125+y*.7154+p*.0721,h=d*a;u[i]=v*e+h;u[i+1]=y*e+h;u[i+2]=p*e+h}w.putImageData(l,0,0)},t}(r.Engine.Filter);f.prototype.availableOptions={clarity:{type:"number","default":0,uniformType:"f"},texSize:{type:"vector2","default":new r.Vector2(100,100),uniformType:"2f"}};t.default=f},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=f(a),v=i(2),h=f(v),y=i(1),c=f(y),r=i(3),p=i(11),w=f(p);var u=r.Constants.OptionType,o=r.Constants.UniformType,l=function(n){function t(){s.default(this,t);var r=h.default(this,n.call(this));return r._fragmentSource=i(225),r}return c.default(t,n),t.prototype._applyCanvas=function(n,t,i){var s=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],u=t.getCanvas(),r=i.getContext(),f=this._options,e=f.color,o=f.thickness;r.save();r.drawImage(u,0,0);r.beginPath();r.lineWidth=o*2;r.strokeStyle=e.toRGBA();r.rect(0,0,u.width,u.height);r.stroke();r.restore()},t}(r.Engine.Filter);l.prototype.availableOptions={color:{type:u.COLOR,"default":r.Color.BLACK,uniformType:o.FLOAT4},thickness:{type:u.NUMBER,"default":0,uniformType:o.FLOAT},textureSize:{type:u.VECTOR2,"default":new r.Vector2(0,0),uniformType:o.FLOAT2}};e=function(n){function t(){var i;s.default(this,t);for(var u=arguments.length,f=Array(u),r=0;r<u;r++)f[r]=arguments[r];return i=h.default(this,n.call.apply(n,[this].concat(f))),i._filter=new l,i._sprite.setFilters([i._filter]),i}return c.default(t,n),t.prototype._render=function(n){var i=n.getDimensions(),t=this._options,u=t.color,f=t.thickness;return this._filter.set({color:u,thickness:f,textureSize:i}),this._renderTexture.render(this._container),r.Promise.resolve()},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._filter.dispose()},t}(w.default);e.identifier="border";e.prototype.availableOptions={color:{type:u.COLOR,"default":new r.Color(0,0,0,1)},thickness:{type:u.NUMBER,"default":5}};t.default=e},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var e,f;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=u(o),h=i(2),c=u(h),l=i(1),a=u(l),r=i(3),v=i(11),y=u(v),p=i(7),w=u(p);e=r.Constants.OptionType;f=function(n){function t(){var i;s.default(this,t);for(var f=arguments.length,e=Array(f),u=0;u<f;u++)e[u]=arguments[u];i=c.default(this,n.call.apply(n,[this].concat(e)));i._sprite.setAnchor(0,0);i._onOperationUpdate=i._onOperationUpdate.bind(i);i._sdk.on(r.Constants.Events.OPERATION_UPDATED,i._onOperationUpdate);return i}return a.default(t,n),t.prototype._onOperationUpdate=function(n,t){var i=n.constructor.identifier;i==="orientation"&&("rotation"in t&&this._applyRotation(n,t),("flipVertically"in t||"flipHorizontally"in t)&&this._applyFlip(n,t))},t.prototype._applyRotation=function(n,t){var e=n.getRotation(),o=t.rotation,r=o-e,u=this._options.start.clone(),i=this._options.end.clone(),f=u.clone();r===90||r===-270?(u.set(1-i.y,f.x),i.set(1-f.y,i.x)):(r===-90||r===270)&&(u.set(f.y,1-i.x),i.set(i.y,1-f.x));this.set({start:u,end:i},!1)},t.prototype._applyFlip=function(n,t){"flipVertically"in t&&n.getFlipVertically()!==t.flipVertically&&this._applyFlipDirection(n,"vertical");"flipHorizontally"in t&&n.getFlipHorizontally()!==t.flipHorizontally&&this._applyFlipDirection(n,"horizontal")},t.prototype._applyFlipDirection=function(n,t){var u=n.getRotation(),i,r,f,e;(u===90||u===270)&&(t=t==="vertical"?"horizontal":"vertical");i=this._options.start;r=this._options.end;switch(t){case"horizontal":f=i.x;i.x=1-r.x;r.x=1-f;break;case"vertical":e=i.y;i.y=1-r.y;r.y=1-e}this.set({start:i,end:r},!1)},t.prototype._render=function(){var n=this._sprite.getBounds(),i=new r.Vector2(n.width,n.height),t=this._options.start.clone().multiply(i);return this._sprite.setPosition(-t.x,-t.y),this._renderTexture.render(this._container),w.default.resolve()},t.prototype.getNewDimensions=function(n){n=n.clone();var t=this._options.end.clone().subtract(this._options.start);return t.multiply(n),t},t}(y.default);f.identifier="crop";f.prototype.availableOptions={start:{type:e.VECTOR2,required:!0,"default":new r.Vector2(0,0)},end:{type:e.VECTOR2,required:!0,"default":new r.Vector2(1,1)}};t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var f,u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(3),v=i(7),y=r(v),p=i(19),w=r(p),b=i(11),k=r(b);f=a.Constants.OptionType;u=function(n){function t(){return o.default(this,t),h.default(this,n.apply(this,arguments))}return l.default(t,n),t.prototype._getRotation=function(){var n=0;switch(this.getTags().Orientation){case 7:case 8:n=-90;break;case 3:case 4:n=-180;break;case 5:case 6:n=90}return n},t.prototype._getFlipVertically=function(){var n=this.getTags(),t=n.Orientation;return[5,7].indexOf(t)!==-1},t.prototype._getFlipHorizontally=function(){var n=this.getTags(),t=n.Orientation;return[2,4].indexOf(t)!==-1},t.prototype._getFinalOptions=function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}},t.prototype._render=function(){var n=this._getFinalOptions(),i=n.rotation%360,r=i*(Math.PI/180),t;return this._sprite.setScale(n.flipHorizontally?-1:1,n.flipVertically?-1:1),this._sprite.setRotation(r),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform(),t=this._sprite.getBounds(),this._renderTexture.resizeTo(new w.default(t.width,t.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),y.default.resolve()},t.prototype.getNewDimensions=function(n){var t=this._getFinalOptions();return n=n.clone(),t.rotation%180&&n.flip(),n},t}(k.default);u.identifier="exif-orientation";u.prototype.availableOptions={tags:{type:f.OBJECT,"default":{}}};t.default=u},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var f,u;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=r(o),h=i(2),c=r(h),l=i(1),a=r(l),e=i(3),v=i(11),y=r(v),p=i(80),w=r(p);f=e.Constants.OptionType;u=function(n){function t(){return s.default(this,t),c.default(this,n.apply(this,arguments))}return a.default(t,n),t.prototype._render=function(n){return this._selectedFilter.render(this._sdk,n,this._renderTexture)},t.prototype.render=function(t){return!this.getEnabled()||this._selectedFilter.constructor.isIdentity?e.Promise.resolve(t):n.prototype.render.call(this,t)},t.prototype.setDirtyForRenderer=function(t,i){n.prototype.setDirtyForRenderer.call(this,t,i);this._selectedFilter.setDirtyForRenderer(t,i)},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._selectedFilter&&this._selectedFilter.dispose()},t}(y.default);u.identifier="filter";u.prototype.availableOptions={intensity:{type:f.NUMBER,"default":1,setter:function(n){return this._selectedFilter&&this._selectedFilter.setIntensity(n),n}},filter:{type:f.OBJECT,"default":new w.default,setter:function(n){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=n,this._selectedFilter.set({intensity:this._options.intensity}),n}}};t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var i;o.default(this,t);for(var u=arguments.length,e=Array(u),r=0;r<u;r++)e[r]=arguments[r];return i=h.default(this,n.call.apply(n,[this].concat(e))),i._stack.push(new f.Contrast({contrast:.63})),i._stack.push(new f.Brightness({brightness:.12})),i._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),i}return l.default(t,n),t}(v.default);u.identifier="a15";u.displayName="15";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.Desaturation({desaturation:.5})),r._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),r}return l.default(t,n),t}(v.default);u.identifier="breeze";u.displayName="Breeze";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.Grayscale),r}return c.default(t,n),t}(a.default);u.identifier="bw";u.displayName="B&W";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.Grayscale),r._stack.push(new f.Contrast({contrast:1.5})),r}return l.default(t,n),t}(v.default);u.identifier="bwhard";u.displayName="1920";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),r}return c.default(t,n),t}(a.default);u.identifier="celsius";u.displayName="Celsius";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),r}return c.default(t,n),t}(a.default);u.identifier="chest";u.displayName="Chest";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),r}return c.default(t,n),t}(a.default);u.identifier="fixie";u.displayName="Fixie";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.Saturation({saturation:1.35})),r._stack.push(new f.Contrast({contrast:1.1})),r}return l.default(t,n),t}(v.default);u.identifier="food";u.displayName="Food";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),r}return c.default(t,n),t}(a.default);u.identifier="fridge";u.displayName="Fridge";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),r}return c.default(t,n),t}(a.default);u.identifier="front";u.displayName="Front";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.Contrast({contrast:1.1})),r._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),r}return l.default(t,n),t}(v.default);u.identifier="glam";u.displayName="Glam";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.Gobblin),r}return c.default(t,n),t}(a.default);u.identifier="gobblin";u.displayName="Gobblin";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),r._stack.push(new f.Saturation({saturation:.9})),r}return l.default(t,n),t}(v.default);u.identifier="k1";u.displayName="K1";t.default=u},function(n,t,i){"use strict";function b(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=b(y),p=i(10),w=r(p);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),r._stack.push(new f.SoftColorOverlay({color:new w.default(40/255,40/255,40/255)})),r}return l.default(t,n),t}(v.default);u.identifier="k2";u.displayName="K2";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.Saturation({saturation:.5})),r}return c.default(t,n),t}(a.default);u.identifier="k6";u.displayName="K6";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),r._stack.push(new f.Saturation({saturation:.7})),r}return l.default(t,n),t}(v.default);u.identifier="kdynamic";u.displayName="KDynamic";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.Desaturation({desaturation:.4})),r._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),r}return l.default(t,n),t}(v.default);u.identifier="lenin";u.displayName="Lenin";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),r}return c.default(t,n),t}(a.default);u.identifier="lomo";u.displayName="Lomo";t.default=u},function(n,t,i){"use strict";function b(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function u(n){return n&&n.__esModule?n:{"default":n}}var f,r;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),a=i(3),v=i(4),y=u(v),p=i(5),w=b(p);f=a.Constants.OptionType;r=function(n){function t(){var i;o.default(this,t);for(var u=arguments.length,f=Array(u),r=0;r<u;r++)f[r]=arguments[r];return i=h.default(this,n.call.apply(n,[this].concat(f))),i._lutPrimitive=new w.LookupTableImage({image:i._options.image}),i._stack.push(i._lutPrimitive),i}return l.default(t,n),t}(y.default);r.prototype.availableOptions={image:{type:f.IMAGE,required:!0,setter:function(n){return this._lutPrimitive&&this._lutPrimitive.setImage(n),n}}};r.identifier="lut";r.displayName="Lookup Table";t.default=r},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),r}return c.default(t,n),t}(a.default);u.identifier="mellow";u.displayName="Mellow";t.default=u},function(n,t,i){"use strict";function d(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=d(y),p=i(34),w=r(p),b=i(10),k=r(b);u=function(n){function t(){var r,s,c;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),s=new w.default(.81582182916307155,0,0,0,-.017798101811906469,0,.80983606557377041,0,0,.0916393442622953,0,0,.45963367739324018,0,.12760574782432707,0,0,0,1,0),r._stack.push(new f.ColorMatrixPrimitive({colormatrix:s})),c=new k.default(.8,.6,.9),r._stack.push(new f.Gamma({gamma:c})),r}return l.default(t,n),t}(v.default);u.identifier="metal";u.displayName="Metal";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),r._stack.push(new f.Glow),r}return l.default(t,n),t}(v.default);u.identifier="morning";u.displayName="Morning";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var i;o.default(this,t);for(var u=arguments.length,e=Array(u),r=0;r<u;r++)e[r]=arguments[r];return i=h.default(this,n.call.apply(n,[this].concat(e))),i._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]}})),i._stack.push(new f.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]]})),i._stack.push(new f.Desaturation({desaturation:.65})),i}return l.default(t,n),t}(v.default);u.identifier="orchid";u.displayName="Orchid";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var i;o.default(this,t);for(var u=arguments.length,e=Array(u),r=0;r<u;r++)e[r]=arguments[r];return i=h.default(this,n.call.apply(n,[this].concat(e))),i._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),i._stack.push(new f.Saturation({saturation:.8})),i._stack.push(new f.Contrast({contrast:1.5})),i}return l.default(t,n),t}(v.default);u.identifier="pola";u.displayName="Pola SX";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var i;o.default(this,t);for(var u=arguments.length,e=Array(u),r=0;r<u;r++)e[r]=arguments[r];return i=h.default(this,n.call.apply(n,[this].concat(e))),i._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),i._stack.push(new f.Saturation({saturation:.8})),i._stack.push(new f.Contrast({contrast:1.5})),i}return l.default(t,n),t}(v.default);u.identifier="pola669";u.displayName="Pola 669";t.default=u},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f,s;Object.defineProperty(t,"__esModule",{value:!0});var h=i(0),e=u(h),c=i(2),l=u(c),a=i(1),v=u(a),r=i(3),y=i(7),o=u(y);f=function(n){function t(){e.default(this,t);var r=l.default(this,n.call(this));return r._fragmentSource=i(223),r}return v.default(t,n),t.prototype._applyCanvas=function(n,t,i){var e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],u=t.getCanvas(),r=i.getContext(),f=this._options.filteredCanvas;r.save();r.drawImage(u,0,0);r.globalAlpha=this._options.intensity;r.drawImage(f,0,0);r.restore()},t}(r.Engine.Filter);f.prototype.availableOptions={filteredImage:{type:"number","default":1,uniformType:"i"},filteredCanvas:{type:"object","default":null},intensity:{type:"number","default":1,uniformType:"f"}};s=function(){function n(){var t=arguments.length<=0||arguments[0]===undefined?1:arguments[0];e.default(this,n);this._intensity=t;this._stack=[];this._dirtiness={};this._renderTextures={};this._container=new r.Engine.Container;this._sprite=new r.Engine.Sprite;this._container.addChild(this._sprite);this._blendFilter=new f}return n.prototype.push=function(n){this._stack.push(n)},n.prototype.clear=function(){this._stack=[]},n.prototype.render=function(n,t,i){var u,f,s,h,e;return this._stack.length===0?o.default.resolve():(u=n.getRenderer(),this._sprite.setTexture(t),f=this._renderTextures[u.id],f||(f=this._renderTextures[u.id]=n.createRenderTexture()),s=i.getDimensions(),f.resizeTo(s),this.isDirtyForRenderer(u)&&(this._stack.forEach(function(t){return t.update(n)}),h=this._stack.map(function(n){return n.getFilter()}),this._sprite.setFilters(h),f.render(this._container),this.setDirtyForRenderer(!1,u)),this._blendFilter.setIntensity(this._intensity),u.isOfType("canvas")?this._blendFilter.setFilteredCanvas(f.getRenderTarget().getCanvas()):u.isOfType("webgl")&&(e=f.getBaseTexture(),e.setGLUnit(this._blendFilter.getFilteredImage()),u.updateTexture(e,!1)),this._sprite.setFilters([this._blendFilter]),i.clear(r.Color.WHITE),i.render(this._container),o.default.resolve(i))},n.prototype.setIntensity=function(n){this._intensity=n},n.prototype.isDirtyForRenderer=function(n){return n.id in this._dirtiness||(this._dirtiness[n.id]=!0),this._dirtiness[n.id]},n.prototype.setDirtyForRenderer=function(n,t){this._dirtiness[t.id]=n},n.prototype.setDirty=function(n){for(var t in this._dirtiness)this._dirtiness[t]=n},n.prototype.dispose=function(){for(var n in this._renderTextures)this._renderTextures[n].dispose(),delete this._renderTextures[n];this._stack.forEach(function(n){return n.dispose()});this._stack=[];this._blendFilter.dispose();this._sprite.dispose()},n}();t.default=s},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),e=r(c),l=i(2),o=r(l),a=i(1),s=r(a),v=i(3),y=i(8),p=r(y),h=i(9);u=function(n){function t(){e.default(this,t);var r=o.default(this,n.call(this));return r._fragmentSource=i(226),r}return s.default(t,n),t.prototype._applyCanvas=function(n,t,i){var c=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],u=t.getCanvas(),s=t.getContext(),h=i.getContext(),f=s.getImageData(0,0,u.width,u.height),r=this._options.brightness,e,o;if(r!==0){for(r=r*255,e=0;e<u.width*u.height;e++)o=e*4,f.data[o]+=r,f.data[o+1]+=r,f.data[o+2]+=r;h.putImageData(f,0,0)}},t}(v.Engine.Filter);u.prototype.availableOptions={brightness:{type:h.OptionType.NUMBER,"default":0,uniformType:h.UniformType.FLOAT}};f=function(n){function t(){var r;e.default(this,t);for(var f=arguments.length,s=Array(f),i=0;i<f;i++)s[i]=arguments[i];return r=o.default(this,n.call.apply(n,[this].concat(s))),r._filter=new u,r}return s.default(t,n),t.prototype.update=function(){this._filter.setBrightness(this._options.brightness)},t}(p.default);f.prototype.availableOptions=u.prototype.availableOptions;t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),o=r(c),l=i(2),s=r(l),a=i(1),h=r(a),u=i(3),v=i(8),y=r(v),p=i(10),w=r(p),b=i(34),k=r(b);var d=u.Constants.OptionType,g=u.Constants.UniformType,f=function(n){function t(){o.default(this,t);var r=s.default(this,n.call(this));return r._fragmentSource=i(227),r}return h.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var f,l=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],e=t.getCanvas(),s=t.getContext(),h=i.getContext(),u=s.getImageData(0,0,e.width,e.height),c=this._options.colormatrix,r=new w.default(0,0,0,0),o=0;o<e.width*e.height;o++)f=o*4,r.r=u.data[f],r.g=u.data[f+1],r.b=u.data[f+2],r.a=u.data[f+3],r=c.apply(r),u.data[f]=r.r,u.data[f+1]=r.g,u.data[f+2]=r.b,u.data[f+3]=r.a;h.putImageData(u,0,0)},t}(u.Engine.Filter);f.prototype.availableOptions={colormatrix:{type:d.COLOR_MATRIX,"default":new k.default,uniformType:g.MAT4}};e=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(e))),r._filter=new f,r}return h.default(t,n),t.prototype.update=function(){this._filter.setColormatrix(this._options.colormatrix)},t}(y.default);e.prototype.availableOptions=f.prototype.availableOptions;t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),o=r(c),l=i(2),s=r(l),a=i(1),h=r(a),u=i(3),v=i(8),y=r(v);var p=u.Constants.OptionType,w=u.Constants.UniformType,f=function(n){function t(){o.default(this,t);var r=s.default(this,n.call(this));return r._fragmentSource=i(228),r}return h.default(t,n),t.prototype._applyCanvas=function(n,t,i){var c=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=t.getCanvas(),s=t.getContext(),h=i.getContext(),r=s.getImageData(0,0,f.width,f.height),e=this._options.contrast,o,u;if(e!==1){for(o=0;o<f.width*f.height;o++)u=o*4,r.data[u]=(r.data[u]-127)*e+127,r.data[u+1]=(r.data[u+1]-127)*e+127,r.data[u+2]=(r.data[u+2]-127)*e+127;h.putImageData(r,0,0)}},t}(u.Engine.Filter);f.prototype.availableOptions={contrast:{type:p.NUMBER,"default":1,uniformType:w.FLOAT}};e=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(e))),r._filter=new f,r}return h.default(t,n),t.prototype.update=function(){this._filter.setContrast(this._options.contrast)},t}(y.default);e.prototype.availableOptions=f.prototype.availableOptions;t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),e=r(c),l=i(2),o=r(l),a=i(1),s=r(a),v=i(12),y=r(v),p=i(8),w=r(p),h=i(9);u=function(n){function t(){e.default(this,t);var r=o.default(this,n.call(this));return r._fragmentSource=i(229),r}return s.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var u,o,l=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],e=t.getCanvas(),h=t.getContext(),c=i.getContext(),r=h.getImageData(0,0,e.width,e.height),f=this._options.desaturation,s=0;s<e.width*e.height;s++)u=s*4,o=r.data[u]*.3+r.data[u+1]*.59+r.data[u+2]*.11,r.data[u]=o*(1-f)+r.data[u]*f,r.data[u+1]=o*(1-f)+r.data[u+1]*f,r.data[u+2]=o*(1-f)+r.data[u+2]*f;c.putImageData(r,0,0)},t}(y.default.Filter);u.prototype.availableOptions={desaturation:{type:h.OptionType.NUMBER,"default":1,uniformType:h.UniformType.FLOAT}};f=function(n){function t(){var r;e.default(this,t);for(var f=arguments.length,s=Array(f),i=0;i<f;i++)s[i]=arguments[i];return r=o.default(this,n.call.apply(n,[this].concat(s))),r._filter=new u,r}return s.default(t,n),t.prototype.update=function(){this._filter.setDesaturation(this._options.desaturation)},t}(w.default);f.prototype.availableOptions=u.prototype.availableOptions;t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),o=r(c),l=i(2),s=r(l),a=i(1),h=r(a),u=i(3),v=i(8),y=r(v),p=i(10),w=r(p);var b=u.Constants.OptionType,k=u.Constants.UniformType,f=function(n){function t(){o.default(this,t);var r=s.default(this,n.call(this));return r._fragmentSource=i(230),r}return h.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var l,f,a,e,h,u,w=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],o=t.getCanvas(),y=t.getContext(),p=i.getContext(),r=y.getImageData(0,0,o.width,o.height),c=this._options.gamma,v=new Float32Array(256),s=0;s<256;s++)v[s]=255*Math.pow(s/255,c.r);for(l=new Float32Array(256),f=0;f<256;f++)l[f]=255*Math.pow(f/255,c.g);for(a=new Float32Array(256),e=0;e<256;e++)a[e]=255*Math.pow(e/255,c.b);for(h=0;h<o.width*o.height;h++)u=h*4,r.data[u]=v[r.data[u]],r.data[u+1]=l[r.data[u+1]],r.data[u+2]=a[r.data[u+2]];p.putImageData(r,0,0)},t}(u.Engine.Filter);f.prototype.availableOptions={gamma:{type:b.COLOR,"default":w.default.WHITE,uniformType:k.FLOAT3}};e=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(e))),r._filter=new f,r}return h.default(t,n),t.prototype.update=function(){this._filter.setGamma(this._options.gamma)},t}(y.default);e.prototype.availableOptions=f.prototype.availableOptions;t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),o=r(c),l=i(2),s=r(l),a=i(1),h=r(a),v=i(8),y=r(v),p=i(10),w=r(p),u=i(3);var b=u.Constants.OptionType,k=u.Constants.UniformType,f=function(n){function t(){o.default(this,t);var r=s.default(this,n.call(this));return r._fragmentSource=i(231),r}return h.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var o,k=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],u=t.getCanvas(),a=t.getContext(),v=i.getContext(),r=a.getImageData(0,0,u.width,u.height),h=this._options.color,e,s=0;s<u.width;s++)for(o=0;o<u.height;o++){var f=(u.width*o+s)*4,y=s/u.width,p=o/u.height,c=(y-.5)/.75,l=(p-.5)/.75,w=c*c,b=l*l;e=1-(w+b);e=Math.min(Math.max(e,.1),1);r.data[f]=r.data[f]*e*h.r;r.data[f+1]=r.data[f+1]*e*h.g;r.data[f+2]=r.data[f+2]*e*h.b;r.data[f+3]=255}v.putImageData(r,0,0)},t}(u.Engine.Filter);f.prototype.availableOptions={color:{type:b.COLOR,"default":w.default.WHITE,uniformType:k.FLOAT3}};e=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(e))),r._filter=new f,r}return h.default(t,n),t.prototype.update=function(){this._filter.setColor(this._options.color)},t}(y.default);e.prototype.availableOptions=f.prototype.availableOptions;t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var o,s;Object.defineProperty(t,"__esModule",{value:!0});var h=i(0),u=r(h),c=i(2),f=r(c),l=i(1),e=r(l),a=i(12),v=r(a),y=i(8),p=r(y);o=function(n){function t(){u.default(this,t);var r=f.default(this,n.call(this));return r._fragmentSource=i(232),r}return e.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var e,u,c=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=t.getCanvas(),s=t.getContext(),h=i.getContext(),r=s.getImageData(0,0,f.width,f.height),o=0;o<f.width;o++)for(e=0;e<f.height;e++)u=(f.width*e+o)*4,r.data[u+2]=r.data[u+1]*.33,r.data[u]=r.data[u]*.6,r.data[u+2]+=r.data[u]*.33,r.data[u+1]=r.data[u+1]*.7,r.data[u+3]=255;h.putImageData(r,0,0)},t}(v.default.Filter);s=function(n){function t(){var r;u.default(this,t);for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return r=f.default(this,n.call.apply(n,[this].concat(s))),r._filter=new o,r}return e.default(t,n),t}(p.default);t.default=s},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var o,s;Object.defineProperty(t,"__esModule",{value:!0});var h=i(0),u=r(h),c=i(2),f=r(c),l=i(1),e=r(l),a=i(12),v=r(a),y=i(8),p=r(y);o=function(n){function t(){u.default(this,t);var r=f.default(this,n.call(this));return r._fragmentSource=i(233),r}return e.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var e,u,o,l=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=t.getCanvas(),h=t.getContext(),c=i.getContext(),r=h.getImageData(0,0,f.width,f.height),s=0;s<f.width;s++)for(e=0;e<f.height;e++)u=(f.width*e+s)*4,o=r.data[u]*.2125+r.data[u+1]*.7154+r.data[u+2]*.0721,r.data[u]=o,r.data[u+1]=o,r.data[u+2]=o;c.putImageData(r,0,0)},t}(v.default.Filter);s=function(n){function t(){var r;u.default(this,t);for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return r=f.default(this,n.call.apply(n,[this].concat(s))),r._filter=new o,r}return e.default(t,n),t}(p.default);t.default=s},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var e,o,s;Object.defineProperty(t,"__esModule",{value:!0});var v=i(0),h=u(v),y=i(2),c=u(y),p=i(1),l=u(p),r=i(3),w=i(12),a=u(w),b=i(8),k=u(b),f=i(9);e=3;o=function(n){function t(){h.default(this,t);var r=c.default(this,n.call(this));return r._fragmentSource=i(234),r}return l.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var w,b,vt=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],p=t.getCanvas(),nt=t.getContext(),tt=i.getContext(),e=this._options.lookupTableImage,it=this._createImageCanvas(e),rt=it.getContext("2d"),f=nt.getImageData(0,0,p.width,p.height),o=rt.getImageData(0,0,e.width,e.height),l=new r.Vector2,a=new r.Vector2,v=new r.Vector2,y=new r.Vector2,u=0;u<p.width*p.height*4;u+=4){var ut=f.data[u],ft=f.data[u+1],et=f.data[u+2],s=f.data[u+3]/255,h=f.data[u+2]/255*63;l.y=(h|0)/8|0;l.x=(h|0)-l.y*8;a.y=(h|1)/8|0;a.x=(h|1)-a.y*8;v.x=l.x*.125+.5/512+(.125-1/512)*f.data[u]/255;v.y=l.y*.125+.5/512+(.125-1/512)*f.data[u+1]/255;y.x=a.x*.125+.5/512+(.125-1/512)*f.data[u]/255;y.y=a.y*.125+.5/512+(.125-1/512)*f.data[u+1]/255;v.multiply(e.width,e.height).round();y.multiply(e.width,e.height).round();var k=(e.width*v.y+v.x)*4|0,d=(e.width*y.y+y.x)*4|0,ot=o.data[k],st=o.data[k+1],ht=o.data[k+2],ct=o.data[d],lt=o.data[d+1],at=o.data[d+2],c=h-(h|0),g=ot*(1-c)+ct*c;g=ut*(1-s)+g*s;w=st*(1-c)+lt*c;w=ft*(1-s)+w*s;b=ht*(1-c)+at*c;b=et*(1-s)+b*s;f.data[u]=g;f.data[u+1]=w;f.data[u+2]=b}tt.putImageData(f,0,0)},t.prototype._createImageCanvas=function(n){var t=r.Utils.createCanvas(),i;return t.width=n.width,t.height=n.height,i=t.getContext("2d"),i.drawImage(n,0,0),t},t}(a.default.Filter);o.prototype.availableOptions={lookupTable:{type:f.OptionType.NUMBER,"default":e,uniformType:f.UniformType.INT},lookupTableImage:{type:f.OptionType.IMAGE,uniformType:null}};s=function(n){function t(){var r;h.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=c.default(this,n.call.apply(n,[this].concat(f))),r._filter=new o,r._textures=[],r}return l.default(t,n),t.prototype.update=function(n){var t=n.getRenderer();t.isOfType("webgl")?this._updateWebGLTexture(n):t.isOfType("canvas")&&this._filter.setLookupTableImage(this._options.image)},t.prototype._updateWebGLTexture=function(n){var r=n.getRenderer(),i=r.id,t;this._textures[i]||(this._textures[i]=new a.default.BaseTexture);t=this._textures[i];t.setSource(this._options.image);t.setGLUnit(e);r.updateTexture(t)},t.prototype.dispose=function(){n.prototype.dispose.call(this);for(var t in this._textures)delete this._textures[t]},t}(k.default);s.prototype.availableOptions={image:{type:f.OptionType.IMAGE}};t.default=s},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),o=r(c),l=i(2),s=r(l),a=i(1),h=r(a),v=i(8),y=r(v),u=i(3);var p=u.Constants.OptionType,w=u.Constants.UniformType,f=function(n){function t(){o.default(this,t);var r=s.default(this,n.call(this));return r._fragmentSource=i(236),r}return h.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var o,u,s,a=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],e=t.getCanvas(),c=t.getContext(),l=i.getContext(),r=c.getImageData(0,0,e.width,e.height),f=this._options.saturation,h=0;h<e.width;h++)for(o=0;o<e.height;o++)u=(e.width*o+h)*4,s=r.data[u]*.2125+r.data[u+1]*.7154+r.data[u+2]*.0721,r.data[u]=s*(1-f)+r.data[u]*f,r.data[u+1]=s*(1-f)+r.data[u+1]*f,r.data[u+2]=s*(1-f)+r.data[u+2]*f;l.putImageData(r,0,0)},t}(u.Engine.Filter);f.prototype.availableOptions={saturation:{type:p.NUMBER,"default":0,uniformType:w.FLOAT}};e=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(e))),r._filter=new f,r}return h.default(t,n),t.prototype.update=function(){this._filter.setSaturation(this._options.saturation)},t}(y.default);e.prototype.availableOptions=f.prototype.availableOptions;t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),o=r(c),l=i(2),s=r(l),a=i(1),h=r(a),v=i(8),y=r(v),p=i(10),w=r(p),u=i(3);var b=u.Constants.OptionType,k=u.Constants.UniformType,f=function(n){function t(){o.default(this,t);var r=s.default(this,n.call(this));return r._fragmentSource=i(237),r}return h.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var e,u,c=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=t.getCanvas(),s=t.getContext(),h=i.getContext(),r=s.getImageData(0,0,f.width,f.height),o=0;o<f.width;o++)for(e=0;e<f.height;e++)u=(f.width*e+o)*4,r.data[u]=Math.max(this._options.color.r*255,r.data[u]),r.data[u+1]=Math.max(this._options.color.g*255,r.data[u+1]),r.data[u+2]=Math.max(this._options.color.b*255,r.data[u+2]);h.putImageData(r,0,0)},t}(u.Engine.Filter);f.prototype.availableOptions={color:{type:b.COLOR,"default":w.default.WHITE,uniformType:k.FLOAT3}};e=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(e))),r._filter=new f,r}return h.default(t,n),t.prototype.update=function(){this._filter.setColor(this._options.color)},t}(y.default);e.prototype.availableOptions=f.prototype.availableOptions;t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(81),v=r(a),y=i(3);u=y.Constants.OptionType;f=function(n){function t(){var i;o.default(this,t);for(var u=arguments.length,f=Array(u),r=0;r<u;r++)f[r]=arguments[r];return i=h.default(this,n.call.apply(n,[this].concat(f))),i._options.rgbControlPoints||(i._options.rgbControlPoints={red:i._options.controlPoints,green:i._options.controlPoints,blue:i._options.controlPoints}),i._updateLookupTable(),i}return l.default(t,n),t.prototype._updateLookupTable=function(){var n=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),i=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(n,t,i)},t.prototype._buildLookupTable=function(n,t,i){for(var u=[],r=0;r<256;r++)u.push(Math.min(Math.max(r+n[r],0),255)),u.push(Math.min(Math.max(r+t[r],0),255)),u.push(Math.min(Math.max(r+i[r],0),255)),u.push(255);return u},t.prototype._calculateSplineCurve=function(n){var i,u,t,f;if(n=n.sort(function(n,t){return n[0]>t[0]}),i=this._getSplineCurve(n),u=i[0],u[0]>0)for(t=0;t<u[0];t++)i.unshift([0,0]);for(f=[],t=0;t<i.length;t++){var r=i[t],e=[r[0],r[0]],o=Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2));e[1]>r[1]&&(o=-o);f.push(o)}return f},t.prototype._getSplineCurve=function(n){for(var c=this._secondDerivative(n),l=c.length,h=[],r,i,u,f,t=0;t<l;t++)h[t]=c[t];for(r=[],t=0;t<l-1;t++)for(i=n[t],u=n[t+1],f=i[0];f<u[0];f++){var a=(f-i[0])/(u[0]-i[0]),e=1-a,o=a,v=u[0]-i[0],s=e*i[1]+o*u[1]+v*v/6*((e*e*e-e)*h[t]+(o*o*o-o)*h[t+1]);s>255?s=255:s<0&&(s=0);r.push([f,s])}return r.length===255&&r.push(n[n.length-1]),r},t.prototype._secondDerivative=function(n){var u=n.length,i,r,t,f,h;if(u<=0||u===1)return null;for(i=[],r=[],i[0]=[0,1,0],t=1;t<u-1;t++){var o=n[t-1],e=n[t],s=n[t+1];i[t]=i[t]||[];i[t][0]=(e[0]-o[0])/6;i[t][1]=(s[0]-o[0])/3;i[t][2]=(s[0]-e[0])/6;r[t]=(s[1]-e[1])/(s[0]-e[0])-(e[1]-o[1])/(e[0]-o[0])}for(r[0]=0,r[u-1]=0,i[u-1]=[0,1,0],t=1;t<u;t++)f=i[1][0]/i[t-1][1],i[t][1]-=f*i[t-1][2],i[t][0]=0,r[t]-=f*r[t-1];for(t=u-2;t>0;t--)f=i[t][2]/i[t+1][1],i[t][1]-=f*i[t+1][0],i[t][2]=0,r[t]-=f*r[t+1];for(h=[],t=0;t<u;t++)h[t]=r[t]/i[t][1];return h},t}(v.default);f.prototype.availableOptions={rgbControlPoints:{type:u.OBJECT},controlPoints:{type:u.ARRAY,"default":[]}};t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var o,s;Object.defineProperty(t,"__esModule",{value:!0});var h=i(0),u=r(h),c=i(2),f=r(c),l=i(1),e=r(l),a=i(12),v=r(a),y=i(8),p=r(y);o=function(n){function t(){u.default(this,t);var r=f.default(this,n.call(this));return r._fragmentSource=i(238),r}return e.default(t,n),t.prototype._applyCanvas=function(n,t,i){for(var o,f,r,l=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],e=t.getCanvas(),h=t.getContext(),c=i.getContext(),u=h.getImageData(0,0,e.width,e.height),s=0;s<e.width;s++)for(o=0;o<e.height;o++)f=(e.width*o+s)*4,r=u.data[f]/255*.3+u.data[f+1]/255*.3+u.data[f+2]/255*.3,r-=.2,r=Math.max(0,Math.min(1,r)),r+=.15,r*=1.4,r*=255,u.data[f]=r,u.data[f+1]=r,u.data[f+2]=r;c.putImageData(u,0,0)},t}(v.default.Filter);s=function(n){function t(){var r;u.default(this,t);for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return r=f.default(this,n.call.apply(n,[this].concat(s))),r._filter=new o,r}return e.default(t,n),t}(p.default);t.default=s},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.Desaturation({desaturation:.65})),r._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),r}return l.default(t,n),t}(v.default);u.identifier="quozi";u.displayName="Quozi";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),r._stack.push(new f.Glow),r}return l.default(t,n),t}(v.default);u.identifier="semired";u.displayName="Semired";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(4),v=r(a),y=i(5),f=p(y);u=function(n){function t(){var r;o.default(this,t);for(var u=arguments.length,e=Array(u),i=0;i<u;i++)e[i]=arguments[i];return r=h.default(this,n.call.apply(n,[this].concat(e))),r._stack.push(new f.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]}})),r._stack.push(new f.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]]})),r}return l.default(t,n),t}(v.default);u.identifier="sunny";u.displayName="Sunny";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),r}return c.default(t,n),t}(a.default);u.identifier="texas";u.displayName="Texas";t.default=u},function(n,t,i){"use strict";function p(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(4),a=r(l),v=i(5),y=p(v);u=function(n){function t(){var r;e.default(this,t);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=s.default(this,n.call.apply(n,[this].concat(f))),r._stack.push(new y.X400),r}return c.default(t,n),t}(a.default);u.identifier="x400";u.displayName="X400";t.default=u},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),r=i(3),a=i(49),v=u(a);f=function(n){function t(){var u;o.default(this,t);for(var e=arguments.length,s=Array(e),f=0;f<e;f++)s[f]=arguments[f];return u=h.default(this,n.call.apply(n,[this].concat(s))),u._fragmentSource=i(220),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastStart=new r.Vector2,u._lastEnd=new r.Vector2,u._blurredRenderTarget=new r.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new r.Engine.CanvasRenderTarget(100,100,1),u}return l.default(t,n),t.prototype._applyCanvas=function(n,t,i){var e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=t.getDimensions(),u=!this._blurredRenderTarget.getDimensions().equals(f);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio());this._blurredRenderTarget.resizeTo(t.getDimensions());this._maskRenderTarget.setPixelRatio(t.getPixelRatio());this._maskRenderTarget.resizeTo(t.getDimensions());this._outputRenderTexture||(this._outputRenderTexture=new r.Engine.RenderTexture(n,t.getWidth(),t.getHeight(),t.getPixelRatio()));this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!u||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size);(this._lastBlurRadius!==this._options.blurRadius||u)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius);this._applyMask(t,i)},t.prototype._blurImage=function(n){var t=n.getCanvas(),u=n.getContext(),i=u.getImageData(0,0,t.width,t.height),r;v.default.stackBlurCanvasRGBA(i,0,0,t.width,t.height,this._options.blurRadius);r=this._blurredRenderTarget.getContext();r.putImageData(i,0,0)},t.prototype._renderMask=function(){var i=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),l=this._maskRenderTarget.getPixelRatio(),a=new r.Vector2(i.width,i.height),u=this._options.size*l,n=this._options.gradientSize*l,o=this._options.start.clone(),v=this._options.end.clone();o.multiply(a);v.multiply(a);var s=v.clone().subtract(o),y=o.clone().add(s.clone().divide(2)),w=s.len(),f=s.clone().divide(w),h=y.clone().add((u+n)*f.y,-(u+n)*f.x),c=y.clone().add(-(u+n)*f.y,(u+n)*f.x),t=e.createLinearGradient(h.x,h.y,c.x,c.y),p=c.clone().subtract(h).len();t.addColorStop(0,"#000000");t.addColorStop(n/2/p,"#FFFFFF");t.addColorStop(1-n/2/p,"#FFFFFF");t.addColorStop(1,"#000000");e.fillStyle=t;e.fillRect(0,0,i.width,i.height)},t.prototype._applyMask=function(n,t){for(var s=t.getContext(),r=n.getCanvas(),h=n.getContext(),c=this._blurredRenderTarget.getContext(),l=this._maskRenderTarget.getContext(),o=h.getImageData(0,0,r.width,r.height),f=o.data,e=c.getImageData(0,0,r.width,r.height).data,a=l.getImageData(0,0,r.width,r.height).data,u=void 0,i=0;i<r.width*r.height*4;i+=4)u=a[i]/255,f[i]=u*f[i]+(1-u)*e[i],f[i+1]=u*f[i+1]+(1-u)*e[i+1],f[i+2]=u*f[i+2]+(1-u)*e[i+2];s.putImageData(o,0,0)},t}(r.Engine.Filter);f.prototype.availableOptions={blurRadius:{type:"number","default":30,uniformType:"f"},size:{type:"number","default":50,uniformType:"f"},gradientSize:{type:"number","default":50,uniformType:"f"},start:{type:"vector2","default":new r.Vector2(0,.5),uniformType:"2f"},end:{type:"vector2","default":new r.Vector2(1,.5),uniformType:"2f"},delta:{type:"vector2","default":new r.Vector2(1,1),uniformType:"2f"},texSize:{type:"vector2","default":new r.Vector2(100,100),uniformType:"2f"}};t.default=f},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),s=i(2),h=u(s),c=i(1),l=u(c),r=i(3),a=i(49),v=u(a);f=function(n){function t(){var u;o.default(this,t);for(var e=arguments.length,s=Array(e),f=0;f<e;f++)s[f]=arguments[f];return u=h.default(this,n.call.apply(n,[this].concat(s))),u._fragmentSource=i(221),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastPosition=new r.Vector2,u._blurredRenderTarget=new r.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new r.Engine.CanvasRenderTarget(100,100,1),u}return l.default(t,n),t.prototype._applyCanvas=function(n,t,i){var e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=t.getDimensions(),u=!this._blurredRenderTarget.getDimensions().equals(f);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio());this._blurredRenderTarget.resizeTo(t.getDimensions());this._maskRenderTarget.setPixelRatio(t.getPixelRatio());this._maskRenderTarget.resizeTo(t.getDimensions());this._outputRenderTexture||(this._outputRenderTexture=new r.Engine.RenderTexture(n,t.getWidth(),t.getHeight(),t.getPixelRatio()));(!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||u)&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius);(this._lastBlurRadius!==this._options.blurRadius||u)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius);this._applyMask(t,i)},t.prototype._blurImage=function(n){var t=n.getCanvas(),u=n.getContext(),i=u.getImageData(0,0,t.width,t.height),r;v.default.stackBlurCanvasRGBA(i,0,0,t.width,t.height,this._options.blurRadius);r=this._blurredRenderTarget.getContext();r.putImageData(i,0,0)},t.prototype._renderMask=function(){var f=this._maskRenderTarget.getCanvas(),i=this._maskRenderTarget.getContext(),e=new r.Vector2(f.width,f.height),o=this._maskRenderTarget.getPixelRatio(),s=this._options,u=s.radius,h=s.gradientRadius,n=this._options.position.clone().multiply(this._options.texSize).multiply(o),t=i.createRadialGradient(n.x,n.y,0,n.x,n.y,(u+h)*o);t.addColorStop(0,"#FFFFFF");t.addColorStop(u/(u+h),"#FFFFFF");t.addColorStop(1,"#000000");i.fillStyle=t;i.fillRect(0,0,e.x,e.y)},t.prototype._applyMask=function(n,t){for(var s=t.getContext(),r=n.getCanvas(),h=n.getContext(),c=this._blurredRenderTarget.getContext(),l=this._maskRenderTarget.getContext(),o=h.getImageData(0,0,r.width,r.height),f=o.data,e=c.getImageData(0,0,r.width,r.height).data,a=l.getImageData(0,0,r.width,r.height).data,u=void 0,i=0;i<r.width*r.height*4;i+=4)u=a[i]/255,f[i]=u*f[i]+(1-u)*e[i],f[i+1]=u*f[i+1]+(1-u)*e[i+1],f[i+2]=u*f[i+2]+(1-u)*e[i+2];s.putImageData(o,0,0)},t}(r.Engine.Filter);f.prototype.availableOptions={blurRadius:{type:"number","default":30,uniformType:"f"},radius:{type:"number","default":50,uniformType:"f"},gradientRadius:{type:"number","default":25,uniformType:"f"},position:{type:"vector2","default":new r.Vector2(.5,.5),uniformType:"2f"},delta:{type:"vector2","default":new r.Vector2(1,1),uniformType:"2f"},texSize:{type:"vector2","default":new r.Vector2(100,100),uniformType:"2f"}};t.default=f},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f,e;Object.defineProperty(t,"__esModule",{value:!0});var h=i(0),c=u(h),l=i(2),a=u(l),v=i(1),y=u(v),r=i(3),p=i(11),w=u(p),b=i(7),s=u(b),k=i(165),o=u(k);f=r.Constants.OptionType;e=function(n){function t(){var i;c.default(this,t);for(var f=arguments.length,e=Array(f),u=0;u<f;u++)e[u]=arguments[u];i=a.default(this,n.call.apply(n,[this].concat(e)));i._lastBlurRadius=i._options.blurRadius;i._lastSize=i._options.size;i._lastGradientSize=i._options.gradientSize;i._horizontalFilter=new o.default;i._verticalFilter=new o.default;i._sprite.setFilters([i._horizontalFilter,i._verticalFilter]);i._horizontalFilter.setDelta(new r.Vector2(1,1));i._verticalFilter.setDelta(new r.Vector2(-1,1));i._onOperationUpdate=i._onOperationUpdate.bind(i);i._sdk.on(r.Constants.Events.OPERATION_UPDATED,i._onOperationUpdate);return i._filter=new o.default,i}return y.default(t,n),t.prototype._onOperationUpdate=function(n,t){var i=n.constructor.identifier;i==="orientation"&&"rotation"in t&&this._applyRotation(n,t);i==="orientation"&&("flipHorizontally"in t||"flipVertically"in t)&&this._applyFlip(n,t)},t.prototype._applyRotation=function(n,t){var u=n.getRotation(),f=t.rotation,e=f-u,i=this._options.start,r=this._options.end;e===90||u===270&&f===0?(i.flip(),i.x=1-i.x,r.flip(),r.x=1-r.x):(e===-90||u===-270&&f===0)&&(i.flip(),i.y=1-i.y,r.flip(),r.y=1-r.y);this.set({start:i,end:r})},t.prototype._applyFlip=function(n,t){"flipVertically"in t&&n.getFlipVertically()!==t.flipVertically&&this._applyFlipDirection(n,"vertical");"flipHorizontally"in t&&n.getFlipHorizontally()!==t.flipHorizontally&&this._applyFlipDirection(n,"horizontal")},t.prototype._applyFlipDirection=function(n,t){var u=n.getRotation(),i,r;(u===90||u===270)&&(t=t==="vertical"?"horizontal":"vertical");i=this._options.start;r=this._options.end;switch(t){case"horizontal":i.x=1-i.x;r.x=1-r.x;break;case"vertical":i.y=1-i.y;r.y=1-r.y}this.set({start:i,end:r})},t.prototype._renderWebGL=function(n){var t=n.getDimensions(),r=this._options.start.clone(),u=this._options.end.clone();r.multiply(t);u.multiply(t);var i=this._options,e=i.blurRadius,o=i.size,h=i.gradientSize,f={blurRadius:e,size:o,gradientSize:h,start:r,end:u,texSize:t};return this._horizontalFilter.set(f),this._verticalFilter.set(f),this._renderTexture.render(this._container),s.default.resolve()},t.prototype._renderCanvas=function(n){var i=n.getDimensions(),t=this._options,r=t.blurRadius,u=t.size,f=t.gradientSize,e=t.start,o=t.end;return this._filter.set({blurRadius:r,gradientSize:f,size:u,start:e,end:o,texSize:i}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),s.default.resolve()},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose();this._sdk.off(r.Constants.Events.OPERATION_UPDATED,this._onOperationUpdate)},t}(w.default);e.identifier="linear-focus";e.prototype.availableOptions={start:{type:f.VECTOR2,"default":new r.Vector2(0,.5)},end:{type:f.VECTOR2,"default":new r.Vector2(1,.5)},blurRadius:{type:f.NUMBER,"default":30},size:{type:f.NUMBER,"default":50},gradientSize:{type:f.NUMBER,"default":50}};t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=r(e),s=i(2),h=r(s),c=i(1),l=r(c),a=i(3),v=i(7),y=r(v),p=i(19),w=r(p),b=i(11),k=r(b);u=a.Constants.OptionType;f=function(n){function t(){return o.default(this,t),h.default(this,n.apply(this,arguments))}return l.default(t,n),t.prototype._render=function(){var t=this._options.rotation%360,i=t*(Math.PI/180),n;return this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(i),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform(),n=this._sprite.getBounds(),this._renderTexture.resizeTo(new w.default(n.width,n.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),y.default.resolve()},t.prototype.getNewDimensions=function(n){return n=n.clone(),this._options.rotation%180&&n.flip(),n},t}(k.default);f.identifier="orientation";f.prototype.availableOptions={rotation:{type:u.NUMBER,"default":0,validation:function(n){if(n%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.");},setter:function(n){return n%360}},flipVertically:{type:u.BOOLEAN,"default":!1},flipHorizontally:{type:u.BOOLEAN,"default":!1}};t.default=f},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f,e;Object.defineProperty(t,"__esModule",{value:!0});var h=i(0),c=u(h),l=i(2),a=u(l),v=i(1),y=u(v),r=i(3),p=i(11),w=u(p),b=i(7),s=u(b),k=i(166),o=u(k);f=r.Constants.OptionType;e=function(n){function t(){var i;c.default(this,t);for(var f=arguments.length,e=Array(f),u=0;u<f;u++)e[u]=arguments[u];i=a.default(this,n.call.apply(n,[this].concat(e)));i._lastBlurRadius=i._options.blurRadius;i._lastGradientRadius=i._options.gradientRadius;i._horizontalFilter=new o.default;i._verticalFilter=new o.default;i._sprite.setFilters([i._horizontalFilter,i._verticalFilter]);i._horizontalFilter.setDelta(new r.Vector2(1,1));i._verticalFilter.setDelta(new r.Vector2(-1,1));i._onOperationUpdate=i._onOperationUpdate.bind(i);i._sdk.on(r.Constants.Events.OPERATION_UPDATED,i._onOperationUpdate);return i._filter=new o.default,i}return y.default(t,n),t.prototype._onOperationUpdate=function(n,t){var i=n.constructor.identifier;i==="orientation"&&"rotation"in t&&this._applyRotation(n,t);i==="orientation"&&("flipHorizontally"in t||"flipVertically"in t)&&this._applyFlip(n,t)},t.prototype._applyRotation=function(n,t){var r=n.getRotation(),u=t.rotation,f=u-r,i=this._options.position;f===90||r===270&&u===0?(i.flip(),i.x=1-i.x):(f===-90||r===-270&&u===0)&&(i.flip(),i.y=1-i.y);this.set({position:i})},t.prototype._applyFlip=function(n,t){"flipVertically"in t&&n.getFlipVertically()!==t.flipVertically&&this._applyFlipDirection(n,"vertical");"flipHorizontally"in t&&n.getFlipHorizontally()!==t.flipHorizontally&&this._applyFlipDirection(n,"horizontal")},t.prototype._applyFlipDirection=function(n,t){var r=n.getRotation(),i;(r===90||r===270)&&(t=t==="vertical"?"horizontal":"vertical");i=this._options.position;switch(t){case"horizontal":i.x=1-i.x;break;case"vertical":i.y=1-i.y}this.set({position:i})},t.prototype._renderWebGL=function(n){var i=n.getDimensions(),r=this._options.position.clone();r.multiply(i);var t=this._options,f=t.blurRadius,e=t.radius,o=t.gradientRadius,u={blurRadius:f,radius:e,gradientRadius:o,position:r,texSize:i};return this._horizontalFilter.set(u),this._verticalFilter.set(u),this._renderTexture.render(this._container),s.default.resolve()},t.prototype._renderCanvas=function(n){var t=this._options,i=t.blurRadius,r=t.radius,u=t.gradientRadius,f=t.position,e=n.getDimensions();return this._filter.set({blurRadius:i,radius:r,gradientRadius:u,position:f,texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),s.default.resolve()},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._filter.dispose();this._verticalFilter.dispose();this._horizontalFilter.dispose();this._sdk.off(r.Constants.Events.OPERATION_UPDATED,this._onOperationUpdate)},t}(w.default);e.identifier="radial-focus";e.prototype.availableOptions={position:{type:f.VECTOR2,"default":new r.Vector2(.5,.5)},radius:{type:f.NUMBER,"default":50},gradientRadius:{type:f.NUMBER,"default":25},blurRadius:{type:f.NUMBER,"default":20}};t.default=e},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var h,u;Object.defineProperty(t,"__esModule",{value:!0});var c=i(0),l=r(c),a=i(2),v=r(a),y=i(1),p=r(y),f=i(3),w=i(11),b=r(w),k=i(35),d=r(k),g=i(174),e=r(g),nt=i(175),o=r(nt),tt=i(171),s=r(tt);h=f.Constants.OptionType;u=function(n){function t(){var i,o;l.default(this,t);for(var u=arguments.length,e=Array(u),r=0;r<u;r++)e[r]=arguments[r];i=v.default(this,n.call.apply(n,[this].concat(e)));i._renderers={};i._onOperationUpdate=i._onOperationUpdate.bind(i);i._onSpriteUpdate=i._onSpriteUpdate.bind(i);i._sdk.on(f.Constants.Events.OPERATION_UPDATED,i._onOperationUpdate);return o=i._options.sprites.slice(),o.forEach(function(n){i.removeSprite(n);i.addSprite(n)}),i}return p.default(t,n),t.prototype.getSpritesOfType=function(n){return this._options.sprites.filter(function(t){return t instanceof n})},t.prototype._onOperationUpdate=function(n,t){var i=n.constructor.identifier;i==="crop"&&"start"in t&&"end"in t&&this._applyCrop(n,t);i==="orientation"&&("rotation"in t&&this._applyRotation(n,t),"flipVertically"in t&&n.getFlipVertically()!==t.flipVertically&&this._applyFlip(n,"vertical"),"flipHorizontally"in t&&n.getFlipHorizontally()!==t.flipHorizontally&&this._applyFlip(n,"horizontal"))},t.prototype._applyFlip=function(n,t){var r=this,i=n.getRotation();(i===90||i===270)&&(t=t==="vertical"?"horizontal":"vertical");this._options.sprites.forEach(function(n){n.applyFlip(r._sdk,t)})},t.prototype._onSpriteUpdate=function(){this.setDirty(!0)},t.prototype._applyRotation=function(n,t){var i=n.getRotation(),r=t.rotation,u=r-i,f=this._sdk.getFinalDimensions();this._options.sprites.forEach(function(n){var e=n.getRotation()*180/Math.PI,t,o,s;e+=u;n.setRotation(e*Math.PI/180);t=n.getPosition().clone();u===90||i===270&&r===0?(o=t.x,t.x=f.y-t.y,t.y=o):(u===-90||i===-270&&r===0)&&(s=t.y,t.y=f.x-t.x,t.x=s);n.setPosition(t)})},t.prototype._applyCrop=function(n,t){var i=this._sdk.getInputDimensions(),r=n.getStart(),u=t.start;this._options.sprites.forEach(function(n){var t=n.getPosition().clone();n.set({position:t.add(r.clone().subtract(u).multiply(i))},!1)})},t.prototype._serializeOption=function(t){return t==="sprites"?this._options.sprites.map(function(n){return n.serializeOptions()}):n.prototype._serializeOption.call(this,t)},t.prototype.createSticker=function(n){return new e.default(this,n)},t.prototype.createText=function(n){return new o.default(this,n)},t.prototype.createBrush=function(n){return new s.default(this,n)},t.prototype.addSprite=function(n){this._options.sprites.push(n);this._container.addChild(n.getDisplayObject());this.setDirty(!0);n.on("update",this._onSpriteUpdate)},t.prototype.removeSprite=function(n){var t=this._options.sprites,i=t.indexOf(n);return i!==-1?(n.off("update",this._onSpriteUpdate),this._container.removeChild(n.getDisplayObject()),t.splice(i,1),this.setDirty(!0),!0):!1},t.prototype._render=function(n){var t=this,r=this._container,i=this._options.sprites;return f.Promise.all(i.map(function(n){return n.validateSettings()})).then(function(){i.forEach(function(i){i.update(t._sdk,n)});t._renderTexture.clear();t._renderTexture.render(r)})},t.prototype.takeSpriteToFront=function(n){var t=this._options.sprites,r=t.indexOf(n),i;r!==-1&&(f.Utils.moveArrayItem(t,r,t.length-1),i=n.getDisplayObject(),this._container.removeChild(i),this._container.addChild(i),this.setDirty(!0))},t.prototype.getSpritesAtPosition=function(n){var h=this,f=[],r,t,s,u;this._options.sprites.forEach(function(n){return n.update(h._sdk)});var i=this._sdk.getSprite(),e=i.getWorldTransform().applyInverseToVector(n),o=i.getTexture().getFrame(),c=o.width,l=o.height,a=i.getAnchor().clone().multiply(-c,-l);for(e.subtract(a),r=this._options.sprites.slice(0).reverse(),t=0,s=r.length;t<s;t++)u=r[t],u.getDisplayObject().isAtPosition(e)&&f.push(u);return f},t.prototype.dispose=function(){this._sdk.off(f.Constants.Events.OPERATION_UPDATED,this._onOperationUpdate)},t}(b.default);u.Sticker=e.default;u.Text=o.default;u.Brush=s.default;u.identifier="sprite";u.prototype.availableOptions={sprites:{type:h.ARRAY,"default":[],setter:function(n,t){var i=this,r;return n=n.map(function(n){if(n instanceof d.default)return n;var t=n.type;delete n.type;switch(t){case"text":return new o.default(i,n);case"sticker":return new e.default(i,n);case"brush":return new s.default(i,n);default:f.Log.error(i.constructor.name,"Invalid sprite type: "+n.type)}}),t||(this._options.sprites&&(r=this._options.sprites.slice(),r.forEach(function(n){i.removeSprite(n)})),n.forEach(function(n){i.addSprite(n)})),n}}};t.default=u},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}var u,e;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=f(o),h=i(2),c=f(h),l=i(1),a=f(l),r=i(3),v=i(173),y=f(v),p=i(35),w=f(p);u=r.Constants.OptionType;e=function(n){function t(){var i;s.default(this,t);for(var f=arguments.length,e=Array(f),u=0;u<f;u++)e[u]=arguments[u];return i=c.default(this,n.call.apply(n,[this].concat(e))),i._brushCanvasDirty=!0,i._brushCanvas=r.Utils.createCanvas(),i._brushContext=i._brushCanvas.getContext("2d"),i._texture=r.Engine.Texture.fromCanvas(i._brushCanvas),i._sprite.setTexture(i._texture),i._onPathUpdate=i._onPathUpdate.bind(i),i}return a.default(t,n),t.prototype.clearCanvas=function(){if(this._brushCanvas){this._brushCanvasDirty=!0;var n=this._brushCanvas,t=n.width,i=n.height;this._brushContext.clearRect(0,0,t,i)}},t.prototype.serializeOptions=function(){var t=n.prototype.serializeOptions.call(this);return t.type="brush",t},t.prototype._createBrush=function(n,t,i){var u=r.Utils.createCanvas(),f,e,o;return u.width=u.height=n,f=u.getContext("2d"),n===1?(f.fillStyle=i.toRGBA(),f.fillRect(0,0,1,1)):(e=f.createRadialGradient(u.width/2,u.height/2,Math.min(u.width/2-1,u.width/2*t),u.width/2,u.height/2,u.width/2),e.addColorStop(0,i.toRGBA()),o=i.clone(),o.a=0,e.addColorStop(1,o.toRGBA()),f.fillStyle=e,f.fillRect(0,0,u.width,u.height)),u},t.prototype.createPath=function(n,t,i){var u=this._createBrush(n,t,i),r=new y.default(this,u,i);r.on("update",this._onPathUpdate);return this._options.paths.push(r),this.setDirty(!0),r},t.prototype._onPathUpdate=function(){this._operation.setDirty(!0)},t.prototype._getTexture=function(){return this._texture},t.prototype.render=function(){var n=this;this._options.paths.forEach(function(t){t.renderToCanvas(n._brushCanvas)})},t.prototype.update=function(t,i){var r,u,f;return i&&(r=this._brushCanvas,u=i.getDimensions().floor(),(r.width!==u.x||r.height!==u.y)&&(r.width=u.x,r.height=u.y),this._texture.getBaseTexture().update()),this.render(),f=t.getRenderer(),f.isOfType("webgl")&&f.updateTexture(this._texture.getBaseTexture()),n.prototype.update.call(this,t,i)},t.prototype.getCanvas=function(){return this._brushCanvas},t}(w.default);e.prototype.availableOptions={id:{type:u.STRING,"default":function(){return r.Utils.getUUID()}},position:{type:u.VECTOR2,"default":new r.Vector2(0,0)},scale:{type:u.VECTOR2,"default":new r.Vector2(1,1)},anchor:{type:u.VECTOR2,"default":new r.Vector2(0,0)},pivot:{type:u.VECTOR2,"default":new r.Vector2(0,0)},rotation:{type:u.NUMBER,"default":0},paths:{type:u.ARRAY,"default":[],setter:function(n){return n.forEach(function(n){n.setDirty(!0)}),this.clearCanvas(),this.setDirty(!0),n}}};t.default=e},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=e(r);f=function(){function n(t,i){u.default(this,n);this._path=t;this._drawnCanvases=[];this._position=i}return n.prototype.renderToCanvas=function(n,t){if(this._drawnCanvases.indexOf(n)===-1){for(var s=n.getContext("2d"),u=this._position,i=t.getPosition(),e=u.clone().subtract(i).len(),r=this._path.getBrush(),h=r.width/4,f=0;f<=e;){var o=Math.max(0,Math.min(1,f/e)),c=i.x+(u.x-i.x)*o,l=i.y+(u.y-i.y)*o;s.drawImage(r,c-r.width/2,l-r.height/2);f+=h}this._drawnCanvases.push(n)}},n.prototype.setPosition=function(n){this._position=n},n.prototype.getPosition=function(){return this._position.clone()},n.prototype.setDirty=function(){this._drawnCanvases=[]},n}();t.default=f},function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var f=i(0),e=r(f),o=i(2),s=r(o),h=i(1),c=r(h),l=i(3),a=i(172),v=r(a);u=function(n){function t(i,r,u){e.default(this,t);var f=s.default(this,n.call(this));return f._brush=r,f._color=u,f._controlPoints=[],f}return c.default(t,n),t.prototype.renderToCanvas=function(n){var t,i,r;if(!(this._controlPoints.length<2))for(t=this._controlPoints[0],i=t,r=1;r<this._controlPoints.length;r++)i=this._controlPoints[r],i.renderToCanvas(n,t),t=i},t.prototype.addControlPoint=function(n){var t=new v.default(this,n);this._controlPoints.push(t);this.emit("update")},t.prototype.getColor=function(){return this._color},t.prototype.getBrush=function(){return this._brush},t.prototype.getControlPoints=function(){return this._controlPoints},t.prototype.setDirty=function(){this._controlPoints.forEach(function(n){n.setDirty()})},t.prototype.forEachControlPoint=function(n){this._controlPoints.forEach(n)},t}(l.EventEmitter);t.default=u},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}var r,e;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=f(o),h=i(2),c=f(h),l=i(1),a=f(l),u=i(3),v=i(35),y=f(v),p=i(79),w=f(p);r=u.Constants.OptionType;e=function(n){function t(){var i;s.default(this,t);for(var u=arguments.length,f=Array(u),r=0;r<u;r++)f[r]=arguments[r];return i=c.default(this,n.call.apply(n,[this].concat(f))),i._options.image&&i._onImageUpdate(),i._adjustmentsFilter=new w.default,i}return a.default(t,n),t.prototype.serializeOptions=function(){var t=n.prototype.serializeOptions.call(this);return t.type="sticker",t},t.prototype._rendersToRenderTexture=function(n){var t=n.getOptions().smoothDownscaling&&n.getRenderer().isOfType("webgl");return t||this._hasAdjustments()},t.prototype._getTexture=function(){return this._inputTexture},t.prototype.update=function(n){if(this._rendersToRenderTexture(n)&&this._prepareRenderTexture(n),this._hasAdjustments()){this._renderTextureSprite.setFilters([this._adjustmentsFilter]);var t=this._options.adjustments;this._adjustmentsFilter.set({brightness:t.getBrightness(),saturation:t.getSaturation(),contrast:t.getContrast()})}return this._updateSprite(),this._rendersToRenderTexture(n)&&this._renderToRenderTexture(n),this._applyFlip(),u.Promise.resolve()},t.prototype._applyFlip=function(){var n=this._sprite.getScale();this._options.flipVertically&&(n.y*=-1);this._options.flipHorizontally&&(n.x*=-1);this._sprite.setScale(n)},t.prototype._hasAdjustments=function(){var n=this._options.adjustments;return n.getBrightness()!==0||n.getSaturation()!==1||n.getContrast()!==1},t.prototype._onImageUpdate=function(){this._inputTexture=u.Engine.Texture.fromImage(this._options.image);this._identitySprite.setTexture(this._inputTexture);this._sprite.setTexture(this._inputTexture);this.setDirty(!0)},t.prototype.setOption=function(t,i){var r=arguments.length<=2||arguments[2]===undefined?!0:arguments[2];n.prototype.setOption.call(this,t,i,r);t==="image"&&this._identitySprite&&this._onImageUpdate()},t}(y.default);e.prototype.availableOptions={id:{type:r.STRING,"default":function(){return u.Utils.getUUID()}},name:{type:r.STRING,"default":""},image:{type:r.OBJECT,required:!0},position:{type:r.VECTOR2,"default":new u.Vector2(0,0)},scale:{type:r.VECTOR2,"default":new u.Vector2(1,1)},anchor:{type:r.VECTOR2,"default":new u.Vector2(0,0)},pivot:{type:r.VECTOR2,"default":new u.Vector2(.5,.5)},rotation:{type:r.NUMBER,"default":0},flipHorizontally:{type:r.BOOLEAN,"default":!1},flipVertically:{type:r.BOOLEAN,"default":!1},adjustments:{type:r.CONFIGURABLE,structure:{brightness:{type:r.NUMBER,"default":0},saturation:{type:r.NUMBER,"default":1},contrast:{type:r.NUMBER,"default":1}}}};t.default=e},function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}var r,e;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=f(o),h=i(2),c=f(h),l=i(1),a=f(l),u=i(3),v=i(35),y=f(v),p=i(176),w=f(p);r=u.Constants.OptionType;e=function(n){function t(){var i;s.default(this,t);for(var u=arguments.length,f=Array(u),r=0;r<u;r++)f[r]=arguments[r];return i=c.default(this,n.call.apply(n,[this].concat(f))),i._textRenderer=new w.default(i,i._operation),i._sprite.setTexture(i._textRenderer.getTexture()),i}return a.default(t,n),t.prototype.serializeOptions=function(){var t=n.prototype.serializeOptions.call(this);return t.type="text",t},t.prototype.getDOMStyle=function(n){var t=this._textRenderer.calculateFontStyles(n,!0);return{fontWeight:this._options.fontWeight,fontSize:t.fontSize,fontFamily:this._options.fontFamily,lineHeight:t.lineHeight+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}},t.prototype.getBoundingBox=function(n){var t=arguments.length<=1||arguments[1]===undefined?!1:arguments[1];return this._textRenderer.getBoundingBox(n,t)},t.prototype.applyFlip=function(t){n.prototype.applyFlip.call(this,t);var i=this._options.rotation;switch(t){case"horizontal":i+=(Math.PI-i)*2;this.setRotation(i);break;case"vertical":i+=(Math.PI/2-i)*2;this.setRotation(i)}},t.prototype._getTexture=function(){return this._textRenderer.getTexture()},t.prototype.update=function(t){var i,u,r;return this._textRenderer.update(t),i=this._textRenderer.getTexture(),u=i.getBaseTexture(),u.update(),r=t.getRenderer(),r.isOfType("webgl")&&r.updateTexture(i.getBaseTexture()),n.prototype.update.call(this,t),Promise.resolve()},t}(y.default);e.prototype.availableOptions={id:{type:r.STRING,"default":function(){return u.Utils.getUUID()}},fontSize:{type:r.NUMBER,"default":30},lineHeight:{type:r.NUMBER,"default":1.1},fontFamily:{type:r.STRING,"default":"Times New Roman"},fontWeight:{type:r.STRING,"default":"normal"},outlineWidth:{type:r.NUMBER,"default":0},outlineColor:{type:r.COLOR,"default":u.Color.BLACK},alignment:{type:r.STRING,"default":"left",available:["left","center","right"]},verticalAlignment:{type:r.STRING,"default":"top",available:["top","center","bottom"]},color:{type:r.COLOR,"default":new u.Color(1,0,0,1)},backgroundColor:{type:r.COLOR,"default":u.Color.TRANSPARENT},position:{type:r.VECTOR2,"default":new u.Vector2(0,0)},anchor:{type:r.VECTOR2,"default":new u.Vector2(.5,.5)},pivot:{type:r.VECTOR2,"default":new u.Vector2(0,0)},rotation:{type:r.NUMBER,"default":0},text:{type:r.STRING,required:!0},maxWidth:{type:r.NUMBER,"default":100},maxHeight:{type:r.NUMBER,"default":0}};t.default=e},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=i(0),o=u(e),r=i(3),s=i(177),h=u(s);f=function(){function n(t,i){o.default(this,n);this._text=t;this._operation=i;this._createCanvas();this._createTexture()}return n.prototype._createCanvas=function(){this._canvas=r.Utils.createCanvas();this._context=this._canvas.getContext("2d");this._textSplitter=new h.default(this._context)},n.prototype._createTexture=function(){this._texture=r.Engine.Texture.fromCanvas(this._canvas)},n.prototype._applyTextOptions=function(n){this._context.font=this._text.getFontWeight()+" "+n.fontSize+"px "+this._text.getFontFamily();this._context.textBaseline="top";this._context.textAlign=this._text.getAlignment();this._context.fillStyle=this._text.getColor().toRGBA();this._context.strokeStyle=this._text.getOutlineColor().toRGBA();var t=this._text.getOutlineWidth();t>0&&(this._context.lineWidth=t)},n.prototype._buildOutputLines=function(n){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(n),this._textSplitter.getLines()},n.prototype._renderTextLine=function(n,t){var f=this._text.getAlignment(),i=new r.Vector2(0,t),u;switch(f){case"center":i.x=this._canvas.width/2;break;case"right":i.x=this._canvas.width}this._context.fillText(n,i.x,i.y);u=this._text.getOutlineWidth();u>0&&(this._context.miterLimit=2,this._context.strokeText(n,i.x,i.y))},n.prototype.update=function(n){var t=this.calculateFontStyles(n),i=this._calculateText(n,t),r=i.boundingBox,u=i.lines;return this._renderText(n,r,u,t)},n.prototype._renderText=function(n,t,i,u){var f=this;return new r.Promise(function(n){var r,e;for(f._canvas.width=t.x,f._canvas.height=t.y,f._text.getMaxHeight()&&(f._canvas.height=Math.min(f._text.getMaxHeight(),f._canvas.height)),f._context=f._canvas.getContext("2d"),f._context.fillStyle=f._text.getBackgroundColor().toRGBA(),f._context.fillRect(0,0,t.x,t.y),f._applyTextOptions(u),r=0;r<i.length;r++)e=i[r],f._renderTextLine(e,u.lineHeight*r);n()})},n.prototype.calculateFontStyles=function(n){var u=arguments.length<=1||arguments[1]===undefined?!1:arguments[1],t=this._text.getFontSize(),r=this._text.getLineHeight()*t,i;return u&&(i=n.getZoom(),t*=i,r*=i),{fontSize:t,lineHeight:r}},n.prototype._calculateText=function(n,t){var e=this._text.getMaxWidth(),i,u,f,o;if(this._applyTextOptions(t),i=new r.Vector2,u=this._text.getText().split("\n"),typeof e!="undefined")i.x=e,u=this._buildOutputLines(e);else for(f=0;f<u.length;f++)o=u[f],i.x=Math.max(i.x,this._context.measureText(o).width);return i.y=t.lineHeight*u.length,{boundingBox:i,lines:u}},n.prototype.getTexture=function(){return this._texture},n.prototype.getBoundingBox=function(n){var i=arguments.length<=1||arguments[1]===undefined?!1:arguments[1],r=this.calculateFontStyles(n),u=this._calculateText(n,r),t=u.boundingBox;return i&&t.multiply(n.getZoom()),t},n}();t.default=f},function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});r=i(0);u=e(r);f=function(){function n(t){u.default(this,n);this._context=t;this._lastFontStyle={};this._characterWidthCache={}}return n.prototype.getLines=function(){var r,u,o,f;this._fontStyleChanged()&&(this._characterWidthCache={});var t=[],n=[],s=this._lines.length;for(r=0;r<s;r++){var h=this._lines[r],e=this._buildWords(h),c=e.length;for(u=0;u<c;u++){var i=e[u],l=n.concat(i).join("").replace(/\s+$/i,""),a=this._getWidth(l);a>this._maxWidth?(n.length>0&&(t.push(n.join("")),n=[i]),o=i.replace(/\s+$/i,""),this._getWidth(o)>this._maxWidth&&(f=this._splitWord(i),t=t.concat(f.lines),f.rest&&(n=[f.rest]))):n.push(i)}t.push(n.join(""));n=[]}return t},n.prototype._buildWords=function(n){for(var i,u=[],r="",f=n.length,t=0;t<f;t++)i=n[t],r+=i,(i===" "||i==="-"||t===f-1)&&(u.push(r),r="");return u},n.prototype._splitWord=function(n){for(var r,u={lines:[],rest:null},f=n.length,t=[],i=0;i<f;i++)r=n[i],this._getWidth(t.concat(r).join(""))>this._maxWidth?(t.length>0&&u.lines.push(t.join("")),t=[r]):t.push(r),i===f-1&&t.length>0&&(u.rest=t.join(""));return u},n.prototype._fontStyleChanged=function(){return this._context.font!==this._lastFontStyle?(this._lastFontStyle=this._context.font,!0):!1},n.prototype._getWidth=function(n){for(var t,u,r=0,f=n.length,i=0;i<f;i++)t=n[i],this._characterWidthCache[t]||(u=this._context.measureText(t).width,this._characterWidthCache[t]=u),r+=this._characterWidthCache[t];return r},n.prototype.setText=function(n){this._text=n;this._lines=n.split("\n")},n.prototype.setMaxWidth=function(n){this._maxWidth=n},n}();t.default=f},function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var e,f;Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),s=u(o),h=i(2),c=u(h),l=i(1),a=u(l),r=i(3),v=i(11),y=u(v);e=r.Constants.OptionType;f=function(n){function t(){var i;s.default(this,t);for(var f=arguments.length,e=Array(f),u=0;u<f;u++)e[u]=arguments[u];return i=c.default(this,n.call.apply(n,[this].concat(e))),i._watermarkSprite=new r.Engine.Sprite,i._watermarkSprite.setAnchor(.5,.5),i._container.addChild(i._watermarkSprite),i}return a.default(t,n),t.prototype._render=function(n){this._watermarkTexture||(this._watermarkTexture=r.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var t=n.getDimensions(),i=this._options.image,f=i.width,e=i.height,u=r.Utils.resizeVectorToFit(new r.Vector2(f,e),t);return this._watermarkSprite.setPosition(t.clone().divide(2)),this._watermarkSprite.setWidth(u.x),this._watermarkSprite.setHeight(u.y),this._renderTexture.render(this._container),r.Promise.resolve()},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._watermarkSprite.dispose()},t}(y.default);f.identifier="watermark";f.prototype.availableOptions={image:{type:e.OBJECT,required:!0}};t.default=f},function(n,t,i){"use strict";(function(n){var i;Object.defineProperty(t,"__esModule",{value:!0});
/*!
	 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
	 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
	 * requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel
	 * MIT license
	 */
var r=typeof window=="undefined"?n:window,u=r.requestAnimationFrame,f=r.cancelAnimationFrame,o=0,e=["ms","moz","webkit","o"];for(i=0;i<e.length&&!u;++i)t.requestAnimationFrame=u=r[e[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=f=r[e[i]+"CancelAnimationFrame"]||r[e[i]+"CancelRequestAnimationFrame"];u||(t.requestAnimationFrame=u=function(n){var t=(new Date).getTime(),i=Math.max(0,16-(t-o)),r=setTimeout(function(){n(t+i)},i);return o=t+i,r});f||(t.cancelAnimationFrame=f=function(n){clearTimeout(n)});t.requestAnimationFrame=u;t.cancelAnimationFrame=f}).call(t,i(95))},function(n,t,i){n.exports={"default":i(184),__esModule:!0}},function(n,t,i){n.exports={"default":i(186),__esModule:!0}},function(n,t,i){n.exports={"default":i(187),__esModule:!0}},function(n,t,i){n.exports={"default":i(188),__esModule:!0}},function(n,t,i){i(209);var r=i(21).Object;n.exports=function(n,t){return r.create(n,t)}},function(n,t,i){i(210);var r=i(21).Object;n.exports=function(n,t,i){return r.defineProperty(n,t,i)}},function(n,t,i){i(211);n.exports=i(21).Object.setPrototypeOf},function(n,t,i){i(214);i(212);i(215);i(216);n.exports=i(21).Symbol},function(n,t,i){i(213);i(217);n.exports=i(63).f("iterator")},function(n){n.exports=function(n){if(typeof n!="function")throw TypeError(n+" is not a function!");return n}},function(n){n.exports=function(){}},function(n,t,i){var r=i(18),u=i(206),f=i(205);n.exports=function(n){return function(t,i,e){var s=r(t),h=u(s.length),o=f(e,h),c;if(n&&i!=i){while(h>o)if(c=s[o++],c!=c)return!0}else for(;h>o;o++)if((n||o in s)&&s[o]===i)return n||o||0;return!n&&-1}}},function(n,t,i){var r=i(37),u=i(91),f=i(56);n.exports=function(n){var t=r(n),i=u.f;if(i)for(var e=i(n),h=f.f,o=0,s;e.length>o;)h.call(n,s=e[o++])&&t.push(s);return t}},function(n,t,i){n.exports=i(13).document&&document.documentElement},function(n,t,i){var r=i(84);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return r(n)=="String"?n.split(""):Object(n)}},function(n,t,i){var r=i(84);n.exports=Array.isArray||function(n){return r(n)=="Array"}},function(n,t,i){"use strict";var u=i(55),f=i(38),e=i(57),r={};i(22)(r,i(23)("iterator"),function(){return this});n.exports=function(n,t,i){n.prototype=u(r,{next:f(1,i)});e(n,t+" Iterator")}},function(n){n.exports=function(n,t){return{value:t,done:!!n}}},function(n,t,i){var r=i(37),u=i(18);n.exports=function(n,t){for(var i=u(n),f=r(i),s=f.length,e=0,o;s>e;)if(i[o=f[e++]]===t)return o}},function(n,t,i){var r=i(39)("meta"),o=i(30),f=i(16),s=i(17).f,h=0,u=Object.isExtensible||function(){return!0},c=!i(36)(function(){return u(Object.preventExtensions({}))}),e=function(n){s(n,r,{value:{i:"O"+ ++h,w:{}}})},l=function(n,t){if(!o(n))return typeof n=="symbol"?n:(typeof n=="string"?"S":"P")+n;if(!f(n,r)){if(!u(n))return"F";if(!t)return"E";e(n)}return n[r].i},a=function(n,t){if(!f(n,r)){if(!u(n))return!0;if(!t)return!1;e(n)}return n[r].w},v=function(n){return c&&y.NEED&&u(n)&&!f(n,r)&&e(n),n},y=n.exports={KEY:r,NEED:!1,fastKey:l,getWeak:a,onFreeze:v}},function(n,t,i){var r=i(17),u=i(28),f=i(37);n.exports=i(15)?Object.defineProperties:function(n,t){u(n);for(var i=f(t),s=i.length,e=0,o;s>e;)r.f(n,o=i[e++],t[o]);return n}},function(n,t,i){var f=i(18),r=i(90).f,e={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(n){try{return r(n)}catch(t){return u.slice()}};n.exports.f=function(n){return u&&e.call(n)=="[object Window]"?o(n):r(f(n))}},function(n,t,i){var u=i(16),f=i(207),r=i(58)("IE_PROTO"),e=Object.prototype;n.exports=Object.getPrototypeOf||function(n){return(n=f(n),u(n,r))?n[r]:typeof n.constructor=="function"&&n instanceof n.constructor?n.constructor.prototype:n instanceof Object?e:null}},function(n,t,i){var u=i(30),f=i(28),r=function(n,t){if(f(n),!u(t)&&t!==null)throw TypeError(t+": can't set as prototype!");};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(n,t,u){try{u=i(85)(Function.call,i(89).f(Object.prototype,"__proto__").set,2);u(n,[]);t=!(n instanceof Array)}catch(f){t=!0}return function(n,i){return r(n,i),t?n.__proto__=i:u(n,i),n}}({},!1):undefined),check:r}},function(n,t,i){var r=i(60),u=i(51);n.exports=function(n){return function(t,i){var e=String(u(t)),f=r(i),h=e.length,o,s;return f<0||f>=h?n?"":undefined:(o=e.charCodeAt(f),o<55296||o>56319||f+1===h||(s=e.charCodeAt(f+1))<56320||s>57343?n?e.charAt(f):o:n?e.slice(f,f+2):(o-55296<<10)+(s-56320)+65536)}}},function(n,t,i){var r=i(60),u=Math.max,f=Math.min;n.exports=function(n,t){return n=r(n),n<0?u(n+t,0):f(n,t)}},function(n,t,i){var r=i(60),u=Math.min;n.exports=function(n){return n>0?u(r(n),9007199254740991):0}},function(n,t,i){var r=i(51);n.exports=function(n){return Object(r(n))}},function(n,t,i){"use strict";var u=i(190),r=i(197),f=i(53),e=i(18);n.exports=i(88)(Array,"Array",function(n,t){this._t=e(n);this._i=0;this._k=t},function(){var t=this._t,i=this._k,n=this._i++;return!t||n>=t.length?(this._t=undefined,r(1)):i=="keys"?r(0,n):i=="values"?r(0,t[n]):r(0,[n,t[n]])},"values");f.Arguments=f.Array;u("keys");u("values");u("entries")},function(n,t,i){var r=i(29);r(r.S,"Object",{create:i(55)})},function(n,t,i){var r=i(29);r(r.S+r.F*!i(15),"Object",{defineProperty:i(17).f})},function(n,t,i){var r=i(29);r(r.S,"Object",{setPrototypeOf:i(203).set})},function(){},function(n,t,i){"use strict";var r=i(204)(!0);i(88)(String,"String",function(n){this._t=String(n);this._i=0},function(){var t=this._t,i=this._i,n;return i>=t.length?{value:undefined,done:!0}:(n=r(t,i),this._i+=n.length,{value:n,done:!1})})},function(n,t,i){"use strict";var b=i(13),r=i(16),it=i(15),e=i(29),at=i(93),fi=i(199).KEY,vt=i(36),rt=i(59),ut=i(57),ei=i(39),y=i(23),oi=i(63),si=i(62),hi=i(198),ci=i(192),li=i(195),ft=i(28),k=i(18),et=i(61),ot=i(38),p=i(55),yt=i(201),pt=i(89),wt=i(17),ai=i(37),bt=pt.f,c=wt.f,kt=yt.f,u=b.Symbol,d=b.JSON,g=d&&d.stringify,h="prototype",f=y("_hidden"),dt=y("toPrimitive"),vi={}.propertyIsEnumerable,nt=rt("symbol-registry"),s=rt("symbols"),w=rt("op-symbols"),o=Object[h],l=typeof u=="function",st=b.QObject,ht=!st||!st[h]||!st[h].findChild,ct=it&&vt(function(){return p(c({},"a",{get:function(){return c(this,"a",{value:7}).a}})).a!=7})?function(n,t,i){var r=bt(o,t);r&&delete o[t];c(n,t,i);r&&n!==o&&c(o,t,r)}:c,gt=function(n){var t=s[n]=p(u[h]);return t._k=n,t},lt=l&&typeof u.iterator=="symbol"?function(n){return typeof n=="symbol"}:function(n){return n instanceof u},tt=function(n,t,i){return(n===o&&tt(w,t,i),ft(n),t=et(t,!0),ft(i),r(s,t))?(i.enumerable?(r(n,f)&&n[f][t]&&(n[f][t]=!1),i=p(i,{enumerable:ot(0,!1)})):(r(n,f)||c(n,f,ot(1,{})),n[f][t]=!0),ct(n,t,i)):c(n,t,i)},ni=function(n,t){ft(n);for(var i=ci(t=k(t)),r=0,f=i.length,u;f>r;)tt(n,u=i[r++],t[u]);return n},yi=function(n,t){return t===undefined?p(n):ni(p(n),t)},ti=function(n){var t=vi.call(this,n=et(n,!0));return this===o&&r(s,n)&&!r(w,n)?!1:t||!r(this,n)||!r(s,n)||r(this,f)&&this[f][n]?t:!0},ii=function(n,t){if(n=k(n),t=et(t,!0),n!==o||!r(s,t)||r(w,t)){var i=bt(n,t);return!i||!r(s,t)||r(n,f)&&n[f][t]||(i.enumerable=!0),i}},ri=function(n){for(var i=kt(k(n)),u=[],e=0,t;i.length>e;)r(s,t=i[e++])||t==f||t==fi||u.push(t);return u},ui=function(n){for(var i=n===o,u=kt(i?w:k(n)),f=[],e=0,t;u.length>e;)r(s,t=u[e++])&&(i?r(o,t):!0)&&f.push(s[t]);return f},a,v;for(l||(u=function(){if(this instanceof u)throw TypeError("Symbol is not a constructor!");var n=ei(arguments.length>0?arguments[0]:undefined),t=function(i){this===o&&t.call(w,i);r(this,f)&&r(this[f],n)&&(this[f][n]=!1);ct(this,n,ot(1,i))};return it&&ht&&ct(o,n,{configurable:!0,set:t}),gt(n)},at(u[h],"toString",function(){return this._k}),pt.f=ii,wt.f=tt,i(90).f=yt.f=ri,i(56).f=ti,i(91).f=ui,it&&!i(54)&&at(o,"propertyIsEnumerable",ti,!0),oi.f=function(n){return gt(y(n))}),e(e.G+e.W+e.F*!l,{Symbol:u}),a="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),v=0;a.length>v;)y(a[v++]);for(a=ai(y.store),v=0;a.length>v;)si(a[v++]);e(e.S+e.F*!l,"Symbol",{"for":function(n){return r(nt,n+="")?nt[n]:nt[n]=u(n)},keyFor:function(n){if(lt(n))return hi(nt,n);throw TypeError(n+" is not a symbol!");},useSetter:function(){ht=!0},useSimple:function(){ht=!1}});e(e.S+e.F*!l,"Object",{create:yi,defineProperty:tt,defineProperties:ni,getOwnPropertyDescriptor:ii,getOwnPropertyNames:ri,getOwnPropertySymbols:ui});d&&e(e.S+e.F*(!l||vt(function(){var n=u();return g([n])!="[null]"||g({a:n})!="{}"||g(Object(n))!="{}"})),"JSON",{stringify:function(n){if(n!==undefined&&!lt(n)){for(var i=[n],u=1,t,r;arguments.length>u;)i.push(arguments[u++]);return t=i[1],typeof t=="function"&&(r=t),(r||!li(t))&&(t=function(n,t){return r&&(t=r.call(this,n,t)),lt(t)?void 0:t}),i[1]=t,g.apply(d,i)}}});u[h][dt]||i(22)(u[h],dt,u[h].valueOf);ut(u,"Symbol");ut(Math,"Math",!0);ut(b.JSON,"JSON",!0)},function(n,t,i){i(62)("asyncIterator")},function(n,t,i){i(62)("observable")},function(n,t,i){var s,r;i(208);var c=i(13),l=i(22),e=i(53),o=i(23)("toStringTag");for(s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],r=0;r<5;r++){var u=s[r],h=c[u],f=h&&h.prototype;f&&!f[o]&&l(f,o,u);e[u]=e.Array}},function(n){n.exports="precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(n){n.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(n){n.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nprecision mediump float;\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(n){n.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nprecision mediump float;\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\nuniform float u_saturation;\nuniform float u_contrast;\nuniform float u_exposure;\nuniform float u_shadows;\nuniform float u_highlights;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec4 color = texColor;\n  float luminance = dot(color.rgb, luminanceWeighting);\n\n  // apply shadows and highlights\n  float shadow = clamp((pow(luminance, 1.0/(u_shadows+1.0)) + (-0.76)*pow(luminance, 2.0/(u_shadows+1.0))) - luminance, 0.0, 1.0);\n  float highlight = clamp((1.0 - (pow(1.0-luminance, 1.0/(2.0-u_highlights)) + (-0.8)*pow(1.0-luminance, 2.0/(2.0-u_highlights)))) - luminance, -1.0, 0.0);\n  color.rgb = (luminance + shadow + highlight) * (color.rgb / luminance );\n\n  // Apply exposure\n  color.rgb = color.rgb * pow(2.0, u_exposure);\n\n  // Apply brightness\n  color.rgb = (color.rgb + u_brightness);\n\n  // Apply saturation\n  vec3 greyScaleColor = vec3(luminance);\n  color.rgb = mix(greyScaleColor, color.rgb, u_saturation);\n\n  // Apply contrast\n  color.rgb = (color.rgb - 0.5) * u_contrast + 0.5;\n\n  // Apply alpha\n  color = vec4(color.rgb * texColor.a, texColor.a);\n\n  gl_FragColor = color;\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_clarity;\nuniform vec2 u_texSize;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n  vec4 original = texture2D(u_image, v_texCoord);\n\n  vec4 color = texture2D(u_image, v_texCoord);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 0.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 0.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 1.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, -1.0) * u_texSize);\n\n  // apply unsharp mask\n  vec4 blurred = color / 9.0;\n  color = mix(blurred, original, 1.0 + u_clarity);\n\n  // desaturation, to emphesize the effect\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, color.xyz));\n  float desaturation = clamp(u_clarity * 0.13, 0.0, 1.0);\n  gl_FragColor = vec4(mix(color.xyz, gray, desaturation) * color.a, color.a);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_frameImage;\nuniform vec4 u_color;\nuniform float u_thickness;\nuniform vec2 u_textureSize;\n\nvoid main() {\n  vec4 fragColor = texture2D(u_image, v_texCoord);\n  float scaledThicknessX = u_thickness / u_textureSize.x;\n  float scaledThicknessY = u_thickness / u_textureSize.y;\n  if (v_texCoord.x < scaledThicknessX ||\n    v_texCoord.x > 1.0 - scaledThicknessX ||\n    v_texCoord.y < scaledThicknessY || v_texCoord.y > 1.0 - scaledThicknessY) {\n      fragColor = mix(fragColor, u_color, u_color.a);\n    }\n\n  gl_FragColor = fragColor;\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colormatrix;\nuniform vec4 u_colormatrix_vec;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colormatrix + u_colormatrix_vec;\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(n){n.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nprecision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(n){n.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"}])})